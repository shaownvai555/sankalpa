function aj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kT={exports:{}},zh={},CT={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),cj=Symbol.for("react.portal"),uj=Symbol.for("react.fragment"),dj=Symbol.for("react.strict_mode"),hj=Symbol.for("react.profiler"),fj=Symbol.for("react.provider"),mj=Symbol.for("react.context"),pj=Symbol.for("react.forward_ref"),gj=Symbol.for("react.suspense"),yj=Symbol.for("react.memo"),xj=Symbol.for("react.lazy"),Uv=Symbol.iterator;function vj(t){return t===null||typeof t!="object"?null:(t=Uv&&t[Uv]||t["@@iterator"],typeof t=="function"?t:null)}var jT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PT=Object.assign,AT={};function wa(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||jT}wa.prototype.isReactComponent={};wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RT(){}RT.prototype=wa.prototype;function i0(t,e,n){this.props=t,this.context=e,this.refs=AT,this.updater=n||jT}var o0=i0.prototype=new RT;o0.constructor=i0;PT(o0,wa.prototype);o0.isPureReactComponent=!0;var Bv=Array.isArray,DT=Object.prototype.hasOwnProperty,a0={current:null},VT={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)DT.call(e,r)&&!VT.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Lc,type:t,key:i,ref:o,props:s,_owner:a0.current}}function wj(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function l0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function _j(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $v=/\/+/g;function im(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_j(""+t.key):e.toString(36)}function rd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lc:case cj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+im(o,0):r,Bv(s)?(n="",t!=null&&(n=t.replace($v,"$&/")+"/"),rd(s,e,n,"",function(u){return u})):s!=null&&(l0(s)&&(s=wj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace($v,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Bv(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+im(i,a);o+=rd(i,e,n,c,s)}else if(c=vj(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+im(i,a++),o+=rd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Eu(t,e,n){if(t==null)return t;var r=[],s=0;return rd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function bj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},sd={transition:null},Tj={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:sd,ReactCurrentOwner:a0};function MT(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Eu,forEach:function(t,e,n){Eu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eu(t,function(){e++}),e},toArray:function(t){return Eu(t,function(e){return e})||[]},only:function(t){if(!l0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=wa;pe.Fragment=uj;pe.Profiler=hj;pe.PureComponent=i0;pe.StrictMode=dj;pe.Suspense=gj;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tj;pe.act=MT;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=a0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)DT.call(e,c)&&!VT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Lc,type:t.type,key:s,ref:i,props:r,_owner:o}};pe.createContext=function(t){return t={$$typeof:mj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fj,_context:t},t.Consumer=t};pe.createElement=LT;pe.createFactory=function(t){var e=LT.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:pj,render:t}};pe.isValidElement=l0;pe.lazy=function(t){return{$$typeof:xj,_payload:{_status:-1,_result:t},_init:bj}};pe.memo=function(t,e){return{$$typeof:yj,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=sd.transition;sd.transition={};try{t()}finally{sd.transition=e}};pe.unstable_act=MT;pe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};pe.useContext=function(t){return Gt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};pe.useId=function(){return Gt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};pe.useRef=function(t){return Gt.current.useRef(t)};pe.useState=function(t){return Gt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Gt.current.useTransition()};pe.version="18.3.1";CT.exports=pe;var N=CT.exports;const c0=lj(N),Ej=aj({__proto__:null,default:c0},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nj=N,Ij=Symbol.for("react.element"),Sj=Symbol.for("react.fragment"),kj=Object.prototype.hasOwnProperty,Cj=Nj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jj={key:!0,ref:!0,__self:!0,__source:!0};function OT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kj.call(e,r)&&!jj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ij,type:t,key:i,ref:o,props:s,_owner:Cj.current}}zh.Fragment=Sj;zh.jsx=OT;zh.jsxs=OT;kT.exports=zh;var l=kT.exports,FT={exports:{}},yn={},UT={exports:{}},BT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,z){var G=$.length;$.push(z);e:for(;0<G;){var te=G-1>>>1,le=$[te];if(0<s(le,z))$[te]=z,$[G]=le,G=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var z=$[0],G=$.pop();if(G!==z){$[0]=G;e:for(var te=0,le=$.length,xe=le>>>1;te<xe;){var Et=2*(te+1)-1,ut=$[Et],it=Et+1,Yt=$[it];if(0>s(ut,G))it<le&&0>s(Yt,ut)?($[te]=Yt,$[it]=G,te=it):($[te]=ut,$[Et]=G,te=Et);else if(it<le&&0>s(Yt,G))$[te]=Yt,$[it]=G,te=it;else break e}}return z}function s($,z){var G=$.sortIndex-z.sortIndex;return G!==0?G:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,f=null,m=3,g=!1,v=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=$)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function I($){if(x=!1,_($),!v)if(n(c)!==null)v=!0,he(A);else{var z=n(u);z!==null&&ke(I,z.startTime-$)}}function A($,z){v=!1,x&&(x=!1,b(E),E=-1),g=!0;var G=m;try{for(_(z),f=n(c);f!==null&&(!(f.expirationTime>z)||$&&!D());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var le=te(f.expirationTime<=z);z=t.unstable_now(),typeof le=="function"?f.callback=le:f===n(c)&&r(c),_(z)}else r(c);f=n(c)}if(f!==null)var xe=!0;else{var Et=n(u);Et!==null&&ke(I,Et.startTime-z),xe=!1}return xe}finally{f=null,m=G,g=!1}}var R=!1,S=null,E=-1,k=5,j=-1;function D(){return!(t.unstable_now()-j<k)}function V(){if(S!==null){var $=t.unstable_now();j=$;var z=!0;try{z=S(!0,$)}finally{z?P():(R=!1,S=null)}}else R=!1}var P;if(typeof y=="function")P=function(){y(V)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,de=X.port2;X.port1.onmessage=V,P=function(){de.postMessage(null)}}else P=function(){T(V,0)};function he($){S=$,R||(R=!0,P())}function ke($,z){E=T(function(){$(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,he(A))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var G=m;m=z;try{return $()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=m;m=$;try{return z()}finally{m=G}},t.unstable_scheduleCallback=function($,z,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,$){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=G+le,$={id:h++,callback:z,priorityLevel:$,startTime:G,expirationTime:le,sortIndex:-1},G>te?($.sortIndex=G,e(u,$),n(c)===null&&$===n(u)&&(x?(b(E),E=-1):x=!0,ke(I,G-te))):($.sortIndex=le,e(c,$),v||g||(v=!0,he(A))),$},t.unstable_shouldYield=D,t.unstable_wrapCallback=function($){var z=m;return function(){var G=m;m=z;try{return $.apply(this,arguments)}finally{m=G}}}})(BT);UT.exports=BT;var Pj=UT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aj=N,mn=Pj;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $T=new Set,Jl={};function Hi(t,e){Zo(t,e),Zo(t+"Capture",e)}function Zo(t,e){for(Jl[t]=e,t=0;t<e.length;t++)$T.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lp=Object.prototype.hasOwnProperty,Rj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zv={},Hv={};function Dj(t){return lp.call(Hv,t)?!0:lp.call(zv,t)?!1:Rj.test(t)?Hv[t]=!0:(zv[t]=!0,!1)}function Vj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lj(t,e,n,r){if(e===null||typeof e>"u"||Vj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var u0=/[\-:]([a-z])/g;function d0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(u0,d0);Tt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(u0,d0);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(u0,d0);Tt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function h0(t,e,n,r){var s=Tt.hasOwnProperty(e)?Tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lj(e,n,s,r)&&(n=null),r||s===null?Dj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=Aj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),No=Symbol.for("react.portal"),Io=Symbol.for("react.fragment"),f0=Symbol.for("react.strict_mode"),cp=Symbol.for("react.profiler"),zT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),m0=Symbol.for("react.forward_ref"),up=Symbol.for("react.suspense"),dp=Symbol.for("react.suspense_list"),p0=Symbol.for("react.memo"),es=Symbol.for("react.lazy"),qT=Symbol.for("react.offscreen"),qv=Symbol.iterator;function Ya(t){return t===null||typeof t!="object"?null:(t=qv&&t[qv]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,om;function xl(t){if(om===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);om=e&&e[1]||""}return`
`+om+t}var am=!1;function lm(t,e){if(!t||am)return"";am=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{am=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xl(t):""}function Mj(t){switch(t.tag){case 5:return xl(t.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return t=lm(t.type,!1),t;case 11:return t=lm(t.type.render,!1),t;case 1:return t=lm(t.type,!0),t;default:return""}}function hp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Io:return"Fragment";case No:return"Portal";case cp:return"Profiler";case f0:return"StrictMode";case up:return"Suspense";case dp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HT:return(t.displayName||"Context")+".Consumer";case zT:return(t._context.displayName||"Context")+".Provider";case m0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case p0:return e=t.displayName||null,e!==null?e:hp(t.type)||"Memo";case es:e=t._payload,t=t._init;try{return hp(t(e))}catch{}}return null}function Oj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hp(e);case 8:return e===f0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Fj(t){var e=KT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Iu(t){t._valueTracker||(t._valueTracker=Fj(t))}function WT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fp(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Kv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GT(t,e){e=e.checked,e!=null&&h0(t,"checked",e,!1)}function mp(t,e){GT(t,e);var n=Cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pp(t,e.type,n):e.hasOwnProperty("defaultValue")&&pp(t,e.type,Cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Wv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pp(t,e,n){(e!=="number"||Pd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vl=Array.isArray;function $o(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function gp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(vl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cs(n)}}function QT(t,e){var n=Cs(e.value),r=Cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Su,JT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Su=Su||document.createElement("div"),Su.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Su.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Uj=["Webkit","ms","Moz","O"];Object.keys(Cl).forEach(function(t){Uj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Cl[e]=Cl[t]})});function XT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Cl.hasOwnProperty(t)&&Cl[t]?(""+e).trim():e+"px"}function ZT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Bj=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xp(t,e){if(e){if(Bj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function vp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wp=null;function g0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,zo=null,Ho=null;function Yv(t){if(t=Fc(t)){if(typeof _p!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Gh(e),_p(t.stateNode,t.type,e))}}function eE(t){zo?Ho?Ho.push(t):Ho=[t]:zo=t}function tE(){if(zo){var t=zo,e=Ho;if(Ho=zo=null,Yv(t),e)for(t=0;t<e.length;t++)Yv(e[t])}}function nE(t,e){return t(e)}function rE(){}var cm=!1;function sE(t,e,n){if(cm)return t(e,n);cm=!0;try{return nE(t,e,n)}finally{cm=!1,(zo!==null||Ho!==null)&&(rE(),tE())}}function Zl(t,e){var n=t.stateNode;if(n===null)return null;var r=Gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var bp=!1;if(Pr)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){bp=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{bp=!1}function $j(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var jl=!1,Ad=null,Rd=!1,Tp=null,zj={onError:function(t){jl=!0,Ad=t}};function Hj(t,e,n,r,s,i,o,a,c){jl=!1,Ad=null,$j.apply(zj,arguments)}function qj(t,e,n,r,s,i,o,a,c){if(Hj.apply(this,arguments),jl){if(jl){var u=Ad;jl=!1,Ad=null}else throw Error(q(198));Rd||(Rd=!0,Tp=u)}}function qi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function iE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jv(t){if(qi(t)!==t)throw Error(q(188))}function Kj(t){var e=t.alternate;if(!e){if(e=qi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jv(s),t;if(i===r)return Jv(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function oE(t){return t=Kj(t),t!==null?aE(t):null}function aE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=aE(t);if(e!==null)return e;t=t.sibling}return null}var lE=mn.unstable_scheduleCallback,Xv=mn.unstable_cancelCallback,Wj=mn.unstable_shouldYield,Gj=mn.unstable_requestPaint,Xe=mn.unstable_now,Qj=mn.unstable_getCurrentPriorityLevel,y0=mn.unstable_ImmediatePriority,cE=mn.unstable_UserBlockingPriority,Dd=mn.unstable_NormalPriority,Yj=mn.unstable_LowPriority,uE=mn.unstable_IdlePriority,Hh=null,er=null;function Jj(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(Hh,t,void 0,(t.current.flags&128)===128)}catch{}}var Bn=Math.clz32?Math.clz32:eP,Xj=Math.log,Zj=Math.LN2;function eP(t){return t>>>=0,t===0?32:31-(Xj(t)/Zj|0)|0}var ku=64,Cu=4194304;function wl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Vd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=wl(a):(i&=o,i!==0&&(r=wl(i)))}else o=n&~s,o!==0?r=wl(o):i!==0&&(r=wl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bn(e),s=1<<n,r|=t[n],e&=~s;return r}function tP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bn(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=tP(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function Ep(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function dE(){var t=ku;return ku<<=1,!(ku&4194240)&&(ku=64),t}function um(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bn(e),t[e]=n}function rP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function x0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Se=0;function hE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fE,v0,mE,pE,gE,Np=!1,ju=[],ps=null,gs=null,ys=null,ec=new Map,tc=new Map,rs=[],sP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zv(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ec.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(e.pointerId)}}function Xa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fc(e),e!==null&&v0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function iP(t,e,n,r,s){switch(e){case"focusin":return ps=Xa(ps,t,e,n,r,s),!0;case"dragenter":return gs=Xa(gs,t,e,n,r,s),!0;case"mouseover":return ys=Xa(ys,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ec.set(i,Xa(ec.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,tc.set(i,Xa(tc.get(i)||null,t,e,n,r,s)),!0}return!1}function yE(t){var e=pi(t.target);if(e!==null){var n=qi(e);if(n!==null){if(e=n.tag,e===13){if(e=iE(n),e!==null){t.blockedOn=e,gE(t.priority,function(){mE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function id(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ip(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wp=r,n.target.dispatchEvent(r),wp=null}else return e=Fc(n),e!==null&&v0(e),t.blockedOn=n,!1;e.shift()}return!0}function e1(t,e,n){id(t)&&n.delete(e)}function oP(){Np=!1,ps!==null&&id(ps)&&(ps=null),gs!==null&&id(gs)&&(gs=null),ys!==null&&id(ys)&&(ys=null),ec.forEach(e1),tc.forEach(e1)}function Za(t,e){t.blockedOn===e&&(t.blockedOn=null,Np||(Np=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,oP)))}function nc(t){function e(s){return Za(s,t)}if(0<ju.length){Za(ju[0],t);for(var n=1;n<ju.length;n++){var r=ju[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ps!==null&&Za(ps,t),gs!==null&&Za(gs,t),ys!==null&&Za(ys,t),ec.forEach(e),tc.forEach(e),n=0;n<rs.length;n++)r=rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rs.length&&(n=rs[0],n.blockedOn===null);)yE(n),n.blockedOn===null&&rs.shift()}var qo=Ur.ReactCurrentBatchConfig,Ld=!0;function aP(t,e,n,r){var s=Se,i=qo.transition;qo.transition=null;try{Se=1,w0(t,e,n,r)}finally{Se=s,qo.transition=i}}function lP(t,e,n,r){var s=Se,i=qo.transition;qo.transition=null;try{Se=4,w0(t,e,n,r)}finally{Se=s,qo.transition=i}}function w0(t,e,n,r){if(Ld){var s=Ip(t,e,n,r);if(s===null)wm(t,e,r,Md,n),Zv(t,r);else if(iP(s,t,e,n,r))r.stopPropagation();else if(Zv(t,r),e&4&&-1<sP.indexOf(t)){for(;s!==null;){var i=Fc(s);if(i!==null&&fE(i),i=Ip(t,e,n,r),i===null&&wm(t,e,r,Md,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wm(t,e,r,null,n)}}var Md=null;function Ip(t,e,n,r){if(Md=null,t=g0(r),t=pi(t),t!==null)if(e=qi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=iE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Md=t,null}function xE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qj()){case y0:return 1;case cE:return 4;case Dd:case Yj:return 16;case uE:return 536870912;default:return 16}default:return 16}}var ds=null,_0=null,od=null;function vE(){if(od)return od;var t,e=_0,n=e.length,r,s="value"in ds?ds.value:ds.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return od=s.slice(t,1<r?1-r:void 0)}function ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pu(){return!0}function t1(){return!1}function xn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pu:t1,this.isPropagationStopped=t1,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),e}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},b0=xn(_a),Oc=Qe({},_a,{view:0,detail:0}),cP=xn(Oc),dm,hm,el,qh=Qe({},Oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==el&&(el&&t.type==="mousemove"?(dm=t.screenX-el.screenX,hm=t.screenY-el.screenY):hm=dm=0,el=t),dm)},movementY:function(t){return"movementY"in t?t.movementY:hm}}),n1=xn(qh),uP=Qe({},qh,{dataTransfer:0}),dP=xn(uP),hP=Qe({},Oc,{relatedTarget:0}),fm=xn(hP),fP=Qe({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),mP=xn(fP),pP=Qe({},_a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gP=xn(pP),yP=Qe({},_a,{data:0}),r1=xn(yP),xP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _P(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wP[t])?!!e[t]:!1}function T0(){return _P}var bP=Qe({},Oc,{key:function(t){if(t.key){var e=xP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T0,charCode:function(t){return t.type==="keypress"?ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),TP=xn(bP),EP=Qe({},qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s1=xn(EP),NP=Qe({},Oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T0}),IP=xn(NP),SP=Qe({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),kP=xn(SP),CP=Qe({},qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jP=xn(CP),PP=[9,13,27,32],E0=Pr&&"CompositionEvent"in window,Pl=null;Pr&&"documentMode"in document&&(Pl=document.documentMode);var AP=Pr&&"TextEvent"in window&&!Pl,wE=Pr&&(!E0||Pl&&8<Pl&&11>=Pl),i1=" ",o1=!1;function _E(t,e){switch(t){case"keyup":return PP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var So=!1;function RP(t,e){switch(t){case"compositionend":return bE(e);case"keypress":return e.which!==32?null:(o1=!0,i1);case"textInput":return t=e.data,t===i1&&o1?null:t;default:return null}}function DP(t,e){if(So)return t==="compositionend"||!E0&&_E(t,e)?(t=vE(),od=_0=ds=null,So=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wE&&e.locale!=="ko"?null:e.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VP[t.type]:e==="textarea"}function TE(t,e,n,r){eE(r),e=Od(e,"onChange"),0<e.length&&(n=new b0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Al=null,rc=null;function LP(t){DE(t,0)}function Kh(t){var e=jo(t);if(WT(e))return t}function MP(t,e){if(t==="change")return e}var EE=!1;if(Pr){var mm;if(Pr){var pm="oninput"in document;if(!pm){var l1=document.createElement("div");l1.setAttribute("oninput","return;"),pm=typeof l1.oninput=="function"}mm=pm}else mm=!1;EE=mm&&(!document.documentMode||9<document.documentMode)}function c1(){Al&&(Al.detachEvent("onpropertychange",NE),rc=Al=null)}function NE(t){if(t.propertyName==="value"&&Kh(rc)){var e=[];TE(e,rc,t,g0(t)),sE(LP,e)}}function OP(t,e,n){t==="focusin"?(c1(),Al=e,rc=n,Al.attachEvent("onpropertychange",NE)):t==="focusout"&&c1()}function FP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kh(rc)}function UP(t,e){if(t==="click")return Kh(e)}function BP(t,e){if(t==="input"||t==="change")return Kh(e)}function $P(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:$P;function sc(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!lp.call(e,s)||!Wn(t[s],e[s]))return!1}return!0}function u1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function d1(t,e){var n=u1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u1(n)}}function IE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?IE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SE(){for(var t=window,e=Pd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pd(t.document)}return e}function N0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zP(t){var e=SE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&IE(n.ownerDocument.documentElement,n)){if(r!==null&&N0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=d1(n,i);var o=d1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HP=Pr&&"documentMode"in document&&11>=document.documentMode,ko=null,Sp=null,Rl=null,kp=!1;function h1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kp||ko==null||ko!==Pd(r)||(r=ko,"selectionStart"in r&&N0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rl&&sc(Rl,r)||(Rl=r,r=Od(Sp,"onSelect"),0<r.length&&(e=new b0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function Au(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Co={animationend:Au("Animation","AnimationEnd"),animationiteration:Au("Animation","AnimationIteration"),animationstart:Au("Animation","AnimationStart"),transitionend:Au("Transition","TransitionEnd")},gm={},kE={};Pr&&(kE=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Wh(t){if(gm[t])return gm[t];if(!Co[t])return t;var e=Co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kE)return gm[t]=e[n];return t}var CE=Wh("animationend"),jE=Wh("animationiteration"),PE=Wh("animationstart"),AE=Wh("transitionend"),RE=new Map,f1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(t,e){RE.set(t,e),Hi(e,[t])}for(var ym=0;ym<f1.length;ym++){var xm=f1[ym],qP=xm.toLowerCase(),KP=xm[0].toUpperCase()+xm.slice(1);Fs(qP,"on"+KP)}Fs(CE,"onAnimationEnd");Fs(jE,"onAnimationIteration");Fs(PE,"onAnimationStart");Fs("dblclick","onDoubleClick");Fs("focusin","onFocus");Fs("focusout","onBlur");Fs(AE,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WP=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function m1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qj(r,e,void 0,t),t.currentTarget=null}function DE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;m1(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;m1(s,a,u),i=c}}}if(Rd)throw t=Tp,Rd=!1,Tp=null,t}function Ve(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var r=t+"__bubble";n.has(r)||(VE(e,t,2,!1),n.add(r))}function vm(t,e,n){var r=0;e&&(r|=4),VE(n,t,r,e)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function ic(t){if(!t[Ru]){t[Ru]=!0,$T.forEach(function(n){n!=="selectionchange"&&(WP.has(n)||vm(n,!1,t),vm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ru]||(e[Ru]=!0,vm("selectionchange",!1,e))}}function VE(t,e,n,r){switch(xE(e)){case 1:var s=aP;break;case 4:s=lP;break;default:s=w0}n=s.bind(null,e,n,t),s=void 0,!bp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=pi(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}sE(function(){var u=i,h=g0(n),f=[];e:{var m=RE.get(t);if(m!==void 0){var g=b0,v=t;switch(t){case"keypress":if(ad(n)===0)break e;case"keydown":case"keyup":g=TP;break;case"focusin":v="focus",g=fm;break;case"focusout":v="blur",g=fm;break;case"beforeblur":case"afterblur":g=fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=n1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=dP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=IP;break;case CE:case jE:case PE:g=mP;break;case AE:g=kP;break;case"scroll":g=cP;break;case"wheel":g=jP;break;case"copy":case"cut":case"paste":g=gP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=s1}var x=(e&4)!==0,T=!x&&t==="scroll",b=x?m!==null?m+"Capture":null:m;x=[];for(var y=u,_;y!==null;){_=y;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,b!==null&&(I=Zl(y,b),I!=null&&x.push(oc(y,I,_)))),T)break;y=y.return}0<x.length&&(m=new g(m,v,null,n,h),f.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==wp&&(v=n.relatedTarget||n.fromElement)&&(pi(v)||v[Ar]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?pi(v):null,v!==null&&(T=qi(v),v!==T||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=n1,I="onMouseLeave",b="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=s1,I="onPointerLeave",b="onPointerEnter",y="pointer"),T=g==null?m:jo(g),_=v==null?m:jo(v),m=new x(I,y+"leave",g,n,h),m.target=T,m.relatedTarget=_,I=null,pi(h)===u&&(x=new x(b,y+"enter",v,n,h),x.target=_,x.relatedTarget=T,I=x),T=I,g&&v)t:{for(x=g,b=v,y=0,_=x;_;_=ho(_))y++;for(_=0,I=b;I;I=ho(I))_++;for(;0<y-_;)x=ho(x),y--;for(;0<_-y;)b=ho(b),_--;for(;y--;){if(x===b||b!==null&&x===b.alternate)break t;x=ho(x),b=ho(b)}x=null}else x=null;g!==null&&p1(f,m,g,x,!1),v!==null&&T!==null&&p1(f,T,v,x,!0)}}e:{if(m=u?jo(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var A=MP;else if(a1(m))if(EE)A=BP;else{A=FP;var R=OP}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(A=UP);if(A&&(A=A(t,u))){TE(f,A,n,h);break e}R&&R(t,m,u),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&pp(m,"number",m.value)}switch(R=u?jo(u):window,t){case"focusin":(a1(R)||R.contentEditable==="true")&&(ko=R,Sp=u,Rl=null);break;case"focusout":Rl=Sp=ko=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,h1(f,n,h);break;case"selectionchange":if(HP)break;case"keydown":case"keyup":h1(f,n,h)}var S;if(E0)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else So?_E(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(wE&&n.locale!=="ko"&&(So||E!=="onCompositionStart"?E==="onCompositionEnd"&&So&&(S=vE()):(ds=h,_0="value"in ds?ds.value:ds.textContent,So=!0)),R=Od(u,E),0<R.length&&(E=new r1(E,t,null,n,h),f.push({event:E,listeners:R}),S?E.data=S:(S=bE(n),S!==null&&(E.data=S)))),(S=AP?RP(t,n):DP(t,n))&&(u=Od(u,"onBeforeInput"),0<u.length&&(h=new r1("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}DE(f,e)})}function oc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Od(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zl(t,n),i!=null&&r.unshift(oc(t,i,s)),i=Zl(t,e),i!=null&&r.push(oc(t,i,s))),t=t.return}return r}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Zl(n,i),c!=null&&o.unshift(oc(n,c,a))):s||(c=Zl(n,i),c!=null&&o.push(oc(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GP=/\r\n?/g,QP=/\u0000|\uFFFD/g;function g1(t){return(typeof t=="string"?t:""+t).replace(GP,`
`).replace(QP,"")}function Du(t,e,n){if(e=g1(e),g1(t)!==e&&n)throw Error(q(425))}function Fd(){}var Cp=null,jp=null;function Pp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,YP=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,JP=typeof queueMicrotask=="function"?queueMicrotask:typeof y1<"u"?function(t){return y1.resolve(null).then(t).catch(XP)}:Ap;function XP(t){setTimeout(function(){throw t})}function _m(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);nc(e)}function xs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),Yn="__reactFiber$"+ba,ac="__reactProps$"+ba,Ar="__reactContainer$"+ba,Rp="__reactEvents$"+ba,ZP="__reactListeners$"+ba,eA="__reactHandles$"+ba;function pi(t){var e=t[Yn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ar]||n[Yn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x1(t);t!==null;){if(n=t[Yn])return n;t=x1(t)}return e}t=n,n=t.parentNode}return null}function Fc(t){return t=t[Yn]||t[Ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function jo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Gh(t){return t[ac]||null}var Dp=[],Po=-1;function Us(t){return{current:t}}function Le(t){0>Po||(t.current=Dp[Po],Dp[Po]=null,Po--)}function Ae(t,e){Po++,Dp[Po]=t.current,t.current=e}var js={},Dt=Us(js),tn=Us(!1),Ni=js;function ea(t,e){var n=t.type.contextTypes;if(!n)return js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function nn(t){return t=t.childContextTypes,t!=null}function Ud(){Le(tn),Le(Dt)}function v1(t,e,n){if(Dt.current!==js)throw Error(q(168));Ae(Dt,e),Ae(tn,n)}function LE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,Oj(t)||"Unknown",s));return Qe({},n,r)}function Bd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||js,Ni=Dt.current,Ae(Dt,t),Ae(tn,tn.current),!0}function w1(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=LE(t,e,Ni),r.__reactInternalMemoizedMergedChildContext=t,Le(tn),Le(Dt),Ae(Dt,t)):Le(tn),Ae(tn,n)}var pr=null,Qh=!1,bm=!1;function ME(t){pr===null?pr=[t]:pr.push(t)}function tA(t){Qh=!0,ME(t)}function Bs(){if(!bm&&pr!==null){bm=!0;var t=0,e=Se;try{var n=pr;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,Qh=!1}catch(s){throw pr!==null&&(pr=pr.slice(t+1)),lE(y0,Bs),s}finally{Se=e,bm=!1}}return null}var Ao=[],Ro=0,$d=null,zd=0,bn=[],Tn=0,Ii=null,yr=1,xr="";function si(t,e){Ao[Ro++]=zd,Ao[Ro++]=$d,$d=t,zd=e}function OE(t,e,n){bn[Tn++]=yr,bn[Tn++]=xr,bn[Tn++]=Ii,Ii=t;var r=yr;t=xr;var s=32-Bn(r)-1;r&=~(1<<s),n+=1;var i=32-Bn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,yr=1<<32-Bn(e)+s|n<<s|r,xr=i+t}else yr=1<<i|n<<s|r,xr=t}function I0(t){t.return!==null&&(si(t,1),OE(t,1,0))}function S0(t){for(;t===$d;)$d=Ao[--Ro],Ao[Ro]=null,zd=Ao[--Ro],Ao[Ro]=null;for(;t===Ii;)Ii=bn[--Tn],bn[Tn]=null,xr=bn[--Tn],bn[Tn]=null,yr=bn[--Tn],bn[Tn]=null}var fn=null,dn=null,Oe=!1,On=null;function FE(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,dn=xs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ii!==null?{id:yr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,dn=null,!0):!1;default:return!1}}function Vp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lp(t){if(Oe){var e=dn;if(e){var n=e;if(!_1(t,e)){if(Vp(t))throw Error(q(418));e=xs(n.nextSibling);var r=fn;e&&_1(t,e)?FE(r,n):(t.flags=t.flags&-4097|2,Oe=!1,fn=t)}}else{if(Vp(t))throw Error(q(418));t.flags=t.flags&-4097|2,Oe=!1,fn=t}}}function b1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Vu(t){if(t!==fn)return!1;if(!Oe)return b1(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pp(t.type,t.memoizedProps)),e&&(e=dn)){if(Vp(t))throw UE(),Error(q(418));for(;e;)FE(t,e),e=xs(e.nextSibling)}if(b1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=xs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=fn?xs(t.stateNode.nextSibling):null;return!0}function UE(){for(var t=dn;t;)t=xs(t.nextSibling)}function ta(){dn=fn=null,Oe=!1}function k0(t){On===null?On=[t]:On.push(t)}var nA=Ur.ReactCurrentBatchConfig;function tl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Lu(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function T1(t){var e=t._init;return e(t._payload)}function BE(t){function e(b,y){if(t){var _=b.deletions;_===null?(b.deletions=[y],b.flags|=16):_.push(y)}}function n(b,y){if(!t)return null;for(;y!==null;)e(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function s(b,y){return b=bs(b,y),b.index=0,b.sibling=null,b}function i(b,y,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<y?(b.flags|=2,y):_):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,y,_,I){return y===null||y.tag!==6?(y=Cm(_,b.mode,I),y.return=b,y):(y=s(y,_),y.return=b,y)}function c(b,y,_,I){var A=_.type;return A===Io?h(b,y,_.props.children,I,_.key):y!==null&&(y.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===es&&T1(A)===y.type)?(I=s(y,_.props),I.ref=tl(b,y,_),I.return=b,I):(I=md(_.type,_.key,_.props,null,b.mode,I),I.ref=tl(b,y,_),I.return=b,I)}function u(b,y,_,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=jm(_,b.mode,I),y.return=b,y):(y=s(y,_.children||[]),y.return=b,y)}function h(b,y,_,I,A){return y===null||y.tag!==7?(y=bi(_,b.mode,I,A),y.return=b,y):(y=s(y,_),y.return=b,y)}function f(b,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Cm(""+y,b.mode,_),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nu:return _=md(y.type,y.key,y.props,null,b.mode,_),_.ref=tl(b,null,y),_.return=b,_;case No:return y=jm(y,b.mode,_),y.return=b,y;case es:var I=y._init;return f(b,I(y._payload),_)}if(vl(y)||Ya(y))return y=bi(y,b.mode,_,null),y.return=b,y;Lu(b,y)}return null}function m(b,y,_,I){var A=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:a(b,y,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:return _.key===A?c(b,y,_,I):null;case No:return _.key===A?u(b,y,_,I):null;case es:return A=_._init,m(b,y,A(_._payload),I)}if(vl(_)||Ya(_))return A!==null?null:h(b,y,_,I,null);Lu(b,_)}return null}function g(b,y,_,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return b=b.get(_)||null,a(y,b,""+I,A);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Nu:return b=b.get(I.key===null?_:I.key)||null,c(y,b,I,A);case No:return b=b.get(I.key===null?_:I.key)||null,u(y,b,I,A);case es:var R=I._init;return g(b,y,_,R(I._payload),A)}if(vl(I)||Ya(I))return b=b.get(_)||null,h(y,b,I,A,null);Lu(y,I)}return null}function v(b,y,_,I){for(var A=null,R=null,S=y,E=y=0,k=null;S!==null&&E<_.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var j=m(b,S,_[E],I);if(j===null){S===null&&(S=k);break}t&&S&&j.alternate===null&&e(b,S),y=i(j,y,E),R===null?A=j:R.sibling=j,R=j,S=k}if(E===_.length)return n(b,S),Oe&&si(b,E),A;if(S===null){for(;E<_.length;E++)S=f(b,_[E],I),S!==null&&(y=i(S,y,E),R===null?A=S:R.sibling=S,R=S);return Oe&&si(b,E),A}for(S=r(b,S);E<_.length;E++)k=g(S,b,E,_[E],I),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?E:k.key),y=i(k,y,E),R===null?A=k:R.sibling=k,R=k);return t&&S.forEach(function(D){return e(b,D)}),Oe&&si(b,E),A}function x(b,y,_,I){var A=Ya(_);if(typeof A!="function")throw Error(q(150));if(_=A.call(_),_==null)throw Error(q(151));for(var R=A=null,S=y,E=y=0,k=null,j=_.next();S!==null&&!j.done;E++,j=_.next()){S.index>E?(k=S,S=null):k=S.sibling;var D=m(b,S,j.value,I);if(D===null){S===null&&(S=k);break}t&&S&&D.alternate===null&&e(b,S),y=i(D,y,E),R===null?A=D:R.sibling=D,R=D,S=k}if(j.done)return n(b,S),Oe&&si(b,E),A;if(S===null){for(;!j.done;E++,j=_.next())j=f(b,j.value,I),j!==null&&(y=i(j,y,E),R===null?A=j:R.sibling=j,R=j);return Oe&&si(b,E),A}for(S=r(b,S);!j.done;E++,j=_.next())j=g(S,b,E,j.value,I),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?E:j.key),y=i(j,y,E),R===null?A=j:R.sibling=j,R=j);return t&&S.forEach(function(V){return e(b,V)}),Oe&&si(b,E),A}function T(b,y,_,I){if(typeof _=="object"&&_!==null&&_.type===Io&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:e:{for(var A=_.key,R=y;R!==null;){if(R.key===A){if(A=_.type,A===Io){if(R.tag===7){n(b,R.sibling),y=s(R,_.props.children),y.return=b,b=y;break e}}else if(R.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===es&&T1(A)===R.type){n(b,R.sibling),y=s(R,_.props),y.ref=tl(b,R,_),y.return=b,b=y;break e}n(b,R);break}else e(b,R);R=R.sibling}_.type===Io?(y=bi(_.props.children,b.mode,I,_.key),y.return=b,b=y):(I=md(_.type,_.key,_.props,null,b.mode,I),I.ref=tl(b,y,_),I.return=b,b=I)}return o(b);case No:e:{for(R=_.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(b,y.sibling),y=s(y,_.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else e(b,y);y=y.sibling}y=jm(_,b.mode,I),y.return=b,b=y}return o(b);case es:return R=_._init,T(b,y,R(_._payload),I)}if(vl(_))return v(b,y,_,I);if(Ya(_))return x(b,y,_,I);Lu(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(b,y.sibling),y=s(y,_),y.return=b,b=y):(n(b,y),y=Cm(_,b.mode,I),y.return=b,b=y),o(b)):n(b,y)}return T}var na=BE(!0),$E=BE(!1),Hd=Us(null),qd=null,Do=null,C0=null;function j0(){C0=Do=qd=null}function P0(t){var e=Hd.current;Le(Hd),t._currentValue=e}function Mp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){qd=t,C0=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(C0!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(qd===null)throw Error(q(308));Do=t,qd.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var gi=null;function A0(t){gi===null?gi=[t]:gi.push(t)}function zE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,A0(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rr(t,r)}function Rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ts=!1;function R0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Rr(t,n)}return s=r.interleaved,s===null?(e.next=e,A0(r)):(e.next=s.next,s.next=e),r.interleaved=e,Rr(t,n)}function ld(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,x0(t,n)}}function E1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kd(t,e,n,r){var s=t.updateQueue;ts=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(m=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(g,f,m);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v=="function"?v.call(g,f,m):v,m==null)break e;f=Qe({},f,m);break e;case 2:ts=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=f}}function N1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Uc={},tr=Us(Uc),lc=Us(Uc),cc=Us(Uc);function yi(t){if(t===Uc)throw Error(q(174));return t}function D0(t,e){switch(Ae(cc,e),Ae(lc,t),Ae(tr,Uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yp(e,t)}Le(tr),Ae(tr,e)}function ra(){Le(tr),Le(lc),Le(cc)}function qE(t){yi(cc.current);var e=yi(tr.current),n=yp(e,t.type);e!==n&&(Ae(lc,t),Ae(tr,n))}function V0(t){lc.current===t&&(Le(tr),Le(lc))}var He=Us(0);function Wd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tm=[];function L0(){for(var t=0;t<Tm.length;t++)Tm[t]._workInProgressVersionPrimary=null;Tm.length=0}var cd=Ur.ReactCurrentDispatcher,Em=Ur.ReactCurrentBatchConfig,Si=0,Ge=null,ot=null,ht=null,Gd=!1,Dl=!1,uc=0,rA=0;function Ct(){throw Error(q(321))}function M0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function O0(t,e,n,r,s,i){if(Si=i,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cd.current=t===null||t.memoizedState===null?aA:lA,t=n(r,s),Dl){i=0;do{if(Dl=!1,uc=0,25<=i)throw Error(q(301));i+=1,ht=ot=null,e.updateQueue=null,cd.current=cA,t=n(r,s)}while(Dl)}if(cd.current=Qd,e=ot!==null&&ot.next!==null,Si=0,ht=ot=Ge=null,Gd=!1,e)throw Error(q(300));return t}function F0(){var t=uc!==0;return uc=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ge.memoizedState=ht=t:ht=ht.next=t,ht}function Pn(){if(ot===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=ht===null?Ge.memoizedState:ht.next;if(e!==null)ht=e,ot=t;else{if(t===null)throw Error(q(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?Ge.memoizedState=ht=t:ht=ht.next=t}return ht}function dc(t,e){return typeof e=="function"?e(t):e}function Nm(t){var e=Pn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Si&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Ge.lanes|=h,ki|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Wn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ge.lanes|=i,ki|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Im(t){var e=Pn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Wn(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function KE(){}function WE(t,e){var n=Ge,r=Pn(),s=e(),i=!Wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Zt=!0),r=r.queue,U0(YE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ht!==null&&ht.memoizedState.tag&1){if(n.flags|=2048,hc(9,QE.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(q(349));Si&30||GE(n,e,s)}return s}function GE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QE(t,e,n,r){e.value=n,e.getSnapshot=r,JE(e)&&XE(t)}function YE(t,e,n){return n(function(){JE(e)&&XE(t)})}function JE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function XE(t){var e=Rr(t,1);e!==null&&$n(e,t,1,-1)}function I1(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dc,lastRenderedState:t},e.queue=t,t=t.dispatch=oA.bind(null,Ge,t),[e.memoizedState,t]}function hc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZE(){return Pn().memoizedState}function ud(t,e,n,r){var s=Qn();Ge.flags|=t,s.memoizedState=hc(1|e,n,void 0,r===void 0?null:r)}function Yh(t,e,n,r){var s=Pn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&M0(r,o.deps)){s.memoizedState=hc(e,n,i,r);return}}Ge.flags|=t,s.memoizedState=hc(1|e,n,i,r)}function S1(t,e){return ud(8390656,8,t,e)}function U0(t,e){return Yh(2048,8,t,e)}function eN(t,e){return Yh(4,2,t,e)}function tN(t,e){return Yh(4,4,t,e)}function nN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rN(t,e,n){return n=n!=null?n.concat([t]):null,Yh(4,4,nN.bind(null,e,t),n)}function B0(){}function sN(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iN(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&M0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oN(t,e,n){return Si&21?(Wn(n,e)||(n=dE(),Ge.lanes|=n,ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function sA(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Em.transition;Em.transition={};try{t(!1),e()}finally{Se=n,Em.transition=r}}function aN(){return Pn().memoizedState}function iA(t,e,n){var r=_s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lN(t))cN(e,n);else if(n=zE(t,e,n,r),n!==null){var s=Kt();$n(n,t,r,s),uN(n,e,r)}}function oA(t,e,n){var r=_s(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lN(t))cN(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Wn(a,o)){var c=e.interleaved;c===null?(s.next=s,A0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=zE(t,e,s,r),n!==null&&(s=Kt(),$n(n,t,r,s),uN(n,e,r))}}function lN(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function cN(t,e){Dl=Gd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,x0(t,n)}}var Qd={readContext:jn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},aA={readContext:jn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:S1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ud(4194308,4,nN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return ud(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=iA.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:I1,useDebugValue:B0,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=I1(!1),e=t[0];return t=sA.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=Qn();if(Oe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),ft===null)throw Error(q(349));Si&30||GE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,S1(YE.bind(null,r,i,t),[t]),r.flags|=2048,hc(9,QE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qn(),e=ft.identifierPrefix;if(Oe){var n=xr,r=yr;n=(r&~(1<<32-Bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=uc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lA={readContext:jn,useCallback:sN,useContext:jn,useEffect:U0,useImperativeHandle:rN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:iN,useReducer:Nm,useRef:ZE,useState:function(){return Nm(dc)},useDebugValue:B0,useDeferredValue:function(t){var e=Pn();return oN(e,ot.memoizedState,t)},useTransition:function(){var t=Nm(dc)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:KE,useSyncExternalStore:WE,useId:aN,unstable_isNewReconciler:!1},cA={readContext:jn,useCallback:sN,useContext:jn,useEffect:U0,useImperativeHandle:rN,useInsertionEffect:eN,useLayoutEffect:tN,useMemo:iN,useReducer:Im,useRef:ZE,useState:function(){return Im(dc)},useDebugValue:B0,useDeferredValue:function(t){var e=Pn();return ot===null?e.memoizedState=t:oN(e,ot.memoizedState,t)},useTransition:function(){var t=Im(dc)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:KE,useSyncExternalStore:WE,useId:aN,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Op(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jh={isMounted:function(t){return(t=t._reactInternals)?qi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=_s(t),i=Er(r,s);i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&($n(e,t,s,r),ld(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=_s(t),i=Er(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&($n(e,t,s,r),ld(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=_s(t),s=Er(n,r);s.tag=2,e!=null&&(s.callback=e),e=vs(t,s,r),e!==null&&($n(e,t,r,n),ld(e,t,r))}};function k1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!sc(n,r)||!sc(s,i):!0}function dN(t,e,n){var r=!1,s=js,i=e.contextType;return typeof i=="object"&&i!==null?i=jn(i):(s=nn(e)?Ni:Dt.current,r=e.contextTypes,i=(r=r!=null)?ea(t,s):js),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function C1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jh.enqueueReplaceState(e,e.state,null)}function Fp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},R0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jn(i):(i=nn(e)?Ni:Dt.current,s.context=ea(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Op(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jh.enqueueReplaceState(s,s.state,null),Kd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",r=e;do n+=Mj(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Up(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uA=typeof WeakMap=="function"?WeakMap:Map;function hN(t,e,n){n=Er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jd||(Jd=!0,Yp=r),Up(t,e)},n}function fN(t,e,n){n=Er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Up(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Up(t,e),typeof r!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function j1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=EA.bind(null,t,e,n),e.then(t,t))}function P1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function A1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Er(-1,1),e.tag=2,vs(n,e,1))),n.lanes|=1),t)}var dA=Ur.ReactCurrentOwner,Zt=!1;function $t(t,e,n,r){e.child=t===null?$E(e,null,n,r):na(e,t.child,n,r)}function R1(t,e,n,r,s){n=n.render;var i=e.ref;return Ko(e,s),r=O0(t,e,n,r,i,s),n=F0(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(Oe&&n&&I0(e),e.flags|=1,$t(t,e,r,s),e.child)}function D1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Q0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,mN(t,e,i,r,s)):(t=md(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:sc,n(o,r)&&t.ref===e.ref)return Dr(t,e,s)}return e.flags|=1,t=bs(i,r),t.ref=e.ref,t.return=e,e.child=t}function mN(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(sc(i,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,Dr(t,e,s)}return Bp(t,e,n,r,s)}function pN(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Lo,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Lo,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Lo,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Lo,un),un|=r;return $t(t,e,s,n),e.child}function gN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bp(t,e,n,r,s){var i=nn(n)?Ni:Dt.current;return i=ea(e,i),Ko(e,s),n=O0(t,e,n,r,i,s),r=F0(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(Oe&&r&&I0(e),e.flags|=1,$t(t,e,n,s),e.child)}function V1(t,e,n,r,s){if(nn(n)){var i=!0;Bd(e)}else i=!1;if(Ko(e,s),e.stateNode===null)dd(t,e),dN(e,n,r),Fp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jn(u):(u=nn(n)?Ni:Dt.current,u=ea(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&C1(e,o,r,u),ts=!1;var m=e.memoizedState;o.state=m,Kd(e,r,o,s),c=e.memoizedState,a!==r||m!==c||tn.current||ts?(typeof h=="function"&&(Op(e,n,h,r),c=e.memoizedState),(a=ts||k1(e,n,a,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,HE(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ln(e.type,a),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=jn(c):(c=nn(n)?Ni:Dt.current,c=ea(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==c)&&C1(e,o,r,c),ts=!1,m=e.memoizedState,o.state=m,Kd(e,r,o,s);var v=e.memoizedState;a!==f||m!==v||tn.current||ts?(typeof g=="function"&&(Op(e,n,g,r),v=e.memoizedState),(u=ts||k1(e,n,u,r,m,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $p(t,e,n,r,i,s)}function $p(t,e,n,r,s,i){gN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&w1(e,n,!1),Dr(t,e,i);r=e.stateNode,dA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=na(e,t.child,null,i),e.child=na(e,null,a,i)):$t(t,e,a,i),e.memoizedState=r.state,s&&w1(e,n,!0),e.child}function yN(t){var e=t.stateNode;e.pendingContext?v1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&v1(t,e.context,!1),D0(t,e.containerInfo)}function L1(t,e,n,r,s){return ta(),k0(s),e.flags|=256,$t(t,e,n,r),e.child}var zp={dehydrated:null,treeContext:null,retryLane:0};function Hp(t){return{baseLanes:t,cachePool:null,transitions:null}}function xN(t,e,n){var r=e.pendingProps,s=He.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(He,s&1),t===null)return Lp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ef(o,r,0,null),t=bi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Hp(n),e.memoizedState=zp,t):$0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return hA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=bs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=bs(a,i):(i=bi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Hp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zp,r}return i=t.child,t=i.sibling,r=bs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $0(t,e){return e=ef({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mu(t,e,n,r){return r!==null&&k0(r),na(e,t.child,null,n),t=$0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sm(Error(q(422))),Mu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ef({mode:"visible",children:r.children},s,0,null),i=bi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&na(e,t.child,null,o),e.child.memoizedState=Hp(o),e.memoizedState=zp,i);if(!(e.mode&1))return Mu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(q(419)),r=Sm(i,r,void 0),Mu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Zt||a){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rr(t,s),$n(r,t,s,-1))}return G0(),r=Sm(Error(q(421))),Mu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=NA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,dn=xs(s.nextSibling),fn=e,Oe=!0,On=null,t!==null&&(bn[Tn++]=yr,bn[Tn++]=xr,bn[Tn++]=Ii,yr=t.id,xr=t.overflow,Ii=e),e=$0(e,r.children),e.flags|=4096,e)}function M1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mp(t.return,e,n)}function km(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vN(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if($t(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&M1(t,n,e);else if(t.tag===19)M1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(He,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),km(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}km(e,!0,n,null,i);break;case"together":km(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=bs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fA(t,e,n){switch(e.tag){case 3:yN(e),ta();break;case 5:qE(e);break;case 1:nn(e.type)&&Bd(e);break;case 4:D0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(Hd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?xN(t,e,n):(Ae(He,He.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);Ae(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vN(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,pN(t,e,n)}return Dr(t,e,n)}var wN,qp,_N,bN;wN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};qp=function(){};_N=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,yi(tr.current);var i=null;switch(n){case"input":s=fp(t,s),r=fp(t,r),i=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),i=[];break;case"textarea":s=gp(t,s),r=gp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Fd)}xp(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};bN=function(t,e,n,r){n!==r&&(e.flags|=4)};function nl(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mA(t,e,n){var r=e.pendingProps;switch(S0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return nn(e.type)&&Ud(),jt(e),null;case 3:return r=e.stateNode,ra(),Le(tn),Le(Dt),L0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Zp(On),On=null))),qp(t,e),jt(e),null;case 5:V0(e);var s=yi(cc.current);if(n=e.type,t!==null&&e.stateNode!=null)_N(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return jt(e),null}if(t=yi(tr.current),Vu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yn]=e,r[ac]=i,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<_l.length;s++)Ve(_l[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":Kv(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":Gv(r,i),Ve("invalid",r)}xp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),s=["children",""+a]):Jl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Iu(r),Wv(r,i,!0);break;case"textarea":Iu(r),Qv(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Fd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yn]=e,t[ac]=r,wN(t,e,!1,!1),e.stateNode=t;e:{switch(o=vp(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),s=r;break;case"iframe":case"object":case"embed":Ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<_l.length;s++)Ve(_l[s],t);s=r;break;case"source":Ve("error",t),s=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=r;break;case"details":Ve("toggle",t),s=r;break;case"input":Kv(t,r),s=fp(t,r),Ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":Gv(t,r),s=gp(t,r),Ve("invalid",t);break;default:s=r}xp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?ZT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&JT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xl(t,c):typeof c=="number"&&Xl(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jl.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",t):c!=null&&h0(t,i,c,o))}switch(n){case"input":Iu(t),Wv(t,r,!1);break;case"textarea":Iu(t),Qv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$o(t,!!r.multiple,i,!1):r.defaultValue!=null&&$o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)bN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=yi(cc.current),yi(tr.current),Vu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yn]=e,(i=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:Du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Du(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yn]=e,e.stateNode=r}return jt(e),null;case 13:if(Le(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&dn!==null&&e.mode&1&&!(e.flags&128))UE(),ta(),e.flags|=98560,i=!1;else if(i=Vu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Yn]=e}else ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),i=!1}else On!==null&&(Zp(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?at===0&&(at=3):G0())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return ra(),qp(t,e),t===null&&ic(e.stateNode.containerInfo),jt(e),null;case 10:return P0(e.type._context),jt(e),null;case 17:return nn(e.type)&&Ud(),jt(e),null;case 19:if(Le(He),i=e.memoizedState,i===null)return jt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)nl(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wd(t),o!==null){for(e.flags|=128,nl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&Xe()>ia&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),nl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return jt(e),null}else 2*Xe()-i.renderingStartTime>ia&&n!==1073741824&&(e.flags|=128,r=!0,nl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Xe(),e.sibling=null,n=He.current,Ae(He,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return W0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function pA(t,e){switch(S0(e),e.tag){case 1:return nn(e.type)&&Ud(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ra(),Le(tn),Le(Dt),L0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return V0(e),null;case 13:if(Le(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(He),null;case 4:return ra(),null;case 10:return P0(e.type._context),null;case 22:case 23:return W0(),null;case 24:return null;default:return null}}var Ou=!1,Rt=!1,gA=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Vo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Kp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var O1=!1;function yA(t,e){if(Cp=Ld,t=SE(),N0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(jp={focusedElem:t,selectionRange:n},Ld=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,T=v.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ln(e.type,x),T);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(I){Je(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return v=O1,O1=!1,v}function Vl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kp(e,n,i)}s=s.next}while(s!==r)}}function Xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TN(t){var e=t.alternate;e!==null&&(t.alternate=null,TN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yn],delete e[ac],delete e[Rp],delete e[ZP],delete e[eA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EN(t){return t.tag===5||t.tag===3||t.tag===4}function F1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fd));else if(r!==4&&(t=t.child,t!==null))for(Gp(t,e,n),t=t.sibling;t!==null;)Gp(t,e,n),t=t.sibling}function Qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qp(t,e,n),t=t.sibling;t!==null;)Qp(t,e,n),t=t.sibling}var gt=null,Mn=!1;function Qr(t,e,n){for(n=n.child;n!==null;)NN(t,e,n),n=n.sibling}function NN(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(Hh,n)}catch{}switch(n.tag){case 5:Rt||Vo(n,e);case 6:var r=gt,s=Mn;gt=null,Qr(t,e,n),gt=r,Mn=s,gt!==null&&(Mn?(t=gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):gt.removeChild(n.stateNode));break;case 18:gt!==null&&(Mn?(t=gt,n=n.stateNode,t.nodeType===8?_m(t.parentNode,n):t.nodeType===1&&_m(t,n),nc(t)):_m(gt,n.stateNode));break;case 4:r=gt,s=Mn,gt=n.stateNode.containerInfo,Mn=!0,Qr(t,e,n),gt=r,Mn=s;break;case 0:case 11:case 14:case 15:if(!Rt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kp(n,e,o),s=s.next}while(s!==r)}Qr(t,e,n);break;case 1:if(!Rt&&(Vo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}Qr(t,e,n);break;case 21:Qr(t,e,n);break;case 22:n.mode&1?(Rt=(r=Rt)||n.memoizedState!==null,Qr(t,e,n),Rt=r):Qr(t,e,n);break;default:Qr(t,e,n)}}function U1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gA),e.forEach(function(r){var s=IA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:gt=a.stateNode,Mn=!1;break e;case 3:gt=a.stateNode.containerInfo,Mn=!0;break e;case 4:gt=a.stateNode.containerInfo,Mn=!0;break e}a=a.return}if(gt===null)throw Error(q(160));NN(i,o,s),gt=null,Mn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Je(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)IN(e,t),e=e.sibling}function IN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),Gn(t),r&4){try{Vl(3,t,t.return),Xh(3,t)}catch(x){Je(t,t.return,x)}try{Vl(5,t,t.return)}catch(x){Je(t,t.return,x)}}break;case 1:Vn(e,t),Gn(t),r&512&&n!==null&&Vo(n,n.return);break;case 5:if(Vn(e,t),Gn(t),r&512&&n!==null&&Vo(n,n.return),t.flags&32){var s=t.stateNode;try{Xl(s,"")}catch(x){Je(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&GT(s,i),vp(a,o);var u=vp(a,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?ZT(s,f):h==="dangerouslySetInnerHTML"?JT(s,f):h==="children"?Xl(s,f):h0(s,h,f,u)}switch(a){case"input":mp(s,i);break;case"textarea":QT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?$o(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?$o(s,!!i.multiple,i.defaultValue,!0):$o(s,!!i.multiple,i.multiple?[]:"",!1))}s[ac]=i}catch(x){Je(t,t.return,x)}}break;case 6:if(Vn(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Je(t,t.return,x)}}break;case 3:if(Vn(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{nc(e.containerInfo)}catch(x){Je(t,t.return,x)}break;case 4:Vn(e,t),Gn(t);break;case 13:Vn(e,t),Gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(q0=Xe())),r&4&&U1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Rt=(u=Rt)||h,Vn(e,t),Rt=u):Vn(e,t),Gn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Z=t,h=t.child;h!==null;){for(f=Z=h;Z!==null;){switch(m=Z,g=m.child,m.tag){case 0:case 11:case 14:case 15:Vl(4,m,m.return);break;case 1:Vo(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Je(r,n,x)}}break;case 5:Vo(m,m.return);break;case 22:if(m.memoizedState!==null){$1(f);continue}}g!==null?(g.return=m,Z=g):$1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=XT("display",o))}catch(x){Je(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Je(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vn(e,t),Gn(t),r&4&&U1(t);break;case 21:break;default:Vn(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EN(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xl(s,""),r.flags&=-33);var i=F1(t);Qp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=F1(t);Gp(t,a,o);break;default:throw Error(q(161))}}catch(c){Je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xA(t,e,n){Z=t,SN(t)}function SN(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ou;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Rt;a=Ou;var u=Rt;if(Ou=o,(Rt=c)&&!u)for(Z=s;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?z1(s):c!==null?(c.return=o,Z=c):z1(s);for(;i!==null;)Z=i,SN(i),i=i.sibling;Z=s,Ou=a,Rt=u}B1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):B1(t)}}function B1(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Xh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&N1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&nc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Rt||e.flags&512&&Wp(e)}catch(m){Je(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function $1(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function z1(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xh(4,e)}catch(c){Je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Je(e,s,c)}}var i=e.return;try{Wp(e)}catch(c){Je(e,i,c)}break;case 5:var o=e.return;try{Wp(e)}catch(c){Je(e,o,c)}}}catch(c){Je(e,e.return,c)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var vA=Math.ceil,Yd=Ur.ReactCurrentDispatcher,z0=Ur.ReactCurrentOwner,Sn=Ur.ReactCurrentBatchConfig,we=0,ft=null,rt=null,wt=0,un=0,Lo=Us(0),at=0,fc=null,ki=0,Zh=0,H0=0,Ll=null,Xt=null,q0=0,ia=1/0,mr=null,Jd=!1,Yp=null,ws=null,Fu=!1,hs=null,Xd=0,Ml=0,Jp=null,hd=-1,fd=0;function Kt(){return we&6?Xe():hd!==-1?hd:hd=Xe()}function _s(t){return t.mode&1?we&2&&wt!==0?wt&-wt:nA.transition!==null?(fd===0&&(fd=dE()),fd):(t=Se,t!==0||(t=window.event,t=t===void 0?16:xE(t.type)),t):1}function $n(t,e,n,r){if(50<Ml)throw Ml=0,Jp=null,Error(q(185));Mc(t,n,r),(!(we&2)||t!==ft)&&(t===ft&&(!(we&2)&&(Zh|=n),at===4&&ss(t,wt)),rn(t,r),n===1&&we===0&&!(e.mode&1)&&(ia=Xe()+500,Qh&&Bs()))}function rn(t,e){var n=t.callbackNode;nP(t,e);var r=Vd(t,t===ft?wt:0);if(r===0)n!==null&&Xv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Xv(n),e===1)t.tag===0?tA(H1.bind(null,t)):ME(H1.bind(null,t)),JP(function(){!(we&6)&&Bs()}),n=null;else{switch(hE(r)){case 1:n=y0;break;case 4:n=cE;break;case 16:n=Dd;break;case 536870912:n=uE;break;default:n=Dd}n=VN(n,kN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kN(t,e){if(hd=-1,fd=0,we&6)throw Error(q(327));var n=t.callbackNode;if(Wo()&&t.callbackNode!==n)return null;var r=Vd(t,t===ft?wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zd(t,r);else{e=r;var s=we;we|=2;var i=jN();(ft!==t||wt!==e)&&(mr=null,ia=Xe()+500,_i(t,e));do try{bA();break}catch(a){CN(t,a)}while(!0);j0(),Yd.current=i,we=s,rt!==null?e=0:(ft=null,wt=0,e=at)}if(e!==0){if(e===2&&(s=Ep(t),s!==0&&(r=s,e=Xp(t,s))),e===1)throw n=fc,_i(t,0),ss(t,r),rn(t,Xe()),n;if(e===6)ss(t,r);else{if(s=t.current.alternate,!(r&30)&&!wA(s)&&(e=Zd(t,r),e===2&&(i=Ep(t),i!==0&&(r=i,e=Xp(t,i))),e===1))throw n=fc,_i(t,0),ss(t,r),rn(t,Xe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ii(t,Xt,mr);break;case 3:if(ss(t,r),(r&130023424)===r&&(e=q0+500-Xe(),10<e)){if(Vd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ap(ii.bind(null,t,Xt,mr),e);break}ii(t,Xt,mr);break;case 4:if(ss(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vA(r/1960))-r,10<r){t.timeoutHandle=Ap(ii.bind(null,t,Xt,mr),r);break}ii(t,Xt,mr);break;case 5:ii(t,Xt,mr);break;default:throw Error(q(329))}}}return rn(t,Xe()),t.callbackNode===n?kN.bind(null,t):null}function Xp(t,e){var n=Ll;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=Zd(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Zp(e)),t}function Zp(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function wA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ss(t,e){for(e&=~H0,e&=~Zh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bn(e),r=1<<n;t[n]=-1,e&=~r}}function H1(t){if(we&6)throw Error(q(327));Wo();var e=Vd(t,0);if(!(e&1))return rn(t,Xe()),null;var n=Zd(t,e);if(t.tag!==0&&n===2){var r=Ep(t);r!==0&&(e=r,n=Xp(t,r))}if(n===1)throw n=fc,_i(t,0),ss(t,e),rn(t,Xe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,Xt,mr),rn(t,Xe()),null}function K0(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(ia=Xe()+500,Qh&&Bs())}}function Ci(t){hs!==null&&hs.tag===0&&!(we&6)&&Wo();var e=we;we|=1;var n=Sn.transition,r=Se;try{if(Sn.transition=null,Se=1,t)return t()}finally{Se=r,Sn.transition=n,we=e,!(we&6)&&Bs()}}function W0(){un=Lo.current,Le(Lo)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YP(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(S0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ud();break;case 3:ra(),Le(tn),Le(Dt),L0();break;case 5:V0(r);break;case 4:ra();break;case 13:Le(He);break;case 19:Le(He);break;case 10:P0(r.type._context);break;case 22:case 23:W0()}n=n.return}if(ft=t,rt=t=bs(t.current,null),wt=un=e,at=0,fc=null,H0=Zh=ki=0,Xt=Ll=null,gi!==null){for(e=0;e<gi.length;e++)if(n=gi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}gi=null}return t}function CN(t,e){do{var n=rt;try{if(j0(),cd.current=Qd,Gd){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gd=!1}if(Si=0,ht=ot=Ge=null,Dl=!1,uc=0,z0.current=null,n===null||n.return===null){at=1,fc=e,rt=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=wt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=P1(o);if(g!==null){g.flags&=-257,A1(g,o,a,i,e),g.mode&1&&j1(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){j1(i,u,e),G0();break e}c=Error(q(426))}}else if(Oe&&a.mode&1){var T=P1(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),A1(T,o,a,i,e),k0(sa(c,a));break e}}i=c=sa(c,a),at!==4&&(at=2),Ll===null?Ll=[i]:Ll.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=hN(i,c,e);E1(i,b);break e;case 1:a=c;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ws===null||!ws.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=fN(i,a,e);E1(i,I);break e}}i=i.return}while(i!==null)}AN(n)}catch(A){e=A,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function jN(){var t=Yd.current;return Yd.current=Qd,t===null?Qd:t}function G0(){(at===0||at===3||at===2)&&(at=4),ft===null||!(ki&268435455)&&!(Zh&268435455)||ss(ft,wt)}function Zd(t,e){var n=we;we|=2;var r=jN();(ft!==t||wt!==e)&&(mr=null,_i(t,e));do try{_A();break}catch(s){CN(t,s)}while(!0);if(j0(),we=n,Yd.current=r,rt!==null)throw Error(q(261));return ft=null,wt=0,at}function _A(){for(;rt!==null;)PN(rt)}function bA(){for(;rt!==null&&!Wj();)PN(rt)}function PN(t){var e=DN(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?AN(t):rt=e,z0.current=null}function AN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pA(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,rt=null;return}}else if(n=mA(n,e,un),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);at===0&&(at=5)}function ii(t,e,n){var r=Se,s=Sn.transition;try{Sn.transition=null,Se=1,TA(t,e,n,r)}finally{Sn.transition=s,Se=r}return null}function TA(t,e,n,r){do Wo();while(hs!==null);if(we&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(rP(t,i),t===ft&&(rt=ft=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fu||(Fu=!0,VN(Dd,function(){return Wo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Sn.transition,Sn.transition=null;var o=Se;Se=1;var a=we;we|=4,z0.current=null,yA(t,n),IN(n,t),zP(jp),Ld=!!Cp,jp=Cp=null,t.current=n,xA(n),Gj(),we=a,Se=o,Sn.transition=i}else t.current=n;if(Fu&&(Fu=!1,hs=t,Xd=s),i=t.pendingLanes,i===0&&(ws=null),Jj(n.stateNode),rn(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jd)throw Jd=!1,t=Yp,Yp=null,t;return Xd&1&&t.tag!==0&&Wo(),i=t.pendingLanes,i&1?t===Jp?Ml++:(Ml=0,Jp=t):Ml=0,Bs(),null}function Wo(){if(hs!==null){var t=hE(Xd),e=Sn.transition,n=Se;try{if(Sn.transition=null,Se=16>t?16:t,hs===null)var r=!1;else{if(t=hs,hs=null,Xd=0,we&6)throw Error(q(331));var s=we;for(we|=4,Z=t.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Z=u;Z!==null;){var h=Z;switch(h.tag){case 0:case 11:case 15:Vl(8,h,i)}var f=h.child;if(f!==null)f.return=h,Z=f;else for(;Z!==null;){h=Z;var m=h.sibling,g=h.return;if(TN(h),h===u){Z=null;break}if(m!==null){m.return=g,Z=m;break}Z=g}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var T=x.sibling;x.sibling=null,x=T}while(x!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vl(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Z=b;break e}Z=i.return}}var y=t.current;for(Z=y;Z!==null;){o=Z;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Z=_;else e:for(o=y;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xh(9,a)}}catch(A){Je(a,a.return,A)}if(a===o){Z=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,Z=I;break e}Z=a.return}}if(we=s,Bs(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(Hh,t)}catch{}r=!0}return r}finally{Se=n,Sn.transition=e}}return!1}function q1(t,e,n){e=sa(n,e),e=hN(t,e,1),t=vs(t,e,1),e=Kt(),t!==null&&(Mc(t,1,e),rn(t,e))}function Je(t,e,n){if(t.tag===3)q1(t,t,n);else for(;e!==null;){if(e.tag===3){q1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ws===null||!ws.has(r))){t=sa(n,t),t=fN(e,t,1),e=vs(e,t,1),t=Kt(),e!==null&&(Mc(e,1,t),rn(e,t));break}}e=e.return}}function EA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(wt&n)===n&&(at===4||at===3&&(wt&130023424)===wt&&500>Xe()-q0?_i(t,0):H0|=n),rn(t,e)}function RN(t,e){e===0&&(t.mode&1?(e=Cu,Cu<<=1,!(Cu&130023424)&&(Cu=4194304)):e=1);var n=Kt();t=Rr(t,e),t!==null&&(Mc(t,e,n),rn(t,n))}function NA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RN(t,n)}function IA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),RN(t,n)}var DN;DN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,fA(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,Oe&&e.flags&1048576&&OE(e,zd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dd(t,e),t=e.pendingProps;var s=ea(e,Dt.current);Ko(e,n),s=O0(null,e,r,t,s,n);var i=F0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(i=!0,Bd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,R0(e),s.updater=Jh,e.stateNode=s,s._reactInternals=e,Fp(e,r,t,n),e=$p(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&I0(e),$t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kA(r),t=Ln(r,t),s){case 0:e=Bp(null,e,r,t,n);break e;case 1:e=V1(null,e,r,t,n);break e;case 11:e=R1(null,e,r,t,n);break e;case 14:e=D1(null,e,r,Ln(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),Bp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),V1(t,e,r,s,n);case 3:e:{if(yN(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,HE(t,e),Kd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=sa(Error(q(423)),e),e=L1(t,e,r,n,s);break e}else if(r!==s){s=sa(Error(q(424)),e),e=L1(t,e,r,n,s);break e}else for(dn=xs(e.stateNode.containerInfo.firstChild),fn=e,Oe=!0,On=null,n=$E(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ta(),r===s){e=Dr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return qE(e),t===null&&Lp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Pp(r,s)?o=null:i!==null&&Pp(r,i)&&(e.flags|=32),gN(t,e),$t(t,e,o,n),e.child;case 6:return t===null&&Lp(e),null;case 13:return xN(t,e,n);case 4:return D0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=na(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),R1(t,e,r,s,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(Hd,r._currentValue),r._currentValue=o,i!==null)if(Wn(i.value,o)){if(i.children===s.children&&!tn.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Er(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Mp(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Mp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}$t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ko(e,n),s=jn(s),r=r(s),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,s=Ln(r,e.pendingProps),s=Ln(r.type,s),D1(t,e,r,s,n);case 15:return mN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),dd(t,e),e.tag=1,nn(r)?(t=!0,Bd(e)):t=!1,Ko(e,n),dN(e,r,s),Fp(e,r,s,n),$p(null,e,r,!0,t,n);case 19:return vN(t,e,n);case 22:return pN(t,e,n)}throw Error(q(156,e.tag))};function VN(t,e){return lE(t,e)}function SA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new SA(t,e,n,r)}function Q0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kA(t){if(typeof t=="function")return Q0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===m0)return 11;if(t===p0)return 14}return 2}function bs(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function md(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Q0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Io:return bi(n.children,s,i,e);case f0:o=8,s|=8;break;case cp:return t=Nn(12,n,e,s|2),t.elementType=cp,t.lanes=i,t;case up:return t=Nn(13,n,e,s),t.elementType=up,t.lanes=i,t;case dp:return t=Nn(19,n,e,s),t.elementType=dp,t.lanes=i,t;case qT:return ef(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zT:o=10;break e;case HT:o=9;break e;case m0:o=11;break e;case p0:o=14;break e;case es:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bi(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function ef(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=qT,t.lanes=n,t.stateNode={isHidden:!1},t}function Cm(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function jm(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function CA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=um(0),this.expirationTimes=um(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=um(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Y0(t,e,n,r,s,i,o,a,c){return t=new CA(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R0(i),t}function jA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function LN(t){if(!t)return js;t=t._reactInternals;e:{if(qi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(nn(n))return LE(t,n,e)}return e}function MN(t,e,n,r,s,i,o,a,c){return t=Y0(n,r,!0,t,s,i,o,a,c),t.context=LN(null),n=t.current,r=Kt(),s=_s(n),i=Er(r,s),i.callback=e??null,vs(n,i,s),t.current.lanes=s,Mc(t,s,r),rn(t,r),t}function tf(t,e,n,r){var s=e.current,i=Kt(),o=_s(s);return n=LN(n),e.context===null?e.context=n:e.pendingContext=n,e=Er(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vs(s,e,o),t!==null&&($n(t,s,o,i),ld(t,s,o)),o}function eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function J0(t,e){K1(t,e),(t=t.alternate)&&K1(t,e)}function PA(){return null}var ON=typeof reportError=="function"?reportError:function(t){console.error(t)};function X0(t){this._internalRoot=t}nf.prototype.render=X0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));tf(t,e,null,null)};nf.prototype.unmount=X0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ci(function(){tf(null,t,null,null)}),e[Ar]=null}};function nf(t){this._internalRoot=t}nf.prototype.unstable_scheduleHydration=function(t){if(t){var e=pE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rs.length&&e!==0&&e<rs[n].priority;n++);rs.splice(n,0,t),n===0&&yE(t)}};function Z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function W1(){}function AA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=eh(o);i.call(u)}}var o=MN(e,r,t,0,null,!1,!1,"",W1);return t._reactRootContainer=o,t[Ar]=o.current,ic(t.nodeType===8?t.parentNode:t),Ci(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=eh(c);a.call(u)}}var c=Y0(t,0,!1,null,null,!1,!1,"",W1);return t._reactRootContainer=c,t[Ar]=c.current,ic(t.nodeType===8?t.parentNode:t),Ci(function(){tf(e,c,n,r)}),c}function sf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=eh(o);a.call(c)}}tf(e,o,t,s)}else o=AA(n,e,t,s,r);return eh(o)}fE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wl(e.pendingLanes);n!==0&&(x0(e,n|1),rn(e,Xe()),!(we&6)&&(ia=Xe()+500,Bs()))}break;case 13:Ci(function(){var r=Rr(t,1);if(r!==null){var s=Kt();$n(r,t,1,s)}}),J0(t,1)}};v0=function(t){if(t.tag===13){var e=Rr(t,134217728);if(e!==null){var n=Kt();$n(e,t,134217728,n)}J0(t,134217728)}};mE=function(t){if(t.tag===13){var e=_s(t),n=Rr(t,e);if(n!==null){var r=Kt();$n(n,t,e,r)}J0(t,e)}};pE=function(){return Se};gE=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};_p=function(t,e,n){switch(e){case"input":if(mp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gh(r);if(!s)throw Error(q(90));WT(r),mp(r,s)}}}break;case"textarea":QT(t,n);break;case"select":e=n.value,e!=null&&$o(t,!!n.multiple,e,!1)}};nE=K0;rE=Ci;var RA={usingClientEntryPoint:!1,Events:[Fc,jo,Gh,eE,tE,K0]},rl={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DA={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oE(t),t===null?null:t.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||PA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{Hh=Uu.inject(DA),er=Uu}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RA;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Z0(e))throw Error(q(200));return jA(t,e,null,n)};yn.createRoot=function(t,e){if(!Z0(t))throw Error(q(299));var n=!1,r="",s=ON;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Y0(t,1,!1,null,null,n,!1,r,s),t[Ar]=e.current,ic(t.nodeType===8?t.parentNode:t),new X0(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=oE(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Ci(t)};yn.hydrate=function(t,e,n){if(!rf(e))throw Error(q(200));return sf(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!Z0(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=ON;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MN(e,null,t,1,n??null,s,!1,i,o),t[Ar]=e.current,ic(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nf(e)};yn.render=function(t,e,n){if(!rf(e))throw Error(q(200));return sf(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!rf(t))throw Error(q(40));return t._reactRootContainer?(Ci(function(){sf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ar]=null})}),!0):!1};yn.unstable_batchedUpdates=K0;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rf(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return sf(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function FN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FN)}catch(t){console.error(t)}}FN(),FT.exports=yn;var VA=FT.exports,UN,G1=VA;UN=G1.createRoot,G1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mc.apply(this,arguments)}var fs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fs||(fs={}));const Q1="popstate";function LA(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return eg("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:th(s)}return OA(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function BN(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function MA(){return Math.random().toString(36).substr(2,8)}function Y1(t,e){return{usr:t.state,key:t.key,idx:e}}function eg(t,e,n,r){return n===void 0&&(n=null),mc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ta(e):e,{state:n,key:e&&e.key||r||MA()})}function th(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=fs.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(mc({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=fs.Pop;let T=h(),b=T==null?null:T-u;u=T,c&&c({action:a,location:x.location,delta:b})}function m(T,b){a=fs.Push;let y=eg(x.location,T,b);u=h()+1;let _=Y1(y,u),I=x.createHref(y);try{o.pushState(_,"",I)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(I)}i&&c&&c({action:a,location:x.location,delta:1})}function g(T,b){a=fs.Replace;let y=eg(x.location,T,b);u=h();let _=Y1(y,u),I=x.createHref(y);o.replaceState(_,"",I),i&&c&&c({action:a,location:x.location,delta:0})}function v(T){let b=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof T=="string"?T:th(T);return y=y.replace(/ $/,"%20"),et(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let x={get action(){return a},get location(){return t(s,o)},listen(T){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Q1,f),c=T,()=>{s.removeEventListener(Q1,f),c=null}},createHref(T){return e(s,T)},createURL:v,encodeLocation(T){let b=v(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:g,go(T){return o.go(T)}};return x}var J1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(J1||(J1={}));function FA(t,e,n){return n===void 0&&(n="/"),UA(t,e,n,!1)}function UA(t,e,n,r){let s=typeof e=="string"?Ta(e):e,i=ey(s.pathname||"/",n);if(i==null)return null;let o=$N(t);BA(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=XA(i);a=YA(o[c],u,r)}return a}function $N(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(et(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ts([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),$N(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:GA(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of zN(i.path))s(i,o,c)}),e}function zN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zN(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function BA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:QA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $A=/^:[\w-]+$/,zA=3,HA=2,qA=1,KA=10,WA=-2,X1=t=>t==="*";function GA(t,e){let n=t.split("/"),r=n.length;return n.some(X1)&&(r+=WA),e&&(r+=HA),n.filter(s=>!X1(s)).reduce((s,i)=>s+($A.test(i)?zA:i===""?qA:KA),r)}function QA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function YA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Z1({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Z1({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Ts([i,f.pathname]),pathnameBase:nR(Ts([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ts([i,f.pathnameBase]))}return o}function Z1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=JA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let x=a[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const v=a[f];return g&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function JA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),BN(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function XA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return BN(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ey(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ZA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ta(t):t;return{pathname:n?n.startsWith("/")?n:eR(n,e):e,search:rR(r),hash:sR(s)}}function eR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ty(t,e){let n=tR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ny(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ta(t):(s=mc({},t),et(!s.pathname||!s.pathname.includes("?"),Pm("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Pm("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Pm("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let c=ZA(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ts=t=>t.join("/").replace(/\/\/+/g,"/"),nR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,sR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HN=["post","put","patch","delete"];new Set(HN);const oR=["get",...HN];new Set(oR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pc.apply(this,arguments)}const ry=N.createContext(null),aR=N.createContext(null),$s=N.createContext(null),of=N.createContext(null),zs=N.createContext({outlet:null,matches:[],isDataRoute:!1}),qN=N.createContext(null);function lR(t,e){let{relative:n}=e===void 0?{}:e;Ea()||et(!1);let{basename:r,navigator:s}=N.useContext($s),{hash:i,pathname:o,search:a}=WN(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Ts([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Ea(){return N.useContext(of)!=null}function Na(){return Ea()||et(!1),N.useContext(of).location}function KN(t){N.useContext($s).static||N.useLayoutEffect(t)}function Ki(){let{isDataRoute:t}=N.useContext(zs);return t?_R():cR()}function cR(){Ea()||et(!1);let t=N.useContext(ry),{basename:e,future:n,navigator:r}=N.useContext($s),{matches:s}=N.useContext(zs),{pathname:i}=Na(),o=JSON.stringify(ty(s,n.v7_relativeSplatPath)),a=N.useRef(!1);return KN(()=>{a.current=!0}),N.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=ny(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ts([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function WN(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext($s),{matches:s}=N.useContext(zs),{pathname:i}=Na(),o=JSON.stringify(ty(s,r.v7_relativeSplatPath));return N.useMemo(()=>ny(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function uR(t,e){return dR(t,e)}function dR(t,e,n,r){Ea()||et(!1);let{navigator:s}=N.useContext($s),{matches:i}=N.useContext(zs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Na(),h;if(e){var f;let T=typeof e=="string"?Ta(e):e;c==="/"||(f=T.pathname)!=null&&f.startsWith(c)||et(!1),h=T}else h=u;let m=h.pathname||"/",g=m;if(c!=="/"){let T=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let v=FA(t,{pathname:g}),x=gR(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:Ts([c,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Ts([c,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),i,n,r);return e&&x?N.createElement(of.Provider,{value:{location:pc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:fs.Pop}},x):x}function hR(){let t=wR(),e=iR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const fR=N.createElement(hR,null);class mR extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(zs.Provider,{value:this.props.routeContext},N.createElement(qN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pR(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(ry);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(zs.Provider,{value:e},r)}function gR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||et(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:g}=n,v=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let g,v=!1,x=null,T=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||fR,c&&(u<0&&m===0?(v=!0,T=null):u===m&&(v=!0,T=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),y=()=>{let _;return g?_=x:v?_=T:f.route.Component?_=N.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,N.createElement(pR,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?N.createElement(mR,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var GN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(GN||{}),nh=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nh||{});function yR(t){let e=N.useContext(ry);return e||et(!1),e}function xR(t){let e=N.useContext(aR);return e||et(!1),e}function vR(t){let e=N.useContext(zs);return e||et(!1),e}function QN(t){let e=vR(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function wR(){var t;let e=N.useContext(qN),n=xR(nh.UseRouteError),r=QN(nh.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _R(){let{router:t}=yR(GN.UseNavigateStable),e=QN(nh.UseNavigateStable),n=N.useRef(!1);return KN(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,pc({fromRouteId:e},i)))},[t,e])}function bR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function dr(t){let{to:e,replace:n,state:r,relative:s}=t;Ea()||et(!1);let{future:i,static:o}=N.useContext($s),{matches:a}=N.useContext(zs),{pathname:c}=Na(),u=Ki(),h=ny(e,ty(a,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return N.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function fr(t){et(!1)}function TR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=fs.Pop,navigator:i,static:o=!1,future:a}=t;Ea()&&et(!1);let c=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:o,future:pc({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Ta(r));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:v="default"}=r,x=N.useMemo(()=>{let T=ey(h,c);return T==null?null:{location:{pathname:T,search:f,hash:m,state:g,key:v},navigationType:s}},[c,h,f,m,g,v,s]);return x==null?null:N.createElement($s.Provider,{value:u},N.createElement(of.Provider,{children:n,value:x}))}function ER(t){let{children:e,location:n}=t;return uR(tg(e),n)}new Promise(()=>{});function tg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,tg(r.props.children,i));return}r.type!==fr&&et(!1),!r.props.index||!r.props.children||et(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tg(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ng(){return ng=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ng.apply(this,arguments)}function NR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function IR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SR(t,e){return t.button===0&&(!e||e==="_self")&&!IR(t)}const kR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CR="6";try{window.__reactRouterVersion=CR}catch{}const jR="startTransition",ew=Ej[jR];function PR(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=LA({window:s,v5Compat:!0}));let o=i.current,[a,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=N.useCallback(f=>{u&&ew?ew(()=>c(f)):c(f)},[c,u]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.useEffect(()=>bR(r),[r]),N.createElement(TR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const AR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YN=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=NR(e,kR),{basename:g}=N.useContext($s),v,x=!1;if(typeof u=="string"&&RR.test(u)&&(v=u,AR))try{let _=new URL(window.location.href),I=u.startsWith("//")?new URL(_.protocol+u):new URL(u),A=ey(I.pathname,g);I.origin===_.origin&&A!=null?u=A+I.search+I.hash:x=!0}catch{}let T=lR(u,{relative:s}),b=DR(u,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:f});function y(_){r&&r(_),_.defaultPrevented||b(_)}return N.createElement("a",ng({},m,{href:v||T,onClick:x||i?r:y,ref:n,target:c}))});var tw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tw||(tw={}));var nw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nw||(nw={}));function DR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,c=Ki(),u=Na(),h=WN(t,{relative:o});return N.useCallback(f=>{if(SR(f,n)){f.preventDefault();let m=r!==void 0?r:th(u)===th(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,c,h,r,s,n,t,i,o,a])}let VR={data:""},LR=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||VR,MR=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,OR=/\/\*[^]*?\*\/|  +/g,rw=/\n+/g,is=(t,e)=>{let n="",r="",s="";for(let i in t){let o=t[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":r+=i[1]=="f"?is(o,i):i+"{"+is(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=is(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=is.p?is.p(i,o):i+":"+o+";")}return n+(e&&s?e+"{"+s+"}":s)+r},hr={},JN=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+JN(t[n]);return e}return t},FR=(t,e,n,r,s)=>{let i=JN(t),o=hr[i]||(hr[i]=(c=>{let u=0,h=11;for(;u<c.length;)h=101*h+c.charCodeAt(u++)>>>0;return"go"+h})(i));if(!hr[o]){let c=i!==t?t:(u=>{let h,f,m=[{}];for(;h=MR.exec(u.replace(OR,""));)h[4]?m.shift():h[3]?(f=h[3].replace(rw," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][h[1]]=h[2].replace(rw," ").trim();return m[0]})(t);hr[o]=is(s?{["@keyframes "+o]:c}:c,n?"":"."+o)}let a=n&&hr.g?hr.g:null;return n&&(hr.g=hr[o]),((c,u,h,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=h?c+u.data:u.data+c)})(hr[o],e,r,a),o},UR=(t,e,n)=>t.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let a=o(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=c?"."+c:a&&typeof a=="object"?a.props?"":is(a,""):a===!1?"":a}return r+s+(o??"")},"");function af(t){let e=this||{},n=t.call?t(e.p):t;return FR(n.unshift?n.raw?UR(n,[].slice.call(arguments,1),e.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):n,LR(e.target),e.g,e.o,e.k)}let XN,rg,sg;af.bind({g:1});let Vr=af.bind({k:1});function BR(t,e,n,r){is.p=e,XN=t,rg=n,sg=r}function Hs(t,e){let n=this||{};return function(){let r=arguments;function s(i,o){let a=Object.assign({},i),c=a.className||s.className;n.p=Object.assign({theme:rg&&rg()},a),n.o=/ *go\d+/.test(c),a.className=af.apply(n,r)+(c?" "+c:"");let u=t;return t[0]&&(u=a.as||t,delete a.as),sg&&u[0]&&sg(a),XN(u,a)}return s}}var $R=t=>typeof t=="function",rh=(t,e)=>$R(t)?t(e):t,zR=(()=>{let t=0;return()=>(++t).toString()})(),ZN=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),HR=20,eI=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,HR)};case 1:return{...t,toasts:t.toasts.map(i=>i.id===e.toast.id?{...i,...e.toast}:i)};case 2:let{toast:n}=e;return eI(t,{type:t.toasts.find(i=>i.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(i=>i.id===r||r===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(i=>i.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let s=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},pd=[],xi={toasts:[],pausedAt:void 0},Wi=t=>{xi=eI(xi,t),pd.forEach(e=>{e(xi)})},qR={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},KR=(t={})=>{let[e,n]=N.useState(xi),r=N.useRef(xi);N.useEffect(()=>(r.current!==xi&&n(xi),pd.push(n),()=>{let i=pd.indexOf(n);i>-1&&pd.splice(i,1)}),[]);let s=e.toasts.map(i=>{var o,a,c;return{...t,...t[i.type],...i,removeDelay:i.removeDelay||((o=t[i.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:i.duration||((a=t[i.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||qR[i.type],style:{...t.style,...(c=t[i.type])==null?void 0:c.style,...i.style}}});return{...e,toasts:s}},WR=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||zR()}),Bc=t=>(e,n)=>{let r=WR(e,t,n);return Wi({type:2,toast:r}),r.id},zt=(t,e)=>Bc("blank")(t,e);zt.error=Bc("error");zt.success=Bc("success");zt.loading=Bc("loading");zt.custom=Bc("custom");zt.dismiss=t=>{Wi({type:3,toastId:t})};zt.remove=t=>Wi({type:4,toastId:t});zt.promise=(t,e,n)=>{let r=zt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(s=>{let i=e.success?rh(e.success,s):void 0;return i?zt.success(i,{id:r,...n,...n==null?void 0:n.success}):zt.dismiss(r),s}).catch(s=>{let i=e.error?rh(e.error,s):void 0;i?zt.error(i,{id:r,...n,...n==null?void 0:n.error}):zt.dismiss(r)}),t};var GR=(t,e)=>{Wi({type:1,toast:{id:t,height:e}})},QR=()=>{Wi({type:5,time:Date.now()})},Ol=new Map,YR=1e3,JR=(t,e=YR)=>{if(Ol.has(t))return;let n=setTimeout(()=>{Ol.delete(t),Wi({type:4,toastId:t})},e);Ol.set(t,n)},XR=t=>{let{toasts:e,pausedAt:n}=KR(t);N.useEffect(()=>{if(n)return;let i=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let c=(a.duration||0)+a.pauseDuration-(i-a.createdAt);if(c<0){a.visible&&zt.dismiss(a.id);return}return setTimeout(()=>zt.dismiss(a.id),c)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=N.useCallback(()=>{n&&Wi({type:6,time:Date.now()})},[n]),s=N.useCallback((i,o)=>{let{reverseOrder:a=!1,gutter:c=8,defaultPosition:u}=o||{},h=e.filter(g=>(g.position||u)===(i.position||u)&&g.height),f=h.findIndex(g=>g.id===i.id),m=h.filter((g,v)=>v<f&&g.visible).length;return h.filter(g=>g.visible).slice(...a?[m+1]:[0,m]).reduce((g,v)=>g+(v.height||0)+c,0)},[e]);return N.useEffect(()=>{e.forEach(i=>{if(i.dismissed)JR(i.id,i.removeDelay);else{let o=Ol.get(i.id);o&&(clearTimeout(o),Ol.delete(i.id))}})},[e]),{toasts:e,handlers:{updateHeight:GR,startPause:QR,endPause:r,calculateOffset:s}}},ZR=Vr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,eD=Vr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tD=Vr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,nD=Hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZR} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${eD} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${tD} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,rD=Vr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,sD=Hs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${rD} 1s linear infinite;
`,iD=Vr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oD=Vr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,aD=Hs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${iD} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oD} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,lD=Hs("div")`
  position: absolute;
`,cD=Hs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,uD=Vr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dD=Hs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${uD} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,hD=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(dD,null,e):e:n==="blank"?null:N.createElement(cD,null,N.createElement(sD,{...r}),n!=="loading"&&N.createElement(lD,null,n==="error"?N.createElement(nD,{...r}):N.createElement(aD,{...r})))},fD=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,mD=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,pD="0%{opacity:0;} 100%{opacity:1;}",gD="0%{opacity:1;} 100%{opacity:0;}",yD=Hs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,xD=Hs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,vD=(t,e)=>{let n=t.includes("top")?1:-1,[r,s]=ZN()?[pD,gD]:[fD(n),mD(n)];return{animation:e?`${Vr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Vr(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wD=N.memo(({toast:t,position:e,style:n,children:r})=>{let s=t.height?vD(t.position||e||"top-center",t.visible):{opacity:0},i=N.createElement(hD,{toast:t}),o=N.createElement(xD,{...t.ariaProps},rh(t.message,t));return N.createElement(yD,{className:t.className,style:{...s,...n,...t.style}},typeof r=="function"?r({icon:i,message:o}):N.createElement(N.Fragment,null,i,o))});BR(N.createElement);var _D=({id:t,className:e,style:n,onHeightUpdate:r,children:s})=>{let i=N.useCallback(o=>{if(o){let a=()=>{let c=o.getBoundingClientRect().height;r(t,c)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return N.createElement("div",{ref:i,className:e,style:n},s)},bD=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},s=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ZN()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...s}},TD=af`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Bu=16,ED=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:a,handlers:c}=XR(n);return N.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Bu,left:Bu,right:Bu,bottom:Bu,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},a.map(u=>{let h=u.position||e,f=c.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:e}),m=bD(h,f);return N.createElement(_D,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?TD:"",style:m},u.type==="custom"?rh(u.message,u):s?s(u):N.createElement(wD,{toast:u,position:h}))}))},Q=zt;function ND(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const sw={};function ig(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];typeof e[0]=="string"&&sw[e[0]]||(typeof e[0]=="string"&&(sw[e[0]]=new Date),ND(...e))}const tI=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}};function iw(t,e,n){t.loadNamespaces(e,tI(t,n))}function ow(t,e,n,r){typeof n=="string"&&(n=[n]),n.forEach(s=>{t.options.ns.indexOf(s)<0&&t.options.ns.push(s)}),t.loadLanguages(e,tI(t,r))}function ID(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],s=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const u=e.services.backendConnector.state[`${a}|${c}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))}function SD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(ig("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(s,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,t))return!1}}):ID(t,e,n)}const kD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,CD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},jD=t=>CD[t],PD=t=>t.replace(kD,jD);let og={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:PD};function AD(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};og={...og,...t}}function RD(){return og}let nI;function DD(t){nI=t}function VD(){return nI}const LD={type:"3rdParty",init(t){AD(t.options.react),DD(t)}},MD=N.createContext();class OD{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const FD=(t,e)=>{const n=N.useRef();return N.useEffect(()=>{n.current=t},[t,e]),n.current};function on(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:s}=N.useContext(MD)||{},i=n||r||VD();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new OD),!i){ig("You will need to pass in an i18next instance by using initReactI18next");const _=(A,R)=>typeof R=="string"?R:R&&typeof R=="object"&&typeof R.defaultValue=="string"?R.defaultValue:Array.isArray(A)?A[A.length-1]:A,I=[_,{},!1];return I.t=_,I.i18n={},I.ready=!1,I}i.options.react&&i.options.react.wait!==void 0&&ig("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...RD(),...i.options.react,...e},{useSuspense:a,keyPrefix:c}=o;let u=s||i.options&&i.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const h=(i.isInitialized||i.initializedStoreOnce)&&u.every(_=>SD(_,i,o));function f(){return i.getFixedT(e.lng||null,o.nsMode==="fallback"?u:u[0],c)}const[m,g]=N.useState(f);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const x=FD(v),T=N.useRef(!0);N.useEffect(()=>{const{bindI18n:_,bindI18nStore:I}=o;T.current=!0,!h&&!a&&(e.lng?ow(i,e.lng,u,()=>{T.current&&g(f)}):iw(i,u,()=>{T.current&&g(f)})),h&&x&&x!==v&&T.current&&g(f);function A(){T.current&&g(f)}return _&&i&&i.on(_,A),I&&i&&i.store.on(I,A),()=>{T.current=!1,_&&i&&_.split(" ").forEach(R=>i.off(R,A)),I&&i&&I.split(" ").forEach(R=>i.store.off(R,A))}},[i,v]);const b=N.useRef(!0);N.useEffect(()=>{T.current&&!b.current&&g(f),b.current=!1},[i,c]);const y=[m,i,h];if(y.t=m,y.i18n=i,y.ready=h,h||!h&&!a)return y;throw new Promise(_=>{e.lng?ow(i,e.lng,u,()=>_()):iw(i,u,()=>_())})}var aw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},UD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},sI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new BD;const m=i<<2|a>>4;if(r.push(m),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $D=function(t){const e=rI(t);return sI.encodeByteArray(e,!0)},sh=function(t){return $D(t).replace(/\./g,"")},iI=function(t){try{return sI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=()=>zD().__FIREBASE_DEFAULTS__,qD=()=>{if(typeof process>"u"||typeof aw>"u")return;const t=aw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KD=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iI(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return HD()||qD()||KD()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oI=t=>{var e,n;return(n=(e=lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aI=t=>{const e=oI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lI=()=>{var t;return(t=lf())===null||t===void 0?void 0:t.config},cI=t=>{var e;return(e=lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sh(JSON.stringify(n)),sh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function QD(){var t;const e=(t=lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JD(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZD(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dI(){return!QD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function eV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tV,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?nV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ar(s,a,r)}}function nV(t,e){return t.replace(rV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rV=/\{\$([^}]+)}/g;function sV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(lw(i)&&lw(o)){if(!oa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function lw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Tl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iV(t,e){const n=new oV(t,e);return n.subscribe.bind(n)}class oV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Am),s.error===void 0&&(s.error=Am),s.complete===void 0&&(s.complete=Am);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t){return t&&t._delegate?t._delegate:t}class Ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uV(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cV(t){return t===oi?void 0:t}function uV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const hV={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},fV=ge.INFO,mV={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},pV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let sy=class{constructor(e){this.name=e,this._logLevel=fV,this._logHandler=pV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}};const gV=(t,e)=>e.some(n=>t instanceof n);let cw,uw;function yV(){return cw||(cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xV(){return uw||(uw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fI=new WeakMap,ag=new WeakMap,mI=new WeakMap,Rm=new WeakMap,iy=new WeakMap;function vV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fI.set(n,t)}).catch(()=>{}),iy.set(e,t),e}function wV(t){if(ag.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ag.set(t,e)}let lg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ag.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _V(t){lg=t(lg)}function bV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dm(this),e,...n);return mI.set(r,e.sort?e.sort():[e]),Es(r)}:xV().includes(t)?function(...e){return t.apply(Dm(this),e),Es(fI.get(this))}:function(...e){return Es(t.apply(Dm(this),e))}}function TV(t){return typeof t=="function"?bV(t):(t instanceof IDBTransaction&&wV(t),gV(t,yV())?new Proxy(t,lg):t)}function Es(t){if(t instanceof IDBRequest)return vV(t);if(Rm.has(t))return Rm.get(t);const e=TV(t);return e!==t&&(Rm.set(t,e),iy.set(e,t)),e}const Dm=t=>iy.get(t);function EV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Es(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Es(o.result),c.oldVersion,c.newVersion,Es(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const NV=["get","getKey","getAll","getAllKeys","count"],IV=["put","add","delete","clear"],Vm=new Map;function dw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Vm.set(e,i),i}_V(t=>({...t,get:(e,n,r)=>dw(e,n)||t.get(e,n,r),has:(e,n)=>!!dw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cg="@firebase/app",hw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new sy("@firebase/app"),CV="@firebase/app-compat",jV="@firebase/analytics-compat",PV="@firebase/analytics",AV="@firebase/app-check-compat",RV="@firebase/app-check",DV="@firebase/auth",VV="@firebase/auth-compat",LV="@firebase/database",MV="@firebase/data-connect",OV="@firebase/database-compat",FV="@firebase/functions",UV="@firebase/functions-compat",BV="@firebase/installations",$V="@firebase/installations-compat",zV="@firebase/messaging",HV="@firebase/messaging-compat",qV="@firebase/performance",KV="@firebase/performance-compat",WV="@firebase/remote-config",GV="@firebase/remote-config-compat",QV="@firebase/storage",YV="@firebase/storage-compat",JV="@firebase/firestore",XV="@firebase/vertexai-preview",ZV="@firebase/firestore-compat",e4="firebase",t4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",n4={[cg]:"fire-core",[CV]:"fire-core-compat",[PV]:"fire-analytics",[jV]:"fire-analytics-compat",[RV]:"fire-app-check",[AV]:"fire-app-check-compat",[DV]:"fire-auth",[VV]:"fire-auth-compat",[LV]:"fire-rtdb",[MV]:"fire-data-connect",[OV]:"fire-rtdb-compat",[FV]:"fire-fn",[UV]:"fire-fn-compat",[BV]:"fire-iid",[$V]:"fire-iid-compat",[zV]:"fire-fcm",[HV]:"fire-fcm-compat",[qV]:"fire-perf",[KV]:"fire-perf-compat",[WV]:"fire-rc",[GV]:"fire-rc-compat",[QV]:"fire-gcs",[YV]:"fire-gcs-compat",[JV]:"fire-fst",[ZV]:"fire-fst-compat",[XV]:"fire-vertex","fire-js":"fire-js",[e4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,r4=new Map,dg=new Map;function fw(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ji(t){const e=t.name;if(dg.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;dg.set(e,t);for(const n of ih.values())fw(n,t);for(const n of r4.values())fw(n,t);return!0}function cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new $c("app","Firebase",s4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=t4;function pI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ug,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ns.create("bad-app-name",{appName:String(s)});if(n||(n=lI()),!n)throw Ns.create("no-options");const i=ih.get(s);if(i){if(oa(n,i.options)&&oa(r,i.config))return i;throw Ns.create("duplicate-app",{appName:s})}const o=new dV(s);for(const c of dg.values())o.addComponent(c);const a=new i4(n,r,o);return ih.set(s,a),a}function oy(t=ug){const e=ih.get(t);if(!e&&t===ug&&lI())return pI();if(!e)throw Ns.create("no-app",{appName:t});return e}function nr(t,e,n){var r;let s=(r=n4[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(a.join(" "));return}ji(new Ps(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="firebase-heartbeat-database",a4=1,gc="firebase-heartbeat-store";let Lm=null;function gI(){return Lm||(Lm=EV(o4,a4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(gc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),Lm}async function l4(t){try{const n=(await gI()).transaction(gc),r=await n.objectStore(gc).get(yI(t));return await n.done,r}catch(e){if(e instanceof ar)Lr.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function mw(t,e){try{const r=(await gI()).transaction(gc,"readwrite");await r.objectStore(gc).put(e,yI(t)),await r.done}catch(n){if(n instanceof ar)Lr.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function yI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=1024,u4=30*24*60*60*1e3;class d4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new f4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=u4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pw(),{heartbeatsToSend:r,unsentEntries:s}=h4(this._heartbeatsCache.heartbeats),i=sh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Lr.warn(n),""}}}function pw(){return new Date().toISOString().substring(0,10)}function h4(t,e=c4){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),gw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),gw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class f4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hI()?eV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await l4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return mw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function gw(t){return sh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){ji(new Ps("platform-logger",e=>new SV(e),"PRIVATE")),ji(new Ps("heartbeat",e=>new d4(e),"PRIVATE")),nr(cg,hw,t),nr(cg,hw,"esm2017"),nr("fire-js","")}m4("");function ay(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p4=xI,vI=new $c("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new sy("@firebase/auth");function g4(t,...e){oh.logLevel<=ge.WARN&&oh.warn(`Auth (${Gi}): ${t}`,...e)}function gd(t,...e){oh.logLevel<=ge.ERROR&&oh.error(`Auth (${Gi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw cy(t,...e)}function zn(t,...e){return cy(t,...e)}function ly(t,e,n){const r=Object.assign(Object.assign({},p4()),{[e]:n});return new $c("auth","Firebase",r).create(e,{appName:t.name})}function Nr(t){return ly(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y4(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),ly(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vI.create(t,...e)}function oe(t,e,...n){if(!t)throw cy(e,...n)}function vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gd(e),new Error(e)}function Mr(t,e){t||vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function x4(){return yw()==="http:"||yw()==="https:"}function yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x4()||JD()||"connection"in navigator)?navigator.onLine:!0}function w4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Mr(n>e,"Short delay should be less than long delay!"),this.isMobile=GD()||XD()}get(){return v4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(t,e){Mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Hc(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Br(t,e,n,r,s={}){return _I(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=zc(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return YD()||(u.referrerPolicy="no-referrer"),wI.fetch()(bI(t,t.config.apiHost,n,a),u)})}async function _I(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},_4),e);try{const s=new E4(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $u(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $u(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $u(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $u(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ly(t,h,u);An(t,h)}}catch(s){if(s instanceof ar)throw s;An(t,"network-request-failed",{message:String(s)})}}async function qc(t,e,n,r,s={}){const i=await Br(t,e,n,r,s);return"mfaPendingCredential"in i&&An(t,"multi-factor-auth-required",{_serverResponse:i}),i}function bI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?uy(t.config,s):`${t.config.apiScheme}://${s}`}function T4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zn(this.auth,"network-request-failed")),b4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $u(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=zn(t,e,r);return s.customData._tokenResponse=n,s}function xw(t){return t!==void 0&&t.enterprise!==void 0}class N4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return T4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function I4(t,e){return Br(t,"GET","/v2/recaptchaConfig",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t,e){return Br(t,"POST","/v1/accounts:delete",e)}async function TI(t,e){return Br(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k4(t,e=!1){const n=$e(t),r=await n.getIdToken(e),s=dy(r);oe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Fl(Mm(s.auth_time)),issuedAtTime:Fl(Mm(s.iat)),expirationTime:Fl(Mm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function dy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const s=iI(n);return s?JSON.parse(s):(gd("Failed to decode base64 JWT payload"),null)}catch(s){return gd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vw(t){const e=dy(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ar&&C4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function C4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ah(t){var e;const n=t.auth,r=await t.getIdToken(),s=await aa(t,TI(n,{idToken:r}));oe(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?EI(i.providerUserInfo):[],a=A4(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new fg(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function P4(t){const e=$e(t);await ah(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A4(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function EI(t){return t.map(e=>{var{providerId:n}=e,r=ay(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R4(t,e){const n=await _I(t,{},async()=>{const r=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=bI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function D4(t,e){return Br(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=vw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await R4(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Go;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(oe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Go,this.toJSON())}_performRefresh(){return vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ay(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await aa(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return k4(this,e)}reload(){return P4(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ah(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await aa(this,S4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:I,isAnonymous:A,providerData:R,stsTokenManager:S}=n;oe(_&&S,e,"internal-error");const E=Go.fromJSON(this.name,S);oe(typeof _=="string",e,"internal-error"),Yr(f,e.name),Yr(m,e.name),oe(typeof I=="boolean",e,"internal-error"),oe(typeof A=="boolean",e,"internal-error"),Yr(g,e.name),Yr(v,e.name),Yr(x,e.name),Yr(T,e.name),Yr(b,e.name),Yr(y,e.name);const k=new wr({uid:_,auth:e,email:m,emailVerified:I,displayName:f,isAnonymous:A,photoURL:v,phoneNumber:g,tenantId:x,stsTokenManager:E,createdAt:b,lastLoginAt:y});return R&&Array.isArray(R)&&(k.providerData=R.map(j=>Object.assign({},j))),T&&(k._redirectEventId=T),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Go;s.updateFromServerResponse(n);const i=new wr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ah(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];oe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?EI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Go;a.updateFromIdToken(r);const c=new wr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new fg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=new Map;function _r(t){Mr(t instanceof Function,"Expected a class definition");let e=ww.get(t);return e?(Mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ww.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NI.type="NONE";const _w=NI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t,e,n){return`firebase:${t}:${e}:${n}`}class Qo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=yd(this.userKey,s.apiKey,i),this.fullPersistenceKey=yd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qo(_r(_w),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||_r(_w);const o=yd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=wr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Qo(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Qo(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(II(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(PI(e))return"Blackberry";if(AI(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||kI(e))&&!e.includes("edge/"))return"Chrome";if(jI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function II(t=lt()){return/firefox\//i.test(t)}function SI(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kI(t=lt()){return/crios\//i.test(t)}function CI(t=lt()){return/iemobile/i.test(t)}function jI(t=lt()){return/android/i.test(t)}function PI(t=lt()){return/blackberry/i.test(t)}function AI(t=lt()){return/webos/i.test(t)}function hy(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function V4(t=lt()){var e;return hy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function L4(){return ZD()&&document.documentMode===10}function RI(t=lt()){return hy(t)||jI(t)||AI(t)||PI(t)||/windows phone/i.test(t)||CI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(t,e=[]){let n;switch(t){case"Browser":n=bw(lt());break;case"Worker":n=`${bw(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t,e={}){return Br(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=6;class U4{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:F4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tw(this),this.idTokenSubscription=new Tw(this),this.beforeStateQueue=new M4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_r(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await TI(this,{idToken:e}),r=await wr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ah(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(Nr(this));const n=e?$e(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_r(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O4(this),n=new U4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await D4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_r(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await Qo.create(this,[_r(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&g4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ks(t){return $e(t)}class Tw{constructor(e){this.auth=e,this.observer=null,this.addObserver=iV(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $4(t){uf=t}function VI(t){return uf.loadJS(t)}function z4(){return uf.recaptchaEnterpriseScript}function H4(){return uf.gapiScript}function q4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const K4="recaptcha-enterprise",W4="NO_RECAPTCHA";class G4{constructor(e){this.type=K4,this.auth=Ks(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{I4(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new N4(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function s(i,o,a){const c=window.grecaptcha;xw(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(W4)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&xw(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=z4();c.length!==0&&(c+=a),VI(c).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Ew(t,e,n,r=!1){const s=new G4(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function mg(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ew(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ew(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e){const n=cf(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(oa(i,e??{}))return s;An(s,"already-initialized")}return n.initialize({options:e})}function Y4(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_r);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J4(t,e,n){const r=Ks(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=LI(e),{host:o,port:a}=X4(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Z4()}function LI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function X4(t){const e=LI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Nw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Nw(o)}}}function Nw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Z4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vr("not implemented")}_getIdTokenResponse(e){return vr("not implemented")}_linkToIdToken(e,n){return vr("not implemented")}_getReauthenticationResolver(e){return vr("not implemented")}}async function e5(t,e){return Br(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t5(t,e){return qc(t,"POST","/v1/accounts:signInWithPassword",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(t,e){return qc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}async function r5(t,e){return qc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends fy{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new yc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new yc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,n,"signInWithPassword",t5);case"emailLink":return n5(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mg(e,r,"signUpPassword",e5);case"emailLink":return r5(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(t,e){return qc(t,"POST","/v1/accounts:signInWithIdp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5="http://localhost";class Pi extends fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ay(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Pi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yo(e,n)}buildRequest(){const e={requestUri:s5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o5(t){const e=bl(Tl(t)).link,n=e?bl(Tl(e)).deep_link_id:null,r=bl(Tl(t)).deep_link_id;return(r?bl(Tl(r)).link:null)||r||n||e||t}class my{constructor(e){var n,r,s,i,o,a;const c=bl(Tl(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=i5((s=c.mode)!==null&&s!==void 0?s:null);oe(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=o5(e);try{return new my(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.providerId=Ia.PROVIDER_ID}static credential(e,n){return yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=my.parseLink(n);return oe(r,"argument-error"),yc._fromEmailAndCode(e,r.code,r.tenantId)}}Ia.PROVIDER_ID="password";Ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends py{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Kc{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Pi._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends Kc{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Kc{constructor(){super("twitter.com")}static credential(e,n){return Pi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a5(t,e){return qc(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await wr._fromIdTokenResponse(e,r,s),o=Iw(r);return new Ai({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Iw(r);return new Ai({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Iw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends ar{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lh(e,n,r,s)}}function MI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(t,i,e,r):i})}async function l5(t,e,n=!1){const r=await aa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ai._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(t,e,n=!1){const{auth:r}=t;if(Fn(r.app))return Promise.reject(Nr(r));const s="reauthenticate";try{const i=await aa(t,MI(r,s,e,t),n);oe(i.idToken,r,"internal-error");const o=dy(i.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Ai._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&An(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t,e,n=!1){if(Fn(t.app))return Promise.reject(Nr(t));const r="signIn",s=await MI(t,r,e),i=await Ai._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function u5(t,e){return OI(Ks(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t){const e=Ks(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function d5(t,e,n){if(Fn(t.app))return Promise.reject(Nr(t));const r=Ks(t),o=await mg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a5).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FI(t),c}),a=await Ai._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function h5(t,e,n){return Fn(t.app)?Promise.reject(Nr(t)):u5($e(t),Ia.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e){return Br(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=$e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await aa(r,f5(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function p5(t,e,n,r){return $e(t).onIdTokenChanged(e,n,r)}function g5(t,e,n){return $e(t).beforeAuthStateChanged(e,n)}function y5(t,e,n,r){return $e(t).onAuthStateChanged(e,n,r)}function x5(t){return $e(t).signOut()}const ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ch,"1"),this.storage.removeItem(ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=1e3,w5=10;class BI extends UI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);L4()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,w5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BI.type="LOCAL";const _5=BI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I extends UI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$I.type="SESSION";const zI=$I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new df(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),c=await b5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=gy("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function E5(t){rr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function N5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function S5(){return HI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firebaseLocalStorageDb",k5=1,uh="firebaseLocalStorage",KI="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(t,e){return t.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function C5(){const t=indexedDB.deleteDatabase(qI);return new Wc(t).toPromise()}function pg(){const t=indexedDB.open(qI,k5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uh,{keyPath:KI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await C5(),e(await pg()))})})}async function Sw(t,e,n){const r=hf(t,!0).put({[KI]:e,value:n});return new Wc(r).toPromise()}async function j5(t,e){const n=hf(t,!1).get(e),r=await new Wc(n).toPromise();return r===void 0?null:r.value}function kw(t,e){const n=hf(t,!0).delete(e);return new Wc(n).toPromise()}const P5=800,A5=3;class WI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>A5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=df._getInstance(S5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await N5(),!this.activeServiceWorker)return;this.sender=new T5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await Sw(e,ch,"1"),await kw(e,ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=hf(s,!1).getAll();return new Wc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}WI.type="LOCAL";const R5=WI;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e){return e?_r(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D5(t){return OI(t.auth,new yy(t),t.bypassAuthState)}function V5(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),c5(n,new yy(t),t.bypassAuthState)}async function L5(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),l5(n,new yy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D5;case"linkViaPopup":case"linkViaRedirect":return L5;case"reauthViaPopup":case"reauthViaRedirect":return V5;default:An(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new Hc(2e3,1e4);async function O5(t,e,n){if(Fn(t.app))return Promise.reject(zn(t,"operation-not-supported-in-this-environment"));const r=Ks(t);y4(t,e,py);const s=GI(r,n);return new vi(r,"signInViaPopup",e,s).executeNotNull()}class vi extends QI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,vi.currentPopupAction&&vi.currentPopupAction.cancel(),vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=gy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M5.get())};e()}}vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="pendingRedirect",xd=new Map;class U5 extends QI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=xd.get(this.auth._key());if(!e){try{const r=await B5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}xd.set(this.auth._key(),e)}return this.bypassAuthState||xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B5(t,e){const n=H5(e),r=z5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function $5(t,e){xd.set(t._key(),e)}function z5(t){return _r(t._redirectPersistence)}function H5(t){return yd(F5,t.config.apiKey,t.name)}async function q5(t,e,n=!1){if(Fn(t.app))return Promise.reject(Nr(t));const r=Ks(t),s=GI(r,e),o=await new U5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=10*60*1e3;class W5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!YI(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cw(e))}saveEventToCache(e){this.cachedEventUids.add(Cw(e)),this.lastProcessedEventTime=Date.now()}}function Cw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function YI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function G5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q5(t,e={}){return Br(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J5=/^https?/;async function X5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Q5(t);for(const n of e)try{if(Z5(n))return}catch{}An(t,"unauthorized-domain")}function Z5(t){const e=hg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!J5.test(n))return!1;if(Y5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=new Hc(3e4,6e4);function jw(){const t=rr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function tL(t){return new Promise((e,n)=>{var r,s,i;function o(){jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jw(),n(zn(t,"network-request-failed"))},timeout:eL.get()})}if(!((s=(r=rr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=rr().gapi)===null||i===void 0)&&i.load)o();else{const a=q4("iframefcb");return rr()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},VI(`${H4()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw vd=null,e})}let vd=null;function nL(t){return vd=vd||tL(t),vd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=new Hc(5e3,15e3),sL="__/auth/iframe",iL="emulator/auth/iframe",oL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lL(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?uy(e,iL):`https://${t.config.authDomain}/${sL}`,r={apiKey:e.apiKey,appName:t.name,v:Gi},s=aL.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${zc(r).slice(1)}`}async function cL(t){const e=await nL(t),n=rr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:lL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oL,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=rr().setTimeout(()=>{i(o)},rL.get());function c(){rr().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dL=500,hL=600,fL="_blank",mL="http://localhost";class Pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pL(t,e,n,r=dL,s=hL){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},uL),{width:r.toString(),height:s.toString(),top:i,left:o}),u=lt().toLowerCase();n&&(a=kI(u)?fL:n),II(u)&&(e=e||mL,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,v])=>`${m}${g}=${v},`,"");if(V4(u)&&a!=="_self")return gL(e||"",a),new Pw(null);const f=window.open(e||"",a,h);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new Pw(f)}function gL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="__/auth/handler",xL="emulator/auth/handler",vL=encodeURIComponent("fac");async function Aw(t,e,n,r,s,i){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Gi,eventId:s};if(e instanceof py){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",sV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Kc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${vL}=${encodeURIComponent(c)}`:"";return`${wL(t)}?${zc(a).slice(1)}${u}`}function wL({config:t}){return t.emulator?uy(t,xL):`https://${t.authDomain}/${yL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="webStorageSupport";class _L{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zI,this._completeRedirectFn=q5,this._overrideRedirectResult=$5}async _openPopup(e,n,r,s){var i;Mr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Aw(e,n,r,hg(),s);return pL(e,o,gy())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Aw(e,n,r,hg(),s);return E5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await cL(e),r=new W5(e);return n.register("authEvent",s=>(oe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Om,{type:Om},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Om];o!==void 0&&n(!!o),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RI()||SI()||hy()}}const bL=_L;var Rw="@firebase/auth",Dw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NL(t){ji(new Ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DI(t)},u=new B4(r,s,i,c);return Y4(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ji(new Ps("auth-internal",e=>{const n=Ks(e.getProvider("auth").getImmediate());return(r=>new TL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(Rw,Dw,EL(t)),nr(Rw,Dw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=5*60,SL=cI("authIdTokenMaxAge")||IL;let Vw=null;const kL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SL)return;const s=n==null?void 0:n.token;Vw!==s&&(Vw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CL(t=oy()){const e=cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Q4(t,{popupRedirectResolver:bL,persistence:[R5,_5,zI]}),r=cI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=kL(i.toString());g5(n,o,()=>o(n.currentUser)),p5(n,a=>o(a))}}const s=oI("auth");return s&&J4(n,`http://${s}`),n}function jL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",jL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NL("Browser");var Lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,JI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,E){function k(){}k.prototype=E.prototype,S.D=E.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(j,D,V){for(var P=Array(arguments.length-2),X=2;X<arguments.length;X++)P[X-2]=arguments[X];return E.prototype[D].apply(j,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,E,k){k||(k=0);var j=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)j[D]=E.charCodeAt(k++)|E.charCodeAt(k++)<<8|E.charCodeAt(k++)<<16|E.charCodeAt(k++)<<24;else for(D=0;16>D;++D)j[D]=E[k++]|E[k++]<<8|E[k++]<<16|E[k++]<<24;E=S.g[0],k=S.g[1],D=S.g[2];var V=S.g[3],P=E+(V^k&(D^V))+j[0]+3614090360&4294967295;E=k+(P<<7&4294967295|P>>>25),P=V+(D^E&(k^D))+j[1]+3905402710&4294967295,V=E+(P<<12&4294967295|P>>>20),P=D+(k^V&(E^k))+j[2]+606105819&4294967295,D=V+(P<<17&4294967295|P>>>15),P=k+(E^D&(V^E))+j[3]+3250441966&4294967295,k=D+(P<<22&4294967295|P>>>10),P=E+(V^k&(D^V))+j[4]+4118548399&4294967295,E=k+(P<<7&4294967295|P>>>25),P=V+(D^E&(k^D))+j[5]+1200080426&4294967295,V=E+(P<<12&4294967295|P>>>20),P=D+(k^V&(E^k))+j[6]+2821735955&4294967295,D=V+(P<<17&4294967295|P>>>15),P=k+(E^D&(V^E))+j[7]+4249261313&4294967295,k=D+(P<<22&4294967295|P>>>10),P=E+(V^k&(D^V))+j[8]+1770035416&4294967295,E=k+(P<<7&4294967295|P>>>25),P=V+(D^E&(k^D))+j[9]+2336552879&4294967295,V=E+(P<<12&4294967295|P>>>20),P=D+(k^V&(E^k))+j[10]+4294925233&4294967295,D=V+(P<<17&4294967295|P>>>15),P=k+(E^D&(V^E))+j[11]+2304563134&4294967295,k=D+(P<<22&4294967295|P>>>10),P=E+(V^k&(D^V))+j[12]+1804603682&4294967295,E=k+(P<<7&4294967295|P>>>25),P=V+(D^E&(k^D))+j[13]+4254626195&4294967295,V=E+(P<<12&4294967295|P>>>20),P=D+(k^V&(E^k))+j[14]+2792965006&4294967295,D=V+(P<<17&4294967295|P>>>15),P=k+(E^D&(V^E))+j[15]+1236535329&4294967295,k=D+(P<<22&4294967295|P>>>10),P=E+(D^V&(k^D))+j[1]+4129170786&4294967295,E=k+(P<<5&4294967295|P>>>27),P=V+(k^D&(E^k))+j[6]+3225465664&4294967295,V=E+(P<<9&4294967295|P>>>23),P=D+(E^k&(V^E))+j[11]+643717713&4294967295,D=V+(P<<14&4294967295|P>>>18),P=k+(V^E&(D^V))+j[0]+3921069994&4294967295,k=D+(P<<20&4294967295|P>>>12),P=E+(D^V&(k^D))+j[5]+3593408605&4294967295,E=k+(P<<5&4294967295|P>>>27),P=V+(k^D&(E^k))+j[10]+38016083&4294967295,V=E+(P<<9&4294967295|P>>>23),P=D+(E^k&(V^E))+j[15]+3634488961&4294967295,D=V+(P<<14&4294967295|P>>>18),P=k+(V^E&(D^V))+j[4]+3889429448&4294967295,k=D+(P<<20&4294967295|P>>>12),P=E+(D^V&(k^D))+j[9]+568446438&4294967295,E=k+(P<<5&4294967295|P>>>27),P=V+(k^D&(E^k))+j[14]+3275163606&4294967295,V=E+(P<<9&4294967295|P>>>23),P=D+(E^k&(V^E))+j[3]+4107603335&4294967295,D=V+(P<<14&4294967295|P>>>18),P=k+(V^E&(D^V))+j[8]+1163531501&4294967295,k=D+(P<<20&4294967295|P>>>12),P=E+(D^V&(k^D))+j[13]+2850285829&4294967295,E=k+(P<<5&4294967295|P>>>27),P=V+(k^D&(E^k))+j[2]+4243563512&4294967295,V=E+(P<<9&4294967295|P>>>23),P=D+(E^k&(V^E))+j[7]+1735328473&4294967295,D=V+(P<<14&4294967295|P>>>18),P=k+(V^E&(D^V))+j[12]+2368359562&4294967295,k=D+(P<<20&4294967295|P>>>12),P=E+(k^D^V)+j[5]+4294588738&4294967295,E=k+(P<<4&4294967295|P>>>28),P=V+(E^k^D)+j[8]+2272392833&4294967295,V=E+(P<<11&4294967295|P>>>21),P=D+(V^E^k)+j[11]+1839030562&4294967295,D=V+(P<<16&4294967295|P>>>16),P=k+(D^V^E)+j[14]+4259657740&4294967295,k=D+(P<<23&4294967295|P>>>9),P=E+(k^D^V)+j[1]+2763975236&4294967295,E=k+(P<<4&4294967295|P>>>28),P=V+(E^k^D)+j[4]+1272893353&4294967295,V=E+(P<<11&4294967295|P>>>21),P=D+(V^E^k)+j[7]+4139469664&4294967295,D=V+(P<<16&4294967295|P>>>16),P=k+(D^V^E)+j[10]+3200236656&4294967295,k=D+(P<<23&4294967295|P>>>9),P=E+(k^D^V)+j[13]+681279174&4294967295,E=k+(P<<4&4294967295|P>>>28),P=V+(E^k^D)+j[0]+3936430074&4294967295,V=E+(P<<11&4294967295|P>>>21),P=D+(V^E^k)+j[3]+3572445317&4294967295,D=V+(P<<16&4294967295|P>>>16),P=k+(D^V^E)+j[6]+76029189&4294967295,k=D+(P<<23&4294967295|P>>>9),P=E+(k^D^V)+j[9]+3654602809&4294967295,E=k+(P<<4&4294967295|P>>>28),P=V+(E^k^D)+j[12]+3873151461&4294967295,V=E+(P<<11&4294967295|P>>>21),P=D+(V^E^k)+j[15]+530742520&4294967295,D=V+(P<<16&4294967295|P>>>16),P=k+(D^V^E)+j[2]+3299628645&4294967295,k=D+(P<<23&4294967295|P>>>9),P=E+(D^(k|~V))+j[0]+4096336452&4294967295,E=k+(P<<6&4294967295|P>>>26),P=V+(k^(E|~D))+j[7]+1126891415&4294967295,V=E+(P<<10&4294967295|P>>>22),P=D+(E^(V|~k))+j[14]+2878612391&4294967295,D=V+(P<<15&4294967295|P>>>17),P=k+(V^(D|~E))+j[5]+4237533241&4294967295,k=D+(P<<21&4294967295|P>>>11),P=E+(D^(k|~V))+j[12]+1700485571&4294967295,E=k+(P<<6&4294967295|P>>>26),P=V+(k^(E|~D))+j[3]+2399980690&4294967295,V=E+(P<<10&4294967295|P>>>22),P=D+(E^(V|~k))+j[10]+4293915773&4294967295,D=V+(P<<15&4294967295|P>>>17),P=k+(V^(D|~E))+j[1]+2240044497&4294967295,k=D+(P<<21&4294967295|P>>>11),P=E+(D^(k|~V))+j[8]+1873313359&4294967295,E=k+(P<<6&4294967295|P>>>26),P=V+(k^(E|~D))+j[15]+4264355552&4294967295,V=E+(P<<10&4294967295|P>>>22),P=D+(E^(V|~k))+j[6]+2734768916&4294967295,D=V+(P<<15&4294967295|P>>>17),P=k+(V^(D|~E))+j[13]+1309151649&4294967295,k=D+(P<<21&4294967295|P>>>11),P=E+(D^(k|~V))+j[4]+4149444226&4294967295,E=k+(P<<6&4294967295|P>>>26),P=V+(k^(E|~D))+j[11]+3174756917&4294967295,V=E+(P<<10&4294967295|P>>>22),P=D+(E^(V|~k))+j[2]+718787259&4294967295,D=V+(P<<15&4294967295|P>>>17),P=k+(V^(D|~E))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+V&4294967295}r.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var k=E-this.blockSize,j=this.B,D=this.h,V=0;V<E;){if(D==0)for(;V<=k;)s(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<E;)if(j[D++]=S.charCodeAt(V++),D==this.blockSize){s(this,j),D=0;break}}else for(;V<E;)if(j[D++]=S[V++],D==this.blockSize){s(this,j),D=0;break}}this.h=D,this.o+=E},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var k=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=k&255,k/=256;for(this.u(S),S=Array(16),E=k=0;4>E;++E)for(var j=0;32>j;j+=8)S[k++]=this.g[E]>>>j&255;return S};function i(S,E){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=E(S)}function o(S,E){this.h=E;for(var k=[],j=!0,D=S.length-1;0<=D;D--){var V=S[D]|0;j&&V==E||(k[D]=V,j=!1)}this.g=k}var a={};function c(S){return-128<=S&&128>S?i(S,function(E){return new o([E|0],0>E?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return T(u(-S));for(var E=[],k=1,j=0;S>=k;j++)E[j]=S/k|0,k*=4294967296;return new o(E,0)}function h(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return T(h(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(E,8)),j=f,D=0;D<S.length;D+=8){var V=Math.min(8,S.length-D),P=parseInt(S.substring(D,D+V),E);8>V?(V=u(Math.pow(E,V)),j=j.j(V).add(u(P))):(j=j.j(k),j=j.add(u(P)))}return j}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-T(this).m();for(var S=0,E=1,k=0;k<this.g.length;k++){var j=this.i(k);S+=(0<=j?j:4294967296+j)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(x(this))return"-"+T(this).toString(S);for(var E=u(Math.pow(S,6)),k=this,j="";;){var D=I(k,E).g;k=b(k,D.j(E));var V=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=D,v(k))return V+j;for(;6>V.length;)V="0"+V;j=V+j}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=b(this,S),x(S)?-1:v(S)?0:1};function T(S){for(var E=S.g.length,k=[],j=0;j<E;j++)k[j]=~S.g[j];return new o(k,~S.h).add(m)}t.abs=function(){return x(this)?T(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],j=0,D=0;D<=E;D++){var V=j+(this.i(D)&65535)+(S.i(D)&65535),P=(V>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);j=P>>>16,V&=65535,P&=65535,k[D]=P<<16|V}return new o(k,k[k.length-1]&-2147483648?-1:0)};function b(S,E){return S.add(T(E))}t.j=function(S){if(v(this)||v(S))return f;if(x(this))return x(S)?T(this).j(T(S)):T(T(this).j(S));if(x(S))return T(this.j(T(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var E=this.g.length+S.g.length,k=[],j=0;j<2*E;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(var D=0;D<S.g.length;D++){var V=this.i(j)>>>16,P=this.i(j)&65535,X=S.i(D)>>>16,de=S.i(D)&65535;k[2*j+2*D]+=P*de,y(k,2*j+2*D),k[2*j+2*D+1]+=V*de,y(k,2*j+2*D+1),k[2*j+2*D+1]+=P*X,y(k,2*j+2*D+1),k[2*j+2*D+2]+=V*X,y(k,2*j+2*D+2)}for(j=0;j<E;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=E;j<2*E;j++)k[j]=0;return new o(k,0)};function y(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function _(S,E){this.g=S,this.h=E}function I(S,E){if(v(E))throw Error("division by zero");if(v(S))return new _(f,f);if(x(S))return E=I(T(S),E),new _(T(E.g),T(E.h));if(x(E))return E=I(S,T(E)),new _(T(E.g),E.h);if(30<S.g.length){if(x(S)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var k=m,j=E;0>=j.l(S);)k=A(k),j=A(j);var D=R(k,1),V=R(j,1);for(j=R(j,2),k=R(k,2);!v(j);){var P=V.add(j);0>=P.l(S)&&(D=D.add(k),V=P),j=R(j,1),k=R(k,1)}return E=b(S,D.j(E)),new _(D,E)}for(D=f;0<=S.l(E);){for(k=Math.max(1,Math.floor(S.m()/E.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),V=u(k),P=V.j(E);x(P)||0<P.l(S);)k-=j,V=u(k),P=V.j(E);v(V)&&(V=m),D=D.add(V),S=b(S,P)}return new _(D,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],j=0;j<E;j++)k[j]=this.i(j)&S.i(j);return new o(k,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],j=0;j<E;j++)k[j]=this.i(j)|S.i(j);return new o(k,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),k=[],j=0;j<E;j++)k[j]=this.i(j)^S.i(j);return new o(k,this.h^S.h)};function A(S){for(var E=S.g.length+1,k=[],j=0;j<E;j++)k[j]=S.i(j)<<1|S.i(j-1)>>>31;return new o(k,S.h)}function R(S,E){var k=E>>5;E%=32;for(var j=S.g.length-k,D=[],V=0;V<j;V++)D[V]=0<E?S.i(V+k)>>>E|S.i(V+k+1)<<32-E:S.i(V+k);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,JI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ti=o}).apply(typeof Lw<"u"?Lw:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XI,El,ZI,wd,gg,e2,t2,n2;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,w){return d==Array.prototype||d==Object.prototype||(d[p]=w.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var p=0;p<d.length;++p){var w=d[p];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(d,p){if(p)e:{var w=r;d=d.split(".");for(var C=0;C<d.length-1;C++){var M=d[C];if(!(M in w))break e;w=w[M]}d=d[d.length-1],C=w[d],p=p(C),p!=C&&p!=null&&e(w,d,{configurable:!0,writable:!0,value:p})}}function i(d,p){d instanceof String&&(d+="");var w=0,C=!1,M={next:function(){if(!C&&w<d.length){var F=w++;return{value:p(F,d[F]),done:!1}}return C=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(d){return d||function(){return i(this,function(p,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function u(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function h(d,p,w){return d.call.apply(d.bind,arguments)}function f(d,p,w){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,C),d.apply(p,M)}}return function(){return d.apply(p,arguments)}}function m(d,p,w){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,p){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function v(d,p){function w(){}w.prototype=p.prototype,d.aa=p.prototype,d.prototype=new w,d.prototype.constructor=d,d.Qb=function(C,M,F){for(var W=Array(arguments.length-2),je=2;je<arguments.length;je++)W[je-2]=arguments[je];return p.prototype[M].apply(C,W)}}function x(d){const p=d.length;if(0<p){const w=Array(p);for(let C=0;C<p;C++)w[C]=d[C];return w}return[]}function T(d,p){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(c(C)){const M=d.length||0,F=C.length||0;d.length=M+F;for(let W=0;W<F;W++)d[M+W]=C[W]}else d.push(C)}}class b{constructor(p,w){this.i=p,this.j=w,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var A=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function R(d,p,w){for(const C in d)p.call(w,d[C],C,d)}function S(d,p){for(const w in d)p.call(void 0,d[w],w,d)}function E(d){const p={};for(const w in d)p[w]=d[w];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,p){let w,C;for(let M=1;M<arguments.length;M++){C=arguments[M];for(w in C)d[w]=C[w];for(let F=0;F<k.length;F++)w=k[F],Object.prototype.hasOwnProperty.call(C,w)&&(d[w]=C[w])}}function D(d){var p=1;d=d.split(":");const w=[];for(;0<p&&d.length;)w.push(d.shift()),p--;return d.length&&w.push(d.join(":")),w}function V(d){a.setTimeout(()=>{throw d},0)}function P(){var d=z;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class X{constructor(){this.h=this.g=null}add(p,w){const C=de.get();C.set(p,w),this.h?this.h.next=C:this.g=C,this.h=C}}var de=new b(()=>new he,d=>d.reset());class he{constructor(){this.next=this.g=this.h=null}set(p,w){this.h=p,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,$=!1,z=new X,G=()=>{const d=a.Promise.resolve(void 0);ke=()=>{d.then(te)}};var te=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(w){V(w)}var p=de;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}$=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};a.addEventListener("test",w,p),a.removeEventListener("test",w,p)}catch{}return d}();function ut(d,p){if(xe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var w=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(A){e:{try{I(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else w=="mouseover"?p=d.fromElement:w=="mouseout"&&(p=d.toElement);this.relatedTarget=p,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:it[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ut.aa.h.call(this)}}v(ut,xe);var it={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),so=0;function Hr(d,p,w,C,M){this.listener=d,this.proxy=null,this.src=p,this.type=w,this.capture=!!C,this.ha=M,this.key=++so,this.da=this.fa=!1}function B(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function se(d){this.src=d,this.g={},this.h=0}se.prototype.add=function(d,p,w,C,M){var F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);var W=Ee(d,p,C,M);return-1<W?(p=d[W],w||(p.fa=!1)):(p=new Hr(p,this.src,F,!!C,M),p.fa=w,d.push(p)),p};function Te(d,p){var w=p.type;if(w in d.g){var C=d.g[w],M=Array.prototype.indexOf.call(C,p,void 0),F;(F=0<=M)&&Array.prototype.splice.call(C,M,1),F&&(B(p),d.g[w].length==0&&(delete d.g[w],d.h--))}}function Ee(d,p,w,C){for(var M=0;M<d.length;++M){var F=d[M];if(!F.da&&F.listener==p&&F.capture==!!w&&F.ha==C)return M}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Ne={};function Nt(d,p,w,C,M){if(Array.isArray(p)){for(var F=0;F<p.length;F++)Nt(d,p[F],w,C,M);return null}return w=La(w),d&&d[Yt]?d.K(p,w,u(C)?!!C.capture:!!C,M):Mt(d,p,w,!1,C,M)}function Mt(d,p,w,C,M,F){if(!p)throw Error("Invalid event type");var W=u(M)?!!M.capture:!!M,je=oo(d);if(je||(d[Pe]=je=new se(d)),w=je.add(p,w,C,W,F),w.proxy)return w;if(C=Ot(),w.proxy=C,C.src=d,C.listener=w,d.addEventListener)Et||(M=W),M===void 0&&(M=!1),d.addEventListener(p.toString(),C,M);else if(d.attachEvent)d.attachEvent(Ys(p.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ot(){function d(w){return p.call(d.src,d.listener,w)}const p=io;return d}function an(d,p,w,C,M){if(Array.isArray(p))for(var F=0;F<p.length;F++)an(d,p[F],w,C,M);else C=u(C)?!!C.capture:!!C,w=La(w),d&&d[Yt]?(d=d.i,p=String(p).toString(),p in d.g&&(F=d.g[p],w=Ee(F,w,C,M),-1<w&&(B(F[w]),Array.prototype.splice.call(F,w,1),F.length==0&&(delete d.g[p],d.h--)))):d&&(d=oo(d))&&(p=d.g[p.toString()],d=-1,p&&(d=Ee(p,w,C,M)),(w=-1<d?p[d]:null)&&ln(w))}function ln(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[Yt])Te(p.i,d);else{var w=d.type,C=d.proxy;p.removeEventListener?p.removeEventListener(w,C,d.capture):p.detachEvent?p.detachEvent(Ys(w),C):p.addListener&&p.removeListener&&p.removeListener(C),(w=oo(p))?(Te(w,d),w.h==0&&(w.src=null,p[Pe]=null)):B(d)}}}function Ys(d){return d in Ne?Ne[d]:Ne[d]="on"+d}function io(d,p){if(d.da)d=!0;else{p=new ut(p,this);var w=d.listener,C=d.ha||d.src;d.fa&&ln(d),d=w.call(C,p)}return d}function oo(d){return d=d[Pe],d instanceof se?d:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function La(d){return typeof d=="function"?d:(d[qr]||(d[qr]=function(p){return d.handleEvent(p)}),d[qr])}function It(){le.call(this),this.i=new se(this),this.M=this,this.F=null}v(It,le),It.prototype[Yt]=!0,It.prototype.removeEventListener=function(d,p,w,C){an(this,d,p,w,C)};function Ft(d,p){var w,C=d.F;if(C)for(w=[];C;C=C.F)w.push(C);if(d=d.M,C=p.type||p,typeof p=="string")p=new xe(p,d);else if(p instanceof xe)p.target=p.target||d;else{var M=p;p=new xe(C,d),j(p,M)}if(M=!0,w)for(var F=w.length-1;0<=F;F--){var W=p.g=w[F];M=lu(W,C,!0,p)&&M}if(W=p.g=d,M=lu(W,C,!0,p)&&M,M=lu(W,C,!1,p)&&M,w)for(F=0;F<w.length;F++)W=p.g=w[F],M=lu(W,C,!1,p)&&M}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var w=d.g[p],C=0;C<w.length;C++)B(w[C]);delete d.g[p],d.h--}}this.F=null},It.prototype.K=function(d,p,w,C){return this.i.add(String(d),p,!1,w,C)},It.prototype.L=function(d,p,w,C){return this.i.add(String(d),p,!0,w,C)};function lu(d,p,w,C){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,F=0;F<p.length;++F){var W=p[F];if(W&&!W.da&&W.capture==w){var je=W.listener,pt=W.ha||W.src;W.fa&&Te(d.i,W),M=je.call(pt,C)!==!1&&M}}return M&&!C.defaultPrevented}function qx(d,p,w){if(typeof d=="function")w&&(d=m(d,w));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function Kx(d){d.g=qx(()=>{d.g=null,d.i&&(d.i=!1,Kx(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class VC extends le{constructor(p,w){super(),this.m=p,this.l=w,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kx(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ma(d){le.call(this),this.h=d,this.g={}}v(Ma,le);var Wx=[];function Gx(d){R(d.g,function(p,w){this.g.hasOwnProperty(w)&&ln(p)},d),d.g={}}Ma.prototype.N=function(){Ma.aa.N.call(this),Gx(this)},Ma.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zf=a.JSON.stringify,LC=a.JSON.parse,MC=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Hf(){}Hf.prototype.h=null;function Qx(d){return d.h||(d.h=d.i())}function Yx(){}var Oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qf(){xe.call(this,"d")}v(qf,xe);function Kf(){xe.call(this,"c")}v(Kf,xe);var Js={},Jx=null;function cu(){return Jx=Jx||new It}Js.La="serverreachability";function Xx(d){xe.call(this,Js.La,d)}v(Xx,xe);function Fa(d){const p=cu();Ft(p,new Xx(p))}Js.STAT_EVENT="statevent";function Zx(d,p){xe.call(this,Js.STAT_EVENT,d),this.stat=p}v(Zx,xe);function Ut(d){const p=cu();Ft(p,new Zx(p,d))}Js.Ma="timingevent";function ev(d,p){xe.call(this,Js.Ma,d),this.size=p}v(ev,xe);function Ua(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function Ba(){this.g=!0}Ba.prototype.xa=function(){this.g=!1};function OC(d,p,w,C,M,F){d.info(function(){if(d.g)if(F)for(var W="",je=F.split("&"),pt=0;pt<je.length;pt++){var _e=je[pt].split("=");if(1<_e.length){var St=_e[0];_e=_e[1];var kt=St.split("_");W=2<=kt.length&&kt[1]=="type"?W+(St+"="+_e+"&"):W+(St+"=redacted&")}}else W=null;else W=F;return"XMLHTTP REQ ("+C+") [attempt "+M+"]: "+p+`
`+w+`
`+W})}function FC(d,p,w,C,M,F,W){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+M+"]: "+p+`
`+w+`
`+F+" "+W})}function ao(d,p,w,C){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+BC(d,w)+(C?" "+C:"")})}function UC(d,p){d.info(function(){return"TIMEOUT: "+p})}Ba.prototype.info=function(){};function BC(d,p){if(!d.g)return p;if(!p)return null;try{var w=JSON.parse(p);if(w){for(d=0;d<w.length;d++)if(Array.isArray(w[d])){var C=w[d];if(!(2>C.length)){var M=C[1];if(Array.isArray(M)&&!(1>M.length)){var F=M[0];if(F!="noop"&&F!="stop"&&F!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return zf(w)}catch{return p}}var uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wf;function du(){}v(du,Hf),du.prototype.g=function(){return new XMLHttpRequest},du.prototype.i=function(){return{}},Wf=new du;function Kr(d,p,w,C){this.j=d,this.i=p,this.l=w,this.R=C||1,this.U=new Ma(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nv}function nv(){this.i=null,this.g="",this.h=!1}var rv={},Gf={};function Qf(d,p,w){d.L=1,d.v=pu(cr(p)),d.m=w,d.P=!0,sv(d,null)}function sv(d,p){d.F=Date.now(),hu(d),d.A=cr(d.v);var w=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),xv(w.i,"t",C),d.C=0,w=d.j.J,d.h=new nv,d.g=Lv(d.j,w?p:null,!d.m),0<d.O&&(d.M=new VC(m(d.Y,d,d.g),d.O)),p=d.U,w=d.g,C=d.ca;var M="readystatechange";Array.isArray(M)||(M&&(Wx[0]=M.toString()),M=Wx);for(var F=0;F<M.length;F++){var W=Nt(w,M[F],C||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),Fa(),OC(d.i,d.u,d.A,d.l,d.R,d.m)}Kr.prototype.ca=function(d){d=d.target;const p=this.M;p&&ur(d)==3?p.j():this.Y(d)},Kr.prototype.Y=function(d){try{if(d==this.g)e:{const kt=ur(this.g);var p=this.g.Ba();const uo=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Nv(this.g)))){this.J||kt!=4||p==7||(p==8||0>=uo?Fa(3):Fa(2)),Yf(this);var w=this.g.Z();this.X=w;t:if(iv(this)){var C=Nv(this.g);d="";var M=C.length,F=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xs(this),$a(this);var W="";break t}this.h.i=new a.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,d+=this.h.i.decode(C[p],{stream:!(F&&p==M-1)});C.length=0,this.h.g+=d,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=w==200,FC(this.i,this.u,this.A,this.l,this.R,kt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var je,pt=this.g;if((je=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(je)){var _e=je;break t}}_e=null}if(w=_e)ao(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jf(this,w);else{this.o=!1,this.s=3,Ut(12),Xs(this),$a(this);break e}}if(this.P){w=!0;let Dn;for(;!this.J&&this.C<W.length;)if(Dn=$C(this,W),Dn==Gf){kt==4&&(this.s=4,Ut(14),w=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==rv){this.s=4,Ut(15),ao(this.i,this.l,W,"[Invalid Chunk]"),w=!1;break}else ao(this.i,this.l,Dn,null),Jf(this,Dn);if(iv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||W.length!=0||this.h.h||(this.s=1,Ut(16),w=!1),this.o=this.o&&w,!w)ao(this.i,this.l,W,"[Invalid Chunked Response]"),Xs(this),$a(this);else if(0<W.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),rm(St),St.M=!0,Ut(11))}}else ao(this.i,this.l,W,null),Jf(this,W);kt==4&&Xs(this),this.o&&!this.J&&(kt==4?Av(this.j,this):(this.o=!1,hu(this)))}else ij(this.g),w==400&&0<W.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Xs(this),$a(this)}}}catch{}finally{}};function iv(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function $C(d,p){var w=d.C,C=p.indexOf(`
`,w);return C==-1?Gf:(w=Number(p.substring(w,C)),isNaN(w)?rv:(C+=1,C+w>p.length?Gf:(p=p.slice(C,C+w),d.C=C+w,p)))}Kr.prototype.cancel=function(){this.J=!0,Xs(this)};function hu(d){d.S=Date.now()+d.I,ov(d,d.I)}function ov(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ua(m(d.ba,d),p)}function Yf(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Kr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(UC(this.i,this.A),this.L!=2&&(Fa(),Ut(17)),Xs(this),this.s=2,$a(this)):ov(this,this.S-d)};function $a(d){d.j.G==0||d.J||Av(d.j,d)}function Xs(d){Yf(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,Gx(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function Jf(d,p){try{var w=d.j;if(w.G!=0&&(w.g==d||Xf(w.h,d))){if(!d.K&&Xf(w.h,d)&&w.G==3){try{var C=w.Da.g.parse(p)}catch{C=null}if(Array.isArray(C)&&C.length==3){var M=C;if(M[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<d.F)_u(w),vu(w);else break e;nm(w),Ut(18)}}else w.za=M[1],0<w.za-w.T&&37500>M[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ua(m(w.Za,w),6e3));if(1>=cv(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ei(w,11)}else if((d.K||w.g==d)&&_u(w),!y(p))for(M=w.Da.g.parse(p),p=0;p<M.length;p++){let _e=M[p];if(w.T=_e[0],_e=_e[1],w.G==2)if(_e[0]=="c"){w.K=_e[1],w.ia=_e[2];const St=_e[3];St!=null&&(w.la=St,w.j.info("VER="+w.la));const kt=_e[4];kt!=null&&(w.Aa=kt,w.j.info("SVER="+w.Aa));const uo=_e[5];uo!=null&&typeof uo=="number"&&0<uo&&(C=1.5*uo,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Dn=d.g;if(Dn){const Tu=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tu){var F=C.h;F.g||Tu.indexOf("spdy")==-1&&Tu.indexOf("quic")==-1&&Tu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Zf(F,F.h),F.h=null))}if(C.D){const sm=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(C.ya=sm,De(C.I,C.D,sm))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-d.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var W=d;if(C.qa=Vv(C,C.J?C.ia:null,C.W),W.K){uv(C.h,W);var je=W,pt=C.L;pt&&(je.I=pt),je.B&&(Yf(je),hu(je)),C.g=W}else jv(C);0<w.i.length&&wu(w)}else _e[0]!="stop"&&_e[0]!="close"||ei(w,7);else w.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?ei(w,7):tm(w):_e[0]!="noop"&&w.l&&w.l.ta(_e),w.v=0)}}Fa(4)}catch{}}var zC=class{constructor(d,p){this.g=d,this.map=p}};function av(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lv(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function cv(d){return d.h?1:d.g?d.g.size:0}function Xf(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function Zf(d,p){d.g?d.g.add(p):d.h=p}function uv(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}av.prototype.cancel=function(){if(this.i=dv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function dv(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const w of d.g.values())p=p.concat(w.D);return p}return x(d.i)}function HC(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var p=[],w=d.length,C=0;C<w;C++)p.push(d[C]);return p}p=[],w=0;for(C in d)p[w++]=d[C];return p}function qC(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var p=[];d=d.length;for(var w=0;w<d;w++)p.push(w);return p}p=[],w=0;for(const C in d)p[w++]=C;return p}}}function hv(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var w=qC(d),C=HC(d),M=C.length,F=0;F<M;F++)p.call(void 0,C[F],w&&w[F],d)}var fv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KC(d,p){if(d){d=d.split("&");for(var w=0;w<d.length;w++){var C=d[w].indexOf("="),M=null;if(0<=C){var F=d[w].substring(0,C);M=d[w].substring(C+1)}else F=d[w];p(F,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Zs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Zs){this.h=d.h,fu(this,d.j),this.o=d.o,this.g=d.g,mu(this,d.s),this.l=d.l;var p=d.i,w=new qa;w.i=p.i,p.g&&(w.g=new Map(p.g),w.h=p.h),mv(this,w),this.m=d.m}else d&&(p=String(d).match(fv))?(this.h=!1,fu(this,p[1]||"",!0),this.o=za(p[2]||""),this.g=za(p[3]||"",!0),mu(this,p[4]),this.l=za(p[5]||"",!0),mv(this,p[6]||"",!0),this.m=za(p[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}Zs.prototype.toString=function(){var d=[],p=this.j;p&&d.push(Ha(p,pv,!0),":");var w=this.g;return(w||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Ha(p,pv,!0),"@"),d.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&d.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Ha(w,w.charAt(0)=="/"?QC:GC,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Ha(w,JC)),d.join("")};function cr(d){return new Zs(d)}function fu(d,p,w){d.j=w?za(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function mu(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function mv(d,p,w){p instanceof qa?(d.i=p,XC(d.i,d.h)):(w||(p=Ha(p,YC)),d.i=new qa(p,d.h))}function De(d,p,w){d.i.set(p,w)}function pu(d){return De(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function za(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ha(d,p,w){return typeof d=="string"?(d=encodeURI(d).replace(p,WC),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function WC(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pv=/[#\/\?@]/g,GC=/[#\?:]/g,QC=/[#\?]/g,YC=/[#\?@]/g,JC=/#/g;function qa(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function Wr(d){d.g||(d.g=new Map,d.h=0,d.i&&KC(d.i,function(p,w){d.add(decodeURIComponent(p.replace(/\+/g," ")),w)}))}t=qa.prototype,t.add=function(d,p){Wr(this),this.i=null,d=lo(this,d);var w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(p),this.h+=1,this};function gv(d,p){Wr(d),p=lo(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function yv(d,p){return Wr(d),p=lo(d,p),d.g.has(p)}t.forEach=function(d,p){Wr(this),this.g.forEach(function(w,C){w.forEach(function(M){d.call(p,M,C,this)},this)},this)},t.na=function(){Wr(this);const d=Array.from(this.g.values()),p=Array.from(this.g.keys()),w=[];for(let C=0;C<p.length;C++){const M=d[C];for(let F=0;F<M.length;F++)w.push(p[C])}return w},t.V=function(d){Wr(this);let p=[];if(typeof d=="string")yv(this,d)&&(p=p.concat(this.g.get(lo(this,d))));else{d=Array.from(this.g.values());for(let w=0;w<d.length;w++)p=p.concat(d[w])}return p},t.set=function(d,p){return Wr(this),this.i=null,d=lo(this,d),yv(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},t.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function xv(d,p,w){gv(d,p),0<w.length&&(d.i=null,d.g.set(lo(d,p),x(w)),d.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(var w=0;w<p.length;w++){var C=p[w];const F=encodeURIComponent(String(C)),W=this.V(C);for(C=0;C<W.length;C++){var M=F;W[C]!==""&&(M+="="+encodeURIComponent(String(W[C]))),d.push(M)}}return this.i=d.join("&")};function lo(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function XC(d,p){p&&!d.j&&(Wr(d),d.i=null,d.g.forEach(function(w,C){var M=C.toLowerCase();C!=M&&(gv(this,C),xv(this,M,w))},d)),d.j=p}function ZC(d,p){const w=new Ba;if(a.Image){const C=new Image;C.onload=g(Gr,w,"TestLoadImage: loaded",!0,p,C),C.onerror=g(Gr,w,"TestLoadImage: error",!1,p,C),C.onabort=g(Gr,w,"TestLoadImage: abort",!1,p,C),C.ontimeout=g(Gr,w,"TestLoadImage: timeout",!1,p,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else p(!1)}function ej(d,p){const w=new Ba,C=new AbortController,M=setTimeout(()=>{C.abort(),Gr(w,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:C.signal}).then(F=>{clearTimeout(M),F.ok?Gr(w,"TestPingServer: ok",!0,p):Gr(w,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),Gr(w,"TestPingServer: error",!1,p)})}function Gr(d,p,w,C,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),C(w)}catch{}}function tj(){this.g=new MC}function nj(d,p,w){const C=w||"";try{hv(d,function(M,F){let W=M;u(M)&&(W=zf(M)),p.push(C+F+"="+encodeURIComponent(W))})}catch(M){throw p.push(C+"type="+encodeURIComponent("_badmap")),M}}function gu(d){this.l=d.Ub||null,this.j=d.eb||!1}v(gu,Hf),gu.prototype.g=function(){return new yu(this.l,this.j)},gu.prototype.i=function(d){return function(){return d}}({});function yu(d,p){It.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(yu,It),t=yu.prototype,t.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,Wa(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ka(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Wa(this)),this.g&&(this.readyState=3,Wa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vv(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function vv(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Ka(this):Wa(this),this.readyState==3&&vv(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ka(this))},t.Qa=function(d){this.g&&(this.response=d,Ka(this))},t.ga=function(){this.g&&Ka(this)};function Ka(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Wa(d)}t.setRequestHeader=function(d,p){this.u.append(d,p)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var w=p.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=p.next();return d.join(`\r
`)};function Wa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(yu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function wv(d){let p="";return R(d,function(w,C){p+=C,p+=":",p+=w,p+=`\r
`}),p}function em(d,p,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=wv(w),typeof d=="string"?w!=null&&encodeURIComponent(String(w)):De(d,p,w))}function Ye(d){It.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ye,It);var rj=/^https?$/i,sj=["POST","PUT"];t=Ye.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,p,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wf.g(),this.v=this.o?Qx(this.o):Qx(Wf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(F){_v(this,F);return}if(d=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var M in C)w.set(M,C[M]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const F of C.keys())w.set(F,C.get(F));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(F=>F.toLowerCase()=="content-type"),M=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sj,p,void 0))||C||M||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,W]of w)this.g.setRequestHeader(F,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ev(this),this.u=!0,this.g.send(d),this.u=!1}catch(F){_v(this,F)}};function _v(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,bv(d),xu(d)}function bv(d){d.A||(d.A=!0,Ft(d,"complete"),Ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ft(this,"complete"),Ft(this,"abort"),xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xu(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tv(this):this.bb())},t.bb=function(){Tv(this)};function Tv(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ur(d)!=4||d.Z()!=2)){if(d.u&&ur(d)==4)qx(d.Ea,0,d);else if(Ft(d,"readystatechange"),ur(d)==4){d.h=!1;try{const W=d.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var w;if(!(w=p)){var C;if(C=W===0){var M=String(d.D).match(fv)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),C=!rj.test(M?M.toLowerCase():"")}w=C}if(w)Ft(d,"complete"),Ft(d,"success");else{d.m=6;try{var F=2<ur(d)?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.Z()+"]",bv(d)}}finally{xu(d)}}}}function xu(d,p){if(d.g){Ev(d);const w=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||Ft(d,"ready");try{w.onreadystatechange=C}catch{}}}function Ev(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ur(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),LC(p)}};function Nv(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ij(d){const p={};d=(d.g&&2<=ur(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(y(d[C]))continue;var w=D(d[C]);const M=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const F=p[M]||[];p[M]=F,F.push(w)}S(p,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ga(d,p,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||p}function Iv(d){this.Aa=0,this.i=[],this.j=new Ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ga("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ga("baseRetryDelayMs",5e3,d),this.cb=Ga("retryDelaySeedMs",1e4,d),this.Wa=Ga("forwardChannelMaxRetries",2,d),this.wa=Ga("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new av(d&&d.concurrentRequestLimit),this.Da=new tj,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Iv.prototype,t.la=8,t.G=1,t.connect=function(d,p,w,C){Ut(0),this.W=d,this.H=p||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Vv(this,null,this.W),wu(this)};function tm(d){if(Sv(d),d.G==3){var p=d.U++,w=cr(d.I);if(De(w,"SID",d.K),De(w,"RID",p),De(w,"TYPE","terminate"),Qa(d,w),p=new Kr(d,d.j,p),p.L=2,p.v=pu(cr(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=p.v,w=!0),w||(p.g=Lv(p.j,null),p.g.ea(p.v)),p.F=Date.now(),hu(p)}Dv(d)}function vu(d){d.g&&(rm(d),d.g.cancel(),d.g=null)}function Sv(d){vu(d),d.u&&(a.clearTimeout(d.u),d.u=null),_u(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function wu(d){if(!lv(d.h)&&!d.s){d.s=!0;var p=d.Ga;ke||G(),$||(ke(),$=!0),z.add(p,d),d.B=0}}function oj(d,p){return cv(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ua(m(d.Ga,d,p),Rv(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const M=new Kr(this,this.j,d);let F=this.o;if(this.S&&(F?(F=E(F),j(F,this.S)):F=this.S),this.m!==null||this.O||(M.H=F,F=null),this.P)e:{for(var p=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(p+=C,4096<p){p=w;break e}if(p===4096||w===this.i.length-1){p=w+1;break e}}p=1e3}else p=1e3;p=Cv(this,M,p),w=cr(this.I),De(w,"RID",d),De(w,"CVER",22),this.D&&De(w,"X-HTTP-Session-Id",this.D),Qa(this,w),F&&(this.O?p="headers="+encodeURIComponent(String(wv(F)))+"&"+p:this.m&&em(w,this.m,F)),Zf(this.h,M),this.Ua&&De(w,"TYPE","init"),this.P?(De(w,"$req",p),De(w,"SID","null"),M.T=!0,Qf(M,w,null)):Qf(M,w,p),this.G=2}}else this.G==3&&(d?kv(this,d):this.i.length==0||lv(this.h)||kv(this))};function kv(d,p){var w;p?w=p.l:w=d.U++;const C=cr(d.I);De(C,"SID",d.K),De(C,"RID",w),De(C,"AID",d.T),Qa(d,C),d.m&&d.o&&em(C,d.m,d.o),w=new Kr(d,d.j,w,d.B+1),d.m===null&&(w.H=d.o),p&&(d.i=p.D.concat(d.i)),p=Cv(d,w,1e3),w.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Zf(d.h,w),Qf(w,C,p)}function Qa(d,p){d.H&&R(d.H,function(w,C){De(p,C,w)}),d.l&&hv({},function(w,C){De(p,C,w)})}function Cv(d,p,w){w=Math.min(d.i.length,w);var C=d.l?m(d.l.Na,d.l,d):null;e:{var M=d.i;let F=-1;for(;;){const W=["count="+w];F==-1?0<w?(F=M[0].g,W.push("ofs="+F)):F=0:W.push("ofs="+F);let je=!0;for(let pt=0;pt<w;pt++){let _e=M[pt].g;const St=M[pt].map;if(_e-=F,0>_e)F=Math.max(0,M[pt].g-100),je=!1;else try{nj(St,W,"req"+_e+"_")}catch{C&&C(St)}}if(je){C=W.join("&");break e}}}return d=d.i.splice(0,w),p.D=d,C}function jv(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;ke||G(),$||(ke(),$=!0),z.add(p,d),d.v=0}}function nm(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ua(m(d.Fa,d),Rv(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Pv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ua(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),vu(this),Pv(this))};function rm(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Pv(d){d.g=new Kr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=cr(d.qa);De(p,"RID","rpc"),De(p,"SID",d.K),De(p,"AID",d.T),De(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&De(p,"TO",d.ja),De(p,"TYPE","xmlhttp"),Qa(d,p),d.m&&d.o&&em(p,d.m,d.o),d.L&&(d.g.I=d.L);var w=d.g;d=d.ia,w.L=1,w.v=pu(cr(p)),w.m=null,w.P=!0,sv(w,d)}t.Za=function(){this.C!=null&&(this.C=null,vu(this),nm(this),Ut(19))};function _u(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Av(d,p){var w=null;if(d.g==p){_u(d),rm(d),d.g=null;var C=2}else if(Xf(d.h,p))w=p.D,uv(d.h,p),C=1;else return;if(d.G!=0){if(p.o)if(C==1){w=p.m?p.m.length:0,p=Date.now()-p.F;var M=d.B;C=cu(),Ft(C,new ev(C,w)),wu(d)}else jv(d);else if(M=p.s,M==3||M==0&&0<p.X||!(C==1&&oj(d,p)||C==2&&nm(d)))switch(w&&0<w.length&&(p=d.h,p.i=p.i.concat(w)),M){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function Rv(d,p){let w=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(w*=2),w*p}function ei(d,p){if(d.j.info("Error code "+p),p==2){var w=m(d.fb,d),C=d.Xa;const M=!C;C=new Zs(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fu(C,"https"),pu(C),M?ZC(C.toString(),w):ej(C.toString(),w)}else Ut(2);d.G=0,d.l&&d.l.sa(p),Dv(d),Sv(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Dv(d){if(d.G=0,d.ka=[],d.l){const p=dv(d.h);(p.length!=0||d.i.length!=0)&&(T(d.ka,p),T(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function Vv(d,p,w){var C=w instanceof Zs?cr(w):new Zs(w);if(C.g!="")p&&(C.g=p+"."+C.g),mu(C,C.s);else{var M=a.location;C=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var F=new Zs(null);C&&fu(F,C),p&&(F.g=p),M&&mu(F,M),w&&(F.l=w),C=F}return w=d.D,p=d.ya,w&&p&&De(C,w,p),De(C,"VER",d.la),Qa(d,C),C}function Lv(d,p,w){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new Ye(new gu({eb:w})):new Ye(d.pa),p.Ha(d.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mv(){}t=Mv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bu(){}bu.prototype.g=function(d,p){return new cn(d,p)};function cn(d,p){It.call(this),this.g=new Iv(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!y(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new co(this)}v(cn,It),cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){tm(this.g)},cn.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.u&&(w={},w.__data__=zf(d),d=w);p.i.push(new zC(p.Ya++,d)),p.G==3&&wu(p)},cn.prototype.N=function(){this.g.l=null,delete this.j,tm(this.g),delete this.g,cn.aa.N.call(this)};function Ov(d){qf.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const w in p){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}v(Ov,qf);function Fv(){Kf.call(this),this.status=1}v(Fv,Kf);function co(d){this.g=d}v(co,Mv),co.prototype.ua=function(){Ft(this.g,"a")},co.prototype.ta=function(d){Ft(this.g,new Ov(d))},co.prototype.sa=function(d){Ft(this.g,new Fv)},co.prototype.ra=function(){Ft(this.g,"b")},bu.prototype.createWebChannel=bu.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,n2=function(){return new bu},t2=function(){return cu()},e2=Js,gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uu.NO_ERROR=0,uu.TIMEOUT=8,uu.HTTP_ERROR=6,wd=uu,tv.COMPLETE="complete",ZI=tv,Yx.EventType=Oa,Oa.OPEN="a",Oa.CLOSE="b",Oa.ERROR="c",Oa.MESSAGE="d",It.prototype.listen=It.prototype.K,El=Yx,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,XI=Ye}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const Mw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new sy("@firebase/firestore");function wo(){return Ri.logLevel}function H(t,...e){if(Ri.logLevel<=ge.DEBUG){const n=e.map(xy);Ri.debug(`Firestore (${Sa}): ${t}`,...n)}}function Ht(t,...e){if(Ri.logLevel<=ge.ERROR){const n=e.map(xy);Ri.error(`Firestore (${Sa}): ${t}`,...n)}}function Di(t,...e){if(Ri.logLevel<=ge.WARN){const n=e.map(xy);Ri.warn(`Firestore (${Sa}): ${t}`,...n)}}function xy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: `+t;throw Ht(e),new Error(e)}function ne(t,e){t||ee()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class AL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RL{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ne(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ne(typeof r.accessToken=="string"),new r2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new yt(e)}}class DL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class VL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ML{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ne(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.R=n.token,new LL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=OL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function la(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function i2(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Be(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new re(e)}static min(){return new re(new Be(0,0))}static max(){return new re(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends xc{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const FL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends xc{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return FL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(be.fromString(e))}static fromName(e){return new J(be.fromString(e).popFirst(5))}static empty(){return new J(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new be(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function yg(t){return t.fields.find(e=>e.kind===2)}function ai(t){return t.fields.filter(e=>e.kind!==2)}dh.UNKNOWN_ID=-1;class _d{constructor(e,n){this.fieldPath=e,this.kind=n}}class vc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new vc(0,pn.min())}}function UL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=re.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new pn(s,J.empty(),e)}function o2(t){return new pn(t.readTime,t.key,-1)}class pn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pn(re.min(),J.empty(),-1)}static max(){return new pn(re.max(),J.empty(),-1)}}function vy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==a2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Hn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ul(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=wy(r.target.error);this.V.reject(new Ul(e,s))}}static open(e,n,r,s){try{return new ff(n,e.transaction(s,r))}catch(i){throw new Ul(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new $L(n)}}class Is{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Is.S(lt())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return H("SimpleDb","Removing database:",e),di(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!hI())return!1;if(Is.v())return!0;const e=lt(),n=Is.S(e),r=0<n&&n<10,s=c2(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new Ul(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(U.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(U.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ul(e,o))},s.onupgradeneeded=i=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,s.transaction,i.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=ff.open(this.db,e,i?"readonly":"readwrite",r),c=s(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),O.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(H("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function c2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class BL{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return di(this.B.delete())}}class Ul extends K{constructor(e,n){super(U.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ws(t){return t.name==="IndexedDbTransactionError"}class $L{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(H("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),di(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),di(this.store.add(e))}get(e){return di(this.store.get(e)).next(n=>(n===void 0&&(n=null),H("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),di(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),di(this.store.count())}U(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new O((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(r),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new O((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}j(e,n){H("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const s=this.cursor(r);return this.W(s,(i,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.W(s,n)}Y(e){const n=this.cursor({});return new O((r,s)=>{n.onerror=i=>{const o=wy(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new O((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const c=new BL(a),u=n(a.primaryKey,a.value,c);if(u instanceof O){const h=u.catch(f=>(c.done(),O.reject(f)));r.push(h)}c.isDone?s():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function di(t){return new O((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=wy(r.target.error);n(s)}})}let Ow=!1;function wy(t){const e=Is.S(lt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ow||(Ow=!0,setTimeout(()=>{throw r},0)),r}}return t}class zL{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{H("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ws(n)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Qi(n)}await this.X(6e4)})}}class HL{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let s=n,i=!0;return O.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(s,i)).next(a=>(H("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=o2(i);vy(o,r)>0&&(r=o)}),new pn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}In.oe=-1;function Gc(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function qL(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fw(e)),e=KL(t.get(n),e);return Fw(e)}function KL(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Fw(t){return t+""}function Jn(t){const e=t.length;if(ne(e>=2),e===2)return ne(t.charAt(0)===""&&t.charAt(1)===""),be.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ee(),t.charAt(o+1)){case"":const a=t.substring(i,o);let c;s.length===0?c=a:(s+=a,c=s,s=""),r.push(c);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ee()}i=o+2}return new be(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t,e){return[t,Wt(e)]}function u2(t,e,n){return[t,Wt(e),n]}const WL={},GL=["prefixPath","collectionGroup","readTime","documentId"],QL=["prefixPath","collectionGroup","documentId"],YL=["collectionGroup","readTime","prefixPath","documentId"],JL=["canonicalId","targetId"],XL=["targetId","path"],ZL=["path","targetId"],eM=["collectionId","parent"],tM=["indexId","uid"],nM=["uid","sequenceNumber"],rM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sM=["indexId","uid","orderedDocumentKey"],iM=["userId","collectionPath","documentId"],oM=["userId","collectionPath","largestBatchId"],aM=["userId","collectionGroup","largestBatchId"],d2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lM=[...d2,"documentOverlays"],h2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],f2=h2,_y=[...f2,"indexConfiguration","indexState","indexEntries"],cM=_y,uM=[..._y,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends l2{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function ct(t,e){const n=ae(t);return Is.F(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){this.comparator=e,this.root=n||xt.EMPTY}insert(e,n){return new ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??xt.RED,this.left=s??xt.EMPTY,this.right=i??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new xt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new xt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $w(this.data.getIterator())}getIteratorFrom(e){return new $w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ce)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ce(this.comparator);return n.data=e,n}}class $w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new en([])}unionWith(e){let n=new Ce(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new p2("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const dM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(ne(!!t),typeof t=="string"){let e=0;const n=dM.exec(t);if(ne(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ty(t){const e=t.mapValue.fields.__previous_value__;return by(e)?Ty(e):e}function _c(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class Vi{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Td={nullValue:"NULL_VALUE"};function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?by(t)?4:g2(t)?9007199254740991:mf(t)?10:11:ee()}function ir(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _c(t).isEqual(_c(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),a=Or(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return As(s.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),a=Me(i.doubleValue);return o===a?wc(o)===wc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return la(t.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Bw(o)!==Bw(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ir(o[c],a[c])))return!1;return!0}(t,e);default:return ee()}}function bc(t,e){return(t.values||[]).find(n=>ir(n,e))!==void 0}function Rs(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Me(i.integerValue||i.doubleValue),c=Me(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return zw(t.timestampValue,e.timestampValue);case 4:return zw(_c(t),_c(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(i,o){const a=As(i),c=As(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=ue(a[u],c[u]);if(h!==0)return h}return ue(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ue(Me(i.latitude),Me(o.latitude));return a!==0?a:ue(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Hw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},m=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,x=ue(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Hw(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ms.mapValue&&o===ms.mapValue)return 0;if(i===ms.mapValue)return 1;if(o===ms.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=ue(c[f],h[f]);if(m!==0)return m;const g=Rs(a[c[f]],u[h[f]]);if(g!==0)return g}return ue(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function zw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Or(t),r=Or(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function Hw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Rs(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function ca(t){return vg(t)}function vg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=vg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${vg(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function Tc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wg(t){return!!t&&"integerValue"in t}function Ec(t){return!!t&&"arrayValue"in t}function qw(t){return!!t&&"nullValue"in t}function Kw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ed(t){return!!t&&"mapValue"in t}function mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Bl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const y2={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fM(t){return"nullValue"in t?Td:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Tc(Vi.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?mf(t)?y2:{mapValue:{}}:ee()}function mM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Tc(Vi.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?y2:"mapValue"in t?mf(t)?{mapValue:{}}:ms:ee()}function Ww(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Gw(t,e){const n=Rs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bl(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Bl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ed(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt(Bl(this.value))}}function x2(t){const e=[];return Yi(t.fields,(n,r)=>{const s=new qe([n]);if(Ed(r)){const i=x2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Fe(e,0,re.min(),re.min(),re.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new Fe(e,1,n,re.min(),r,s,0)}static newNoDocument(e,n){return new Fe(e,2,n,re.min(),re.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new Fe(e,3,n,re.min(),re.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.position=e,this.inclusive=n}}function Qw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Rs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function pM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{}class ye extends v2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new gM(e,n,r):n==="array-contains"?new vM(e,r):n==="in"?new N2(e,r):n==="not-in"?new wM(e,r):n==="array-contains-any"?new _M(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yM(e,r):new xM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Rs(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(Rs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ie extends v2{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ie(e,n)}matches(e){return da(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function da(t){return t.op==="and"}function _g(t){return t.op==="or"}function Ey(t){return w2(t)&&da(t)}function w2(t){for(const e of t.filters)if(e instanceof Ie)return!1;return!0}function bg(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+ca(t.value);if(Ey(t))return t.filters.map(e=>bg(e)).join(",");{const e=t.filters.map(n=>bg(n)).join(",");return`${t.op}(${e})`}}function _2(t,e){return t instanceof ye?function(r,s){return s instanceof ye&&r.op===s.op&&r.field.isEqual(s.field)&&ir(r.value,s.value)}(t,e):t instanceof Ie?function(r,s){return s instanceof Ie&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&_2(o,s.filters[a]),!0):!1}(t,e):void ee()}function b2(t,e){const n=t.filters.concat(e);return Ie.create(n,t.op)}function T2(t){return t instanceof ye?function(n){return`${n.field.canonicalString()} ${n.op} ${ca(n.value)}`}(t):t instanceof Ie?function(n){return n.op.toString()+" {"+n.getFilters().map(T2).join(" ,")+"}"}(t):"Filter"}class gM extends ye{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class yM extends ye{constructor(e,n){super(e,"in",n),this.keys=E2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xM extends ye{constructor(e,n){super(e,"not-in",n),this.keys=E2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function E2(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class vM extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ec(n)&&bc(n.arrayValue,this.value)}}class N2 extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bc(this.value.arrayValue,n)}}class wM extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!bc(this.value.arrayValue,n)}}class _M extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ec(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function Tg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new bM(t,e,n,r,s,i,o)}function Mi(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ca(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ca(r)).join(",")),e.ue=n}return e.ue}function Qc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yw(t.startAt,e.startAt)&&Yw(t.endAt,e.endAt)}function hh(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fh(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function Jw(t,e,n){let r=Td,s=!0;for(const i of fh(t,e)){let o=Td,a=!0;switch(i.op){case"<":case"<=":o=fM(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=Td}Ww({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Ww({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Xw(t,e,n){let r=ms,s=!0;for(const i of fh(t,e)){let o=ms,a=!0;switch(i.op){case">=":case">":o=mM(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=ms}Gw({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Gw({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TM(t,e,n,r,s,i,o,a){return new ka(t,e,n,r,s,i,o,a)}function Yc(t){return new ka(t)}function Zw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function I2(t){return t.collectionGroup!==null}function $l(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ce(qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Nc(i,r))}),n.has(qe.keyField().canonicalString())||e.ce.push(new Nc(qe.keyField(),r))}return e.ce}function kn(t){const e=ae(t);return e.le||(e.le=EM(e,$l(t))),e.le}function EM(t,e){if(t.limitType==="F")return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Nc(s.field,i)});const n=t.endAt?new ua(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ua(t.startAt.position,t.startAt.inclusive):null;return Tg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Eg(t,e){const n=t.filters.concat([e]);return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mh(t,e,n){return new ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function pf(t,e){return Qc(kn(t),kn(e))&&t.limitType===e.limitType}function S2(t){return`${Mi(kn(t))}|lt:${t.limitType}`}function _o(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>T2(s)).join(", ")}]`),Gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ca(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ca(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Jc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $l(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=Qw(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,$l(r),s)||r.endAt&&!function(o,a,c){const u=Qw(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,$l(r),s))}(t,e)}function NM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function k2(t){return(e,n)=>{let r=!1;for(const s of $l(t)){const i=IM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IM(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?Rs(c,u):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return m2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new ze(J.comparator);function hn(){return SM}const C2=new ze(J.comparator);function Nl(...t){let e=C2;for(const n of t)e=e.insert(n.key,n);return e}function j2(t){let e=C2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xn(){return zl()}function P2(){return zl()}function zl(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const kM=new ze(J.comparator),CM=new Ce(J.comparator);function fe(...t){let e=CM;for(const n of t)e=e.add(n);return e}const jM=new Ce(ue);function PM(){return jM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ny(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function A2(t){return{integerValue:""+t}}function R2(t,e){return qL(e)?A2(e):Ny(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function AM(t,e,n){return t instanceof ha?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&by(i)&&(i=Ty(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Oi?V2(t,e):t instanceof Fi?L2(t,e):function(s,i){const o=D2(s,i),a=e_(o)+e_(s.Pe);return wg(o)&&wg(s.Pe)?A2(a):Ny(s.serializer,a)}(t,e)}function RM(t,e,n){return t instanceof Oi?V2(t,e):t instanceof Fi?L2(t,e):n}function D2(t,e){return t instanceof fa?function(r){return wg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ha extends gf{}class Oi extends gf{constructor(e){super(),this.elements=e}}function V2(t,e){const n=M2(e);for(const r of t.elements)n.some(s=>ir(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fi extends gf{constructor(e){super(),this.elements=e}}function L2(t,e){let n=M2(e);for(const r of t.elements)n=n.filter(s=>!ir(s,r));return{arrayValue:{values:n}}}class fa extends gf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function e_(t){return Me(t.integerValue||t.doubleValue)}function M2(t){return Ec(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.field=e,this.transform=n}}function DM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Oi&&s instanceof Oi||r instanceof Fi&&s instanceof Fi?la(r.elements,s.elements,ir):r instanceof fa&&s instanceof fa?ir(r.Pe,s.Pe):r instanceof ha&&s instanceof ha}(t.transform,e.transform)}class VM{constructor(e,n){this.version=e,this.transformResults=n}}class Ue{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yf{}function O2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ja(t.key,Ue.none()):new Ca(t.key,t.data,Ue.none());{const n=t.data,r=vt.empty();let s=new Ce(qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $r(t.key,r,new en(s.toArray()),Ue.none())}}function LM(t,e,n){t instanceof Ca?function(s,i,o){const a=s.value.clone(),c=n_(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof $r?function(s,i,o){if(!Nd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=n_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(F2(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hl(t,e,n,r){return t instanceof Ca?function(i,o,a,c){if(!Nd(i.precondition,o))return a;const u=i.value.clone(),h=r_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $r?function(i,o,a,c){if(!Nd(i.precondition,o))return a;const u=r_(i.fieldTransforms,c,o),h=o.data;return h.setAll(F2(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Nd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=D2(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function t_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&la(r,s,(i,o)=>DM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends yf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $r extends yf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function F2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function n_(t,e,n){const r=new Map;ne(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,RM(o,a,n[s]))}return r}function r_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,AM(i,o,e))}return r}class ja extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iy extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=P2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=O2(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(n,r)=>t_(n,r))&&la(this.baseMutations,e.baseMutations,(n,r)=>t_(n,r))}}class ky{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ne(e.mutations.length===r.length);let s=function(){return kM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ky(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt,ve;function U2(t){switch(t){default:return ee();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function B2(t){if(t===void 0)return Ht("GRPC error has no .code"),U.UNKNOWN;switch(t){case tt.OK:return U.OK;case tt.CANCELLED:return U.CANCELLED;case tt.UNKNOWN:return U.UNKNOWN;case tt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case tt.INTERNAL:return U.INTERNAL;case tt.UNAVAILABLE:return U.UNAVAILABLE;case tt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case tt.NOT_FOUND:return U.NOT_FOUND;case tt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case tt.ABORTED:return U.ABORTED;case tt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case tt.DATA_LOSS:return U.DATA_LOSS;default:return ee()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new Ti([4294967295,4294967295],0);function s_(t){const e=FM().encode(t),n=new JI;return n.update(e),new Uint8Array(n.digest())}function i_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([s,i],0)]}class jy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Il(`Invalid padding: ${n}`);if(r<0)throw new Il(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Il(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Il(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ti.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ti.fromNumber(r)));return s.compare(UM)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=s_(e),[r,s]=i_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jy(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=s_(e),[r,s]=i_(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Il extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xf(re.min(),s,new ze(ue),hn(),fe())}}class Zc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zc(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class $2{constructor(e,n){this.targetId=e,this.me=n}}class z2{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class o_{constructor(){this.fe=0,this.ge=l_(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new Zc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=l_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ne(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BM{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=a_(),this.Qe=new ze(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(hh(i))if(r===0){const o=new J(i.path);this.Ue(n,o,Fe.newNoDocument(o,re.min()))}else ne(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=As(r).toUint8Array()}catch(c){if(c instanceof p2)return Di("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jy(o,s,i)}catch(c){return Di(c instanceof Il?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&hh(a.target)){const c=new J(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Fe.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=fe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new xf(e,n,this.Qe,this.ke,r);return this.ke=hn(),this.qe=a_(),this.Qe=new ze(ue),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new o_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ce(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new o_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function a_(){return new ze(J.comparator)}function l_(){return new ze(J.comparator)}const $M={asc:"ASCENDING",desc:"DESCENDING"},zM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HM={and:"AND",or:"OR"};class qM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ng(t,e){return t.useProto3Json||Gc(e)?e:{value:e}}function ma(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KM(t,e){return ma(t,e.toTimestamp())}function mt(t){return ne(!!t),re.fromTimestamp(function(n){const r=Or(n);return new Be(r.seconds,r.nanos)}(t))}function Py(t,e){return Ig(t,e).canonicalString()}function Ig(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q2(t){const e=be.fromString(t);return ne(eS(e)),e}function Ic(t,e){return Py(t.databaseId,e.path)}function Ir(t,e){const n=q2(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(G2(n))}function K2(t,e){return Py(t.databaseId,e)}function W2(t){const e=q2(t);return e.length===4?be.emptyPath():G2(e)}function Sg(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G2(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function c_(t,e,n){return{name:Ic(t,e),fields:n.value.mapValue.fields}}function WM(t,e,n){const r=Ir(t,e.name),s=mt(e.updateTime),i=e.createTime?mt(e.createTime):re.min(),o=new vt({mapValue:{fields:e.fields}}),a=Fe.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function GM(t,e){return"found"in e?function(r,s){ne(!!s.found),s.found.name,s.found.updateTime;const i=Ir(r,s.found.name),o=mt(s.found.updateTime),a=s.found.createTime?mt(s.found.createTime):re.min(),c=new vt({mapValue:{fields:s.found.fields}});return Fe.newFoundDocument(i,o,a,c)}(t,e):"missing"in e?function(r,s){ne(!!s.missing),ne(!!s.readTime);const i=Ir(r,s.missing),o=mt(s.readTime);return Fe.newNoDocument(i,o)}(t,e):ee()}function QM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ne(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(ne(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?U.UNKNOWN:B2(u.code);return new K(h,u.message||"")}(o);n=new z2(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ir(t,r.document.name),i=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):re.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=Fe.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Id(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ir(t,r.document),i=r.readTime?mt(r.readTime):re.min(),o=Fe.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Id([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ir(t,r.document),i=r.removedTargetIds||[];n=new Id([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new OM(s,i),a=r.targetId;n=new $2(a,o)}}return n}function Sc(t,e){let n;if(e instanceof Ca)n={update:c_(t,e.key,e.value)};else if(e instanceof ja)n={delete:Ic(t,e.key)};else if(e instanceof $r)n={update:c_(t,e.key,e.data),updateMask:tO(e.fieldMask)};else{if(!(e instanceof Iy))return ee();n={verify:Ic(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Oi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:KM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function kg(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?Ue.updateTime(mt(i.updateTime)):i.exists!==void 0?Ue.exists(i.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let c=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME"),c=new ha;else if("appendMissingElements"in a){const h=a.appendMissingElements.values||[];c=new Oi(h)}else if("removeAllFromArray"in a){const h=a.removeAllFromArray.values||[];c=new Fi(h)}else"increment"in a?c=new fa(o,a.increment):ee();const u=qe.fromServerFormat(a.fieldPath);return new Xc(u,c)}(t,s)):[];if(e.update){e.update.name;const s=Ir(t,e.update.name),i=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new en(u.map(h=>qe.fromServerFormat(h)))}(e.updateMask);return new $r(s,i,o,n,r)}return new Ca(s,i,n,r)}if(e.delete){const s=Ir(t,e.delete);return new ja(s,n)}if(e.verify){const s=Ir(t,e.verify);return new Iy(s,n)}return ee()}function YM(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?mt(s.updateTime):mt(i);return o.isEqual(re.min())&&(o=mt(i)),new VM(o,s.transformResults||[])}(n,e))):[]}function Q2(t,e){return{documents:[K2(t,e.path)]}}function Y2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K2(t,s);const i=function(u){if(u.length!==0)return Z2(Ie.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:bo(m.field),direction:XM(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ng(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function J2(t){let e=W2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ne(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=X2(f);return m instanceof Ie&&Ey(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(v){return new Nc(To(v.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Gc(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new ua(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new ua(g,m)}(n.endAt)),TM(e,s,o,i,a,"F",c,u)}function JM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=To(n.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=To(n.unaryFilter.field);return ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=To(n.unaryFilter.field);return ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=To(n.unaryFilter.field);return ye.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return ye.create(To(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ie.create(n.compositeFilter.filters.map(r=>X2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function XM(t){return $M[t]}function ZM(t){return zM[t]}function eO(t){return HM[t]}function bo(t){return{fieldPath:t.canonicalString()}}function To(t){return qe.fromServerFormat(t.fieldPath)}function Z2(t){return t instanceof ye?function(n){if(n.op==="=="){if(Kw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NAN"}};if(qw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NAN"}};if(qw(n.value))return{unaryFilter:{field:bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(n.field),op:ZM(n.op),value:n.value}}}(t):t instanceof Ie?function(n){const r=n.getFilters().map(s=>Z2(s));return r.length===1?r[0]:{compositeFilter:{op:eO(n.op),filters:r}}}(t):ee()}function tO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,s,i=re.min(),o=re.min(),a=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.ct=e}}function nO(t,e){let n;if(e.document)n=WM(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=J.fromSegments(e.noDocument.path),s=Bi(e.noDocument.readTime);n=Fe.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ee();{const r=J.fromSegments(e.unknownDocument.path),s=Bi(e.unknownDocument.version);n=Fe.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new Be(s[0],s[1]);return re.fromTimestamp(i)}(e.readTime)),n}function u_(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ph(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:Ic(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ma(i,o.version.toTimestamp()),createTime:ma(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return ee();r.unknownDocument={path:n.path.toArray(),version:Ui(e.version)}}return r}function ph(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bi(t){const e=new Be(t.seconds,t.nanoseconds);return re.fromTimestamp(e)}function hi(t,e){const n=(e.baseMutations||[]).map(i=>kg(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>kg(t.ct,i)),s=Be.fromMillis(e.localWriteTimeMs);return new Sy(e.batchId,s,n,r)}function Sl(t){const e=Bi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Bi(t.lastLimboFreeSnapshotVersion):re.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return ne(i.documents.length===1),kn(Yc(W2(i.documents[0])))}(t.query):function(i){return kn(J2(i))}(t.query),new br(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,st.fromBase64String(t.resumeToken))}function nS(t,e){const n=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion);let s;s=hh(e.target)?Q2(t.ct,e.target):Y2(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mi(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function rS(t){const e=J2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mh(e,e.limit,"L"):e}function Fm(t,e){return new Cy(e.largestBatchId,kg(t.ct,e.overlayMutation))}function d_(t,e){const n=e.path.lastSegment();return[t,Wt(e.path.popLast()),n]}function h_(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ui(r.readTime),documentKey:Wt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{getBundleMetadata(e,n){return f_(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:Bi(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return f_(e).put(function(s){return{bundleId:s.id,createTime:Ui(mt(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return m_(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:rS(i.bundledQuery),readTime:Bi(i.readTime)}}(r)})}saveNamedQuery(e,n){return m_(e).put(function(s){return{name:s.name,readTime:Ui(mt(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function f_(t){return ct(t,"bundles")}function m_(t){return ct(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new vf(e,r)}getOverlay(e,n){return sl(e).get(d_(this.userId,n)).next(r=>r?Fm(this.serializer,r):null)}getOverlays(e,n){const r=Xn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Cy(n,o);s.push(this.ht(e,a))}),O.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Wt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(sl(e).j("collectionPathOverlayIndex",a))}),O.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Xn(),i=Wt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return sl(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=Fm(this.serializer,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Xn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,h)=>{const f=Fm(this.serializer,u);i.size()<s||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):h.done()}).next(()=>i)}ht(e,n){return sl(e).put(function(s,i,o){const[a,c,u]=d_(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Sc(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function sl(t){return ct(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{Pt(e){return ct(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?st.fromUint8Array(r):st.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Me(e.integerValue));else if("doubleValue"in e){const r=Me(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),wc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(As(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?g2(e)?this.dt(n,Number.MAX_SAFE_INTEGER):mf(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ee()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const s of Object.keys(r))this.Vt(s,n),this.Tt(r[s],n)}wt(e,n){var r,s;const i=e.fields||{};this.dt(n,53);const o="value",a=((s=(r=i[o].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.length)||0;this.dt(n,15),n.At(Me(a)),this.Vt(o,n),this.Tt(i[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const s of r)this.Tt(s,n)}yt(e,n){this.dt(n,37),J.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}fi.vt=new fi;function iO(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function p_(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=iO(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class oO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const s=n.codePointAt(0);this.Ft(240|s>>>18),this.Ft(128|63&s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const s=n.codePointAt(0);this.Ot(240|s>>>18),this.Ot(128|63&s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s)}}this.Nt()}kt(e){const n=this.qt(e),r=p_(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}Kt(e){const n=this.qt(e),r=p_(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ft(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class aO{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class lO{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class il{constructor(){this.jt=new oO,this.Ht=new aO(this.jt),this.Jt=new lO(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Zt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mi(this.indexId,this.documentKey,this.arrayValue,r)}}function Jr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=g_(t.arrayValue,e.arrayValue),n!==0?n:(n=g_(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function g_(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e){this.Xt=new Ce((n,r)=>qe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ne(e.collectionGroup===this.collectionId),this.nn)return!1;const n=yg(e);if(n!==void 0&&!this.sn(n))return!1;const r=ai(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.sn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const c=r[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ce(qe.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new _d(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new _d(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new _d(r.field,r.dir==="asc"?0:1)));return new dh(dh.UNKNOWN_ID,this.collectionId,n,vc.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t){var e,n;if(ne(t instanceof ye||t instanceof Ie),t instanceof ye){if(t instanceof N2){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>ye.create(t.field,"==",i)))||[];return Ie.create(s,"or")}return t}const r=t.filters.map(s=>sS(s));return Ie.create(r,t.op)}function cO(t){if(t.getFilters().length===0)return[];const e=Pg(sS(t));return ne(iS(e)),Cg(e)||jg(e)?[e]:e.getFilters()}function Cg(t){return t instanceof ye}function jg(t){return t instanceof Ie&&Ey(t)}function iS(t){return Cg(t)||jg(t)||function(n){if(n instanceof Ie&&_g(n)){for(const r of n.getFilters())if(!Cg(r)&&!jg(r))return!1;return!0}return!1}(t)}function Pg(t){if(ne(t instanceof ye||t instanceof Ie),t instanceof ye)return t;if(t.filters.length===1)return Pg(t.filters[0]);const e=t.filters.map(r=>Pg(r));let n=Ie.create(e,t.op);return n=gh(n),iS(n)?n:(ne(n instanceof Ie),ne(da(n)),ne(n.filters.length>1),n.filters.reduce((r,s)=>Ay(r,s)))}function Ay(t,e){let n;return ne(t instanceof ye||t instanceof Ie),ne(e instanceof ye||e instanceof Ie),n=t instanceof ye?e instanceof ye?function(s,i){return Ie.create([s,i],"and")}(t,e):x_(t,e):e instanceof ye?x_(e,t):function(s,i){if(ne(s.filters.length>0&&i.filters.length>0),da(s)&&da(i))return b2(s,i.getFilters());const o=_g(s)?s:i,a=_g(s)?i:s,c=o.filters.map(u=>Ay(u,a));return Ie.create(c,"or")}(t,e),gh(n)}function x_(t,e){if(da(e))return b2(e,t.getFilters());{const n=e.filters.map(r=>Ay(t,r));return Ie.create(n,"or")}}function gh(t){if(ne(t instanceof ye||t instanceof Ie),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return gh(e[0]);if(w2(t))return t;const n=e.map(s=>gh(s)),r=[];return n.forEach(s=>{s instanceof ye?r.push(s):s instanceof Ie&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ie.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.un=new Ry}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(pn.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(pn.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class Ry{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ce(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ce(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Uint8Array(0);class dO{constructor(e,n){this.databaseId=n,this.cn=new Ry,this.ln=new Gs(r=>Mi(r),(r,s)=>Qc(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const i={collectionId:r,parent:Wt(s)};return v_(e).put(i)}return O.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[i2(n),""],!1,!0);return v_(e).U(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Jn(o.parent))}return r})}addFieldIndex(e,n){const r=ol(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=po(e);return i.next(a=>{o.put(h_(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=ol(e),s=po(e),i=mo(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=ol(e),r=mo(e),s=po(e);return n.j().next(()=>r.j()).next(()=>s.j())}createTargetIndexes(e,n){return O.forEach(this.hn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new y_(r).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=mo(e);let s=!0;const i=new Map;return O.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=fe();const a=[];return O.forEach(i,(c,u)=>{H("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(I=>`${I.fieldPath}:${I.kind}`).join(",")}`}(c)} to execute ${Mi(n)}`);const h=function(_,I){const A=yg(I);if(A===void 0)return null;for(const R of fh(_,A.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(u,c),f=function(_,I){const A=new Map;for(const R of ai(I))for(const S of fh(_,R.fieldPath))switch(S.op){case"==":case"in":A.set(R.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return A.set(R.fieldPath.canonicalString(),S.value),Array.from(A.values())}return null}(u,c),m=function(_,I){const A=[];let R=!0;for(const S of ai(I)){const E=S.kind===0?Jw(_,S.fieldPath,_.startAt):Xw(_,S.fieldPath,_.startAt);A.push(E.value),R&&(R=E.inclusive)}return new ua(A,R)}(u,c),g=function(_,I){const A=[];let R=!0;for(const S of ai(I)){const E=S.kind===0?Xw(_,S.fieldPath,_.endAt):Jw(_,S.fieldPath,_.endAt);A.push(E.value),R&&(R=E.inclusive)}return new ua(A,R)}(u,c),v=this.In(c,u,m),x=this.In(c,u,g),T=this.Tn(c,u,f),b=this.En(c.indexId,h,v,m.inclusive,x,g.inclusive,T);return O.forEach(b,y=>r.G(y,n.limit).next(_=>{_.forEach(I=>{const A=J.fromSegments(I.documentKey);o.has(A)||(o=o.add(A),a.push(A))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=cO(Ie.create(e.filters,"and")).map(r=>Tg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,s,i,o,a){const c=(n!=null?n.length:1)*Math.max(r.length,i.length),u=c/(n!=null?n.length:1),h=[];for(let f=0;f<c;++f){const m=n?this.dn(n[f/u]):qu,g=this.An(e,m,r[f%u],s),v=this.Rn(e,m,i[f%u],o),x=a.map(T=>this.An(e,m,T,!0));h.push(...this.createRange(g,v,x))}return h}An(e,n,r,s){const i=new mi(e,J.empty(),n,r);return s?i:i.Zt()}Rn(e,n,r,s){const i=new mi(e,J.empty(),n,r);return s?i.Zt():i}Pn(e,n){const r=new y_(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.hn(n);return O.forEach(s,i=>this.Pn(e,i).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Ce(qe.comparator),h=!1;for(const f of c.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:u=u.add(m.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}Vn(e,n){const r=new il;for(const s of ai(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Yt(s.kind);fi.vt.It(i,o)}return r.zt()}dn(e){const n=new il;return fi.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new il;return fi.vt.It(Tc(this.databaseId,n),r.Yt(function(i){const o=ai(i);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let s=[];s.push(new il);let i=0;for(const o of ai(e)){const a=r[i++];for(const c of s)if(this.fn(n,o.fieldPath)&&Ec(a))s=this.gn(s,o,a);else{const u=c.Yt(o.kind);fi.vt.It(a,u)}}return this.pn(s)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const c=new il;c.seed(a.zt()),fi.vt.It(o,c.Yt(n.kind)),i.push(c)}return i}fn(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=ol(e),s=po(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(i=>{const o=[];return O.forEach(i,a=>s.get([a.indexId,this.uid]).next(c=>{o.push(function(h,f){const m=f?new vc(f.sequenceNumber,new pn(Bi(f.readTime),new J(Jn(f.documentKey)),f.largestBatchId)):vc.empty(),g=h.fields.map(([v,x])=>new _d(qe.fromServerFormat(v),x));return new dh(h.indexId,h.collectionGroup,g,m)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:ue(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=ol(e),i=po(e);return this.yn(e).next(o=>s.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>O.forEach(a,c=>i.put(h_(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return O.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),O.forEach(a,c=>this.wn(e,s,c).next(u=>{const h=this.Sn(i,c);return u.isEqual(h)?O.resolve():this.bn(e,i,c,u,h)}))))})}Dn(e,n,r,s){return mo(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,s){return mo(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const s=mo(e);let i=new Ce(Jr);return s.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{i=i.add(new mi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,n){let r=new Ce(Jr);const s=this.Vn(n,e);if(s==null)return r;const i=yg(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ec(o))for(const a of o.arrayValue.values||[])r=r.add(new mi(n.indexId,e.key,this.dn(a),s))}else r=r.add(new mi(n.indexId,e.key,qu,s));return r}bn(e,n,r,s,i){H("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(c,u,h,f,m){const g=c.getIterator(),v=u.getIterator();let x=fo(g),T=fo(v);for(;x||T;){let b=!1,y=!1;if(x&&T){const _=h(x,T);_<0?y=!0:_>0&&(b=!0)}else x!=null?y=!0:b=!0;b?(f(T),T=fo(v)):y?(m(x),x=fo(g)):(x=fo(g),T=fo(v))}}(s,i,Jr,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),O.waitFor(o)}yn(e){let n=1;return po(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Jr(o,a)).filter((o,a,c)=>!a||Jr(o,c[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Jr(o,e),c=Jr(o,n);if(a===0)s[0]=e.Zt();else if(a>0&&c<0)s.push(o),s.push(o.Zt());else if(c>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Cn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,qu,[]],c=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,qu,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,n){return Jr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(w_)}getMinOffset(e,n){return O.mapArray(this.hn(n),r=>this.Pn(e,r).next(s=>s||ee())).next(w_)}}function v_(t){return ct(t,"collectionParents")}function mo(t){return ct(t,"indexEntries")}function ol(t){return ct(t,"indexConfiguration")}function po(t){return ct(t,"indexState")}function w_(t){ne(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;vy(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new pn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.J({range:o},(h,f,m)=>(a++,m.delete()));i.push(c.next(()=>{ne(a===1)}));const u=[];for(const h of n.mutations){const f=u2(e,h.key.path,n.batchId);i.push(s.delete(f)),u.push(h.key)}return O.waitFor(i).next(()=>u)}function yh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ee();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);class wf{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Fn={}}static lt(e,n,r,s){ne(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new wf(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).J({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Eo(e),o=Xr(e);return o.add({}).next(a=>{ne(typeof a=="number");const c=new Sy(a,n,r,s),u=function(g,v,x){const T=x.baseMutations.map(y=>Sc(g.ct,y)),b=x.mutations.map(y=>Sc(g.ct,y));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:T,mutations:b}}(this.serializer,this.userId,c),h=[];let f=new Ce((m,g)=>ue(m.canonicalString(),g.canonicalString()));for(const m of s){const g=u2(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),h.push(o.put(u)),h.push(i.put(g,WL))}return f.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),O.waitFor(h).next(()=>c)})}lookupMutationBatch(e,n){return Xr(e).get(n).next(r=>r?(ne(r.userId===this.userId),hi(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?O.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Fn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Xr(e).J({index:"userMutationsIndex",range:s},(o,a,c)=>{a.userId===this.userId&&(ne(a.batchId>=r),i=hi(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xr(e).J({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).U("userMutationsIndex",n).next(r=>r.map(s=>hi(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=bd(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Eo(e).J({range:s},(o,a,c)=>{const[u,h,f]=o,m=Jn(h);if(u===this.userId&&n.path.isEqual(m))return Xr(e).get(f).next(g=>{if(!g)throw ee();ne(g.userId===this.userId),i.push(hi(this.serializer,g))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(ue);const s=[];return n.forEach(i=>{const o=bd(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Eo(e).J({range:a},(u,h,f)=>{const[m,g,v]=u,x=Jn(g);m===this.userId&&i.path.isEqual(x)?r=r.add(v):f.done()});s.push(c)}),O.waitFor(s).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=bd(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Ce(ue);return Eo(e).J({range:o},(c,u,h)=>{const[f,m,g]=c,v=Jn(m);f===this.userId&&r.isPrefixOf(v)?v.length===s&&(a=a.add(g)):h.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],s=[];return n.forEach(i=>{s.push(Xr(e).get(i).next(o=>{if(o===null)throw ee();ne(o.userId===this.userId),r.push(hi(this.serializer,o))}))}),O.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return oS(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),O.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return O.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Eo(e).J({range:r},(i,o,a)=>{if(i[0]===this.userId){const c=Jn(i[1]);s.push(c)}else a.done()}).next(()=>{ne(s.length===0)})})}containsKey(e,n){return aS(e,this.userId,n)}Nn(e){return lS(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function aS(t,e,n){const r=bd(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Eo(t).J({range:i,H:!0},(a,c,u)=>{const[h,f,m]=a;h===e&&f===s&&(o=!0),u.done()}).next(()=>o)}function Xr(t){return ct(t,"mutations")}function Eo(t){return ct(t,"documentMutations")}function lS(t){return ct(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $i(0)}static kn(){return new $i(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new $i(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>re.fromTimestamp(new Be(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Qn(e,s)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>go(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(ne(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return go(e).J((o,a)=>{const c=Sl(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(s++,i.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(i)).next(()=>s)}forEachTarget(e,n){return go(e).J((r,s)=>{const i=Sl(s);n(i)})}qn(e){return b_(e).get("targetGlobalKey").next(n=>(ne(n!==null),n))}Qn(e,n){return b_(e).put("targetGlobalKey",n)}Kn(e,n){return go(e).put(nS(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Mi(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return go(e).J({range:s,index:"queryTargetsIndex"},(o,a,c)=>{const u=Sl(a);Qc(n,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=cs(e);return n.forEach(o=>{const a=Wt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(s)}removeMatchingKeys(e,n,r){const s=cs(e);return O.forEach(n,i=>{const o=Wt(i.path);return O.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=cs(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=cs(e);let i=fe();return s.J({range:r,H:!0},(o,a,c)=>{const u=Jn(o[1]),h=new J(u);i=i.add(h)}).next(()=>i)}containsKey(e,n){const r=Wt(n.path),s=IDBKeyRange.bound([r],[i2(r)],!1,!0);let i=0;return cs(e).J({index:"documentTargetsIndex",H:!0,range:s},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,n){return go(e).get(n).next(r=>r?Sl(r):null)}}function go(t){return ct(t,"targets")}function b_(t){return ct(t,"targetGlobal")}function cs(t){return ct(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_([t,e],[n,r]){const s=ue(t,n);return s===0?ue(e,r):s}class fO{constructor(e){this.Un=e,this.buffer=new Ce(T_),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();T_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class mO{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Hn(3e5)})}}class pO{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(In.oe);const r=new fO(n);return this.Jn.forEachTarget(e,s=>r.zn(s.sequenceNumber)).next(()=>this.Jn.Zn(e,s=>r.zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(__)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),__):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),wo()<=ge.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function gO(t,e){return new pO(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.db=e,this.garbageCollector=gO(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,s)=>n(s))}addReference(e,n,r){return Ku(e,r)}removeReference(e,n,r){return Ku(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Ku(e,n)}nr(e,n){return function(s,i){let o=!1;return lS(s).Y(a=>aS(s,a,i).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.tr(e,(o,a)=>{if(a<=n){const c=this.nr(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,re.min()),cs(e).delete(function(f){return[0,Wt(f.path)]}(o))))});s.push(c)}}).next(()=>O.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Ku(e,n)}tr(e,n){const r=cs(e);let s,i=In.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==In.oe&&n(new J(Jn(s)),i),i=u,s=c):i=In.oe}).next(()=>{i!==In.oe&&n(new J(Jn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ku(t,e){return cs(t).put(function(r,s){return{targetId:0,path:Wt(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ti(e).put(r)}removeEntry(e,n,r){return ti(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ph(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Fe.newInvalidDocument(n);return ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(al(n))},(s,i)=>{r=this.ir(n,i)}).next(()=>r)}sr(e,n){let r={size:0,document:Fe.newInvalidDocument(n)};return ti(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(al(n))},(s,i)=>{r={document:this.ir(n,i),size:yh(i)}}).next(()=>r)}getEntries(e,n){let r=hn();return this._r(e,n,(s,i)=>{const o=this.ir(s,i);r=r.insert(s,o)}).next(()=>r)}ar(e,n){let r=hn(),s=new ze(J.comparator);return this._r(e,n,(i,o)=>{const a=this.ir(i,o);r=r.insert(i,a),s=s.insert(i,yh(o))}).next(()=>({documents:r,ur:s}))}_r(e,n,r){if(n.isEmpty())return O.resolve();let s=new Ce(I_);n.forEach(c=>s=s.add(c));const i=IDBKeyRange.bound(al(s.first()),al(s.last())),o=s.getIterator();let a=o.getNext();return ti(e).J({index:"documentKeyIndex",range:i},(c,u,h)=>{const f=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&I_(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?h.$(al(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ph(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ti(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let h=hn();for(const f of u){const m=this.ir(J.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(Jc(n,m)||s.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,n,r,s){let i=hn();const o=N_(n,r),a=N_(n,pn.max());return ti(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,h)=>{const f=this.ir(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===s&&h.done()}).next(()=>i)}newChangeBuffer(e){return new vO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return E_(e).get("remoteDocumentGlobalKey").next(n=>(ne(!!n),n))}rr(e,n){return E_(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=nO(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(re.min())))return r}return Fe.newInvalidDocument(e)}}function uS(t){return new xO(t)}class vO extends cS{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Gs(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Ce((i,o)=>ue(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(n.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=u_(this.cr.serializer,o);s=s.add(i.path.popLast());const u=yh(c);r+=u-a.size,n.push(this.cr.addEntry(e,i,c))}else if(r-=a.size,this.trackRemovals){const c=u_(this.cr.serializer,o.convertToNoDocument(re.min()));n.push(this.cr.addEntry(e,i,c))}}),s.forEach(i=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.cr.updateMetadata(e,r)),O.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:s})=>(s.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function E_(t){return ct(t,"remoteDocumentGlobal")}function ti(t){return ct(t,"remoteDocumentsV14")}function al(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function N_(t,e){const n=e.documentKey.path.toArray();return[t,ph(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function I_(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=ue(n[i],r[i]),s)return s;return s=ue(n.length,r.length),s||(s=ue(n[n.length-2],r[r.length-2]),s||ue(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Hl(r.mutation,s,en.empty(),Be.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=Xn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Nl();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=hn();const o=zl(),a=function(){return zl()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof $r)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Hl(h.mutation,u,h.mutation.getFieldMask(),Be.now())):o.set(u.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new wO(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=zl();let s=new ze((o,a)=>o-a),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||en.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||fe()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=P2();h.forEach(m=>{if(!i.has(m)){const g=O2(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):I2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(Xn());let a=-1,c=i;return o.next(u=>O.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,fe())).next(h=>({batchId:a,changes:j2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let s=Nl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Nl();return this.indexManager.getCollectionParents(e,i).next(a=>O.forEach(a,c=>{const u=function(f,m){return new ka(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Fe.newInvalidDocument(h)))});let a=Nl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Hl(h.mutation,u,en.empty(),Be.now()),Jc(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mt(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:rS(s.bundledQuery),readTime:mt(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(){this.overlays=new ze(J.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xn();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=Xn(),i=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ze((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Xn(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Xn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return O.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cy(n,r));let i=this.Ir.get(n);i===void 0&&(i=fe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.Tr=new Ce(dt.Er),this.dr=new Ce(dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new J(new be([])),r=new dt(n,e),s=new dt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new J(new be([])),r=new dt(n,e),s=new dt(n,e+1);let i=fe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return J.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ce(dt.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sy(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dt(n,0),s=new dt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(ue);return n.forEach(s=>{const i=new dt(s,0),o=new dt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const o=new dt(new J(i),0);let a=new Ce(ue);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ne(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,s=>{const i=new dt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new dt(n,0),s=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.Mr=e,this.docs=function(){return new ze(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Fe.newInvalidDocument(n))}getEntries(e,n){let r=hn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Fe.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hn();const o=n.path,a=new J(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vy(o2(h),r)<=0||(s.has(h.key)||Jc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IO(this)}getSize(e){return O.resolve(this.size)}}class IO extends cS{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.persistence=e,this.Nr=new Gs(n=>Mi(n),Qc),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dy,this.targetCount=0,this.kr=$i.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $i(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n){this.qr={},this.overlays={},this.Qr=new In(0),this.Kr=!1,this.Kr=!0,this.$r=new TO,this.referenceDelegate=e(this),this.Ur=new SO(this),this.indexManager=new uO,this.remoteDocumentCache=function(s){return new NO(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tS(n),this.Gr=new _O(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new EO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new kO(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class kO extends l2{constructor(e){super(),this.currentSequenceNumber=e}}class _f{constructor(e){this.persistence=e,this.Jr=new Dy,this.Yr=null}static Zr(e){return new _f(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{const s=J.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.serializer=e}O(e,n,r,s){const i=new ff("createOrUpgrade",n);r<1&&s>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uw,{unique:!0}),c.createObjectStore("documentMutations")}(e),S_(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&s>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),S_(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",h)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uw,{unique:!0});const f=u.store("mutations"),m=h.map(g=>f.put(g));return O.waitFor(m)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.ni(i))),r<6&&s>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),r<7&&s>=7&&(o=o.next(()=>this.ii(i))),r<8&&s>=8&&(o=o.next(()=>this.si(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.oi(i))),r<11&&s>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:iM});u.createIndex("collectionPathOverlayIndex",oM,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",aM,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:GL});u.createIndex("documentKeyIndex",QL),u.createIndex("collectionGroupIndex",YL)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.ai(e,i))),r<15&&s>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:tM}).createIndex("sequenceNumberIndex",nM,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:rM}).createIndex("documentKeyIndex",sM,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&s>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,s)=>{n+=yh(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(s=>O.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,c=>{ne(c.userId===i.userId);const u=hi(this.serializer,c);return oS(e,i.userId,u).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.J((o,a)=>{const c=new be(o),u=function(f){return[0,Wt(f)]}(c);i.push(n.get(u).next(h=>h?O.resolve():(f=>n.put({targetId:0,path:Wt(f),sequenceNumber:s.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(i))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:eM});const r=n.store("collectionParents"),s=new Ry,i=o=>{if(s.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Wt(c)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new be(o);return i(c.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,c],u)=>{const h=Jn(a);return i(h.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,s)=>{const i=Sl(s),o=nS(this.serializer,i);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),s=[];return r.J((i,o)=>{const a=n.store("remoteDocumentsV14"),c=function(f){return f.document?new J(be.fromString(f.document.name).popFirst(5)):f.noDocument?J.fromSegments(f.noDocument.path):f.unknownDocument?J.fromSegments(f.unknownDocument.path):ee()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(u))}).next(()=>O.waitFor(s))}ai(e,n){const r=n.store("mutations"),s=uS(this.serializer),i=new hS(_f.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let h=(u=a.get(c.userId))!==null&&u!==void 0?u:fe();hi(this.serializer,c).keys().forEach(f=>h=h.add(f)),a.set(c.userId,h)}),O.forEach(a,(c,u)=>{const h=new yt(u),f=vf.lt(this.serializer,h),m=i.getIndexManager(h),g=wf.lt(h,this.serializer,m,i.referenceDelegate);return new dS(s,g,f,m).recalculateAndSaveOverlaysForDocumentKeys(new xg(n,In.oe),c).next()})})}}function S_(t){t.createObjectStore("targetDocuments",{keyPath:XL}).createIndex("documentTargetsIndex",ZL,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JL,{unique:!0}),t.createObjectStore("targetGlobal")}const Um="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vy{constructor(e,n,r,s,i,o,a,c,u,h,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=h,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!Vy.D())throw new K(U.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yO(this,s),this.Ai=n+"main",this.serializer=new tS(c),this.Ri=new Is(this.Ai,this.hi,new CO(this.serializer)),this.$r=new sO,this.Ur=new hO(this.referenceDelegate,this.serializer),this.remoteDocumentCache=uS(this.serializer),this.Gr=new rO,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(U.FAILED_PRECONDITION,Um);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new In(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Wu(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Ws(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ll(e).get("owner").next(n=>O.resolve(this.vi(n)))}Ci(e){return Wu(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=ct(n,"clientMetadata");return r.U().next(s=>{const i=this.xi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const n of e)this.Vi.removeItem(this.Oi(n.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):ll(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new K(U.FAILED_PRECONDITION,Um);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wu(e).U().next(r=>this.xi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&H("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new xg(e,In.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Wu(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return wf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dO(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(c){return c===17?uM:c===16?cM:c===15?_y:c===14?f2:c===13?h2:c===12?lM:c===11?d2:void ee()}(this.hi);let o;return this.Ri.runTransaction(e,s,i,a=>(o=new xg(a,this.Qr?this.Qr.next():In.oe),n==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new K(U.FAILED_PRECONDITION,a2);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ll(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(U.FAILED_PRECONDITION,Um)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ll(e).put("owner",n)}static D(){return Is.D()}bi(e){const n=ll(e);return n.get("owner").next(r=>this.vi(r)?(H("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):O.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;dI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ht("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ll(t){return ct(t,"owner")}function Wu(t){return ct(t,"clientMetadata")}function jO(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ly(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dI()?8:c2(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new PO;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(wo()<=ge.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",_o(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(wo()<=ge.DEBUG&&H("QueryEngine","Query:",_o(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(wo()<=ge.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",_o(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):O.resolve())}Yi(e,n){if(Zw(n))return O.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=mh(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,a);return this.ns(n,u,o,c.readTime)?this.Yi(e,mh(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,s){return Zw(n)||s.isEqual(re.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?O.resolve(null):(wo()<=ge.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_o(n)),this.rs(e,o,n,UL(s,-1)).next(a=>a))})}ts(e,n){let r=new Ce(k2(e));return n.forEach((s,i)=>{Jc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return wo()<=ge.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",_o(n)),this.Ji.getDocumentsMatchingQuery(e,n,pn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ze(ue),this._s=new Gs(i=>Mi(i),Qc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dS(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mS(t,e,n,r){return new AO(t,e,n,r)}async function pS(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=fe();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function RO(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,m=f.keys();let g=O.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(c,v)).next(x=>{const T=u.docVersions.get(v);ne(T!==null),x.version.compareTo(T)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=fe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function gS(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function DO(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(st.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(x,T,b){return x.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let c=hn(),u=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(VO(i,o,e.documentUpdates).next(h=>{c=h.Ps,u=h.Is})),!r.isEqual(re.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.os=s,i))}function VO(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=hn();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(re.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function LO(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function MO(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new br(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ag(t,e,n){const r=ae(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ws(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function k_(t,e,n){const r=ae(t);let s=re.min(),i=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=ae(c),m=f._s.get(h);return m!==void 0?O.resolve(f.os.get(m)):f.Ur.getTargetData(u,h)}(r,o,kn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:re.min(),n?i:fe())).next(a=>(OO(r,NM(e),a),{documents:a,Ts:i})))}function OO(t,e,n){let r=t.us.get(e)||re.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class C_{constructor(){this.activeTargetIds=PM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yS{constructor(){this.so=new C_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function Bm(){return Gu===null?Gu=function(){return 268435456+Math.round(2147483648*Math.random())}():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class $O extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Bm(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,c,u,s).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Di("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=UO[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bm();return new Promise((o,a)=>{const c=new XI;c.setWithCredentials(!0),c.listenOnce(ZI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case wd.NO_ERROR:const h=c.getResponseJson();H(Pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case wd.TIMEOUT:H(Pt,`RPC '${e}' ${i} timed out`),a(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const f=c.getStatus();if(H(Pt,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(b)>=0?b:U.UNKNOWN}(g.status);a(new K(v,g.message))}else a(new K(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(U.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{H(Pt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);H(Pt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=Bm(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=n2(),a=t2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");H(Pt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let m=!1,g=!1;const v=new BO({Io:T=>{g?H(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(H(Pt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),H(Pt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},To:()=>f.close()}),x=(T,b,y)=>{T.listen(b,_=>{try{y(_)}catch(I){setTimeout(()=>{throw I},0)}})};return x(f,El.EventType.OPEN,()=>{g||(H(Pt,`RPC '${e}' stream ${s} transport opened.`),v.yo())}),x(f,El.EventType.CLOSE,()=>{g||(g=!0,H(Pt,`RPC '${e}' stream ${s} transport closed`),v.So())}),x(f,El.EventType.ERROR,T=>{g||(g=!0,Di(Pt,`RPC '${e}' stream ${s} transport errored:`,T),v.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),x(f,El.EventType.MESSAGE,T=>{var b;if(!g){const y=T.data[0];ne(!!y);const _=y,I=_.error||((b=_[0])===null||b===void 0?void 0:b.error);if(I){H(Pt,`RPC '${e}' stream ${s} received error:`,I);const A=I.status;let R=function(k){const j=tt[k];if(j!==void 0)return B2(j)}(A),S=I.message;R===void 0&&(R=U.INTERNAL,S="Unknown error status: "+A+" with message "+I.message),g=!0,v.So(new K(R,S)),f.close()}else H(Pt,`RPC '${e}' stream ${s} received:`,y),v.bo(y)}}),x(a,e2.STAT_EVENT,T=>{T.stat===gg.PROXY?H(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===gg.NOPROXY&&H(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(){return typeof window<"u"?window:null}function Sd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){return new qM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,s,i,o,a,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new My(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Ht(n.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HO extends xS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=QM(this.serializer,e),r=function(i){if(!("targetChange"in i))return re.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?mt(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Sg(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=hh(c)?{documents:Q2(i,c)}:{query:Y2(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=H2(i,o.resumeToken);const u=Ng(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=ma(i,o.snapshotVersion.toTimestamp());const u=Ng(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=JM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Sg(this.serializer),n.removeTarget=e,this.a_(n)}}class qO extends xS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ne(!!e.streamToken),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=YM(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Sg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sc(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ig(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Ig(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class WO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ht(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ji(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ae(c);u.L_.add(4),await eu(u),u.q_.set("Unknown"),u.L_.delete(4),await Tf(u)}(this))})}),this.q_=new WO(r,s)}}async function Tf(t){if(Ji(t))for(const e of t.B_)await e(!0)}async function eu(t){for(const e of t.B_)await e(!1)}function vS(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),By(n)?Uy(n):Pa(n).r_()&&Fy(n,e))}function Oy(t,e){const n=ae(t),r=Pa(n);n.N_.delete(e),r.r_()&&wS(n,e),n.N_.size===0&&(r.r_()?r.o_():Ji(n)&&n.q_.set("Unknown"))}function Fy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pa(t).A_(e)}function wS(t,e){t.Q_.xe(e),Pa(t).R_(e)}function Uy(t){t.Q_=new BM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pa(t).start(),t.q_.v_()}function By(t){return Ji(t)&&!Pa(t).n_()&&t.N_.size>0}function Ji(t){return ae(t).L_.size===0}function _S(t){t.Q_=void 0}async function QO(t){t.q_.set("Online")}async function YO(t){t.N_.forEach((e,n)=>{Fy(t,e)})}async function JO(t,e){_S(t),By(t)?(t.q_.M_(e),Uy(t)):t.q_.set("Unknown")}async function XO(t,e,n){if(t.q_.set("Online"),e instanceof z2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(t,r)}else if(e instanceof Id?t.Q_.Ke(e):e instanceof $2?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{const r=await gS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.N_.get(u);h&&i.N_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.N_.get(c);if(!h)return;i.N_.set(c,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),wS(i,c);const f=new br(h.target,c,u,h.sequenceNumber);Fy(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await xh(t,r)}}async function xh(t,e,n){if(!Ws(e))throw e;t.L_.add(1),await eu(t),t.q_.set("Offline"),n||(n=()=>gS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Tf(t)})}function bS(t,e){return e().catch(n=>xh(t,n,e))}async function tu(t){const e=ae(t),n=Ds(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ZO(e);)try{const s=await LO(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,e6(e,s)}catch(s){await xh(e,s)}TS(e)&&ES(e)}function ZO(t){return Ji(t)&&t.O_.length<10}function e6(t,e){t.O_.push(e);const n=Ds(t);n.r_()&&n.V_&&n.m_(e.mutations)}function TS(t){return Ji(t)&&!Ds(t).n_()&&t.O_.length>0}function ES(t){Ds(t).start()}async function t6(t){Ds(t).p_()}async function n6(t){const e=Ds(t);for(const n of t.O_)e.m_(n.mutations)}async function r6(t,e,n){const r=t.O_.shift(),s=ky.from(r,e,n);await bS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tu(t)}async function s6(t,e){e&&Ds(t).V_&&await async function(r,s){if(function(o){return U2(o)&&o!==U.ABORTED}(s.code)){const i=r.O_.shift();Ds(r).s_(),await bS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await tu(r)}}(t,e),TS(t)&&ES(t)}async function P_(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Ji(n);n.L_.add(3),await eu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Tf(n)}async function i6(t,e){const n=ae(t);e?(n.L_.delete(2),await Tf(n)):e||(n.L_.add(2),await eu(n),n.q_.set("Unknown"))}function Pa(t){return t.K_||(t.K_=function(n,r,s){const i=ae(n);return i.w_(),new HO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:QO.bind(null,t),Ro:YO.bind(null,t),mo:JO.bind(null,t),d_:XO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),By(t)?Uy(t):t.q_.set("Unknown")):(await t.K_.stop(),_S(t))})),t.K_}function Ds(t){return t.U_||(t.U_=function(n,r,s){const i=ae(n);return i.w_(),new qO(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:t6.bind(null,t),mo:s6.bind(null,t),f_:n6.bind(null,t),g_:r6.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await tu(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new $y(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zy(t,e){if(Ht("AsyncQueue",`${e}: ${t}`),Ws(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Nl(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new Jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(){this.W_=new ze(J.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class pa{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new pa(e,n,Jo.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class a6{constructor(){this.queries=R_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=R_(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function R_(){return new Gs(t=>S2(t),pf)}async function Hy(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new o6,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=zy(o,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ky(n)}async function qy(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function l6(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Ky(n)}function c6(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ky(t){t.Y_.forEach(e=>{e.next()})}var Rg,D_;(D_=Rg||(Rg={})).ea="default",D_.Cache="cache";class Wy{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.key=e}}class IS{constructor(e){this.key=e}}class u6{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=k2(e),this.Ra=new Jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new A_,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=Jc(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?v!==x&&(r.track({type:3,doc:g}),T=!0):this.ga(m,g)||(r.track({type:2,doc:g}),T=!0,(c&&this.Aa(g,c)>0||u&&this.Aa(g,u)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),T=!0):m&&!g&&(r.track({type:1,doc:m}),T=!0,(c||u)&&(a=!0)),T&&(g?(o=o.add(g),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,v){const x=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return x(g)-x(v)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new pa(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new A_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new IS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new NS(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return pa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class d6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class h6{constructor(e){this.key=e,this.va=!1}}class f6{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Gs(a=>S2(a),pf),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(J.comparator),this.Na=new Map,this.La=new Dy,this.Ba={},this.ka=new Map,this.qa=$i.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function m6(t,e,n=!0){const r=AS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await SS(r,e,n,!0),s}async function p6(t,e){const n=AS(t);await SS(n,e,!0,!1)}async function SS(t,e,n,r){const s=await MO(t.localStore,kn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await g6(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vS(t.remoteStore,s),a}async function g6(t,e,n,r,s){t.Ka=(f,m,g)=>async function(x,T,b,y){let _=T.view.ma(b);_.ns&&(_=await k_(x.localStore,T.query,!1).then(({documents:S})=>T.view.ma(S,_)));const I=y&&y.targetChanges.get(T.targetId),A=y&&y.targetMismatches.get(T.targetId)!=null,R=T.view.applyChanges(_,x.isPrimaryClient,I,A);return L_(x,T.targetId,R.wa),R.snapshot}(t,f,m,g);const i=await k_(t.localStore,e,!0),o=new u6(e,i.Ts),a=o.ma(i.documents),c=Zc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);L_(t,n,u.wa);const h=new d6(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function y6(t,e,n){const r=ae(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!pf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ag(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Oy(r.remoteStore,s.targetId),Dg(r,s.targetId)}).catch(Qi)):(Dg(r,s.targetId),await Ag(r.localStore,s.targetId,!0))}async function x6(t,e){const n=ae(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Oy(n.remoteStore,r.targetId))}async function v6(t,e,n){const r=RS(t);try{const s=await function(o,a){const c=ae(o),u=Be.now(),h=a.reduce((g,v)=>g.add(v.key),fe());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=hn(),x=fe();return c.cs.getEntries(g,h).next(T=>{v=T,v.forEach((b,y)=>{y.isValidDocument()||(x=x.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(T=>{f=T;const b=[];for(const y of a){const _=MM(y,f.get(y.key).overlayedDocument);_!=null&&b.push(new $r(y.key,_,x2(_.value.mapValue),Ue.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,a)}).next(T=>{m=T;const b=T.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(g,T.batchId,b)})}).then(()=>({batchId:m.batchId,changes:j2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new ze(ue)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await nu(r,s.changes),await tu(r.remoteStore)}catch(s){const i=zy(s,"Failed to persist write");n.reject(i)}}async function kS(t,e){const n=ae(t);try{const r=await DO(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ne(o.va):s.removedDocuments.size>0&&(ne(o.va),o.va=!1))}),await nu(n,r,e)}catch(r){await Qi(r)}}function V_(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=ae(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(u=!0)}),u&&Ky(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function w6(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ze(J.comparator);o=o.insert(i,Fe.newNoDocument(i,re.min()));const a=fe().add(i),c=new xf(re.min(),new Map,new ze(ue),o,a);await kS(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Gy(r)}else await Ag(r.localStore,e,!1).then(()=>Dg(r,e,n)).catch(Qi)}async function _6(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await RO(n.localStore,e);jS(n,r,null),CS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nu(n,s)}catch(s){await Qi(s)}}async function b6(t,e,n){const r=ae(t);try{const s=await function(o,a){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(ne(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);jS(r,e,n),CS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nu(r,s)}catch(s){await Qi(s)}}function CS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jS(t,e,n){const r=ae(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Dg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PS(t,r)})}function PS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Oy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Gy(t))}function L_(t,e,n){for(const r of n)r instanceof NS?(t.La.addReference(r.key,e),T6(t,r)):r instanceof IS?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PS(t,r.key)):ee()}function T6(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Gy(t))}function Gy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new J(be.fromString(e)),r=t.qa.next();t.Na.set(r,new h6(n)),t.Oa=t.Oa.insert(n,r),vS(t.remoteStore,new br(kn(Yc(n.path)),r,"TargetPurposeLimboResolution",In.oe))}}async function nu(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Ly.Wi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,u){const h=ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,m=>O.forEach(m.$i,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>O.forEach(m.Ui,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Ws(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.os.get(m),v=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(m,x)}}}(r.localStore,i))}async function E6(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await pS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new K(U.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(n,r.hs)}}function N6(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let s=fe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function AS(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w6.bind(null,e),e.Ca.d_=l6.bind(null,e.eventManager),e.Ca.$a=c6.bind(null,e.eventManager),e}function RS(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b6.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mS(this.persistence,new fS,e.initialUser,this.serializer)}Ga(e){return new hS(_f.Zr,this.serializer)}Wa(e){return new yS}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class I6 extends kc{constructor(e,n,r){super(),this.Ja=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await RS(this.Ja.syncEngine),await tu(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return mS(this.persistence,new fS,e.initialUser,this.serializer)}ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new mO(r,e.asyncQueue,n)}Ha(e,n){const r=new HL(n,this.persistence);return new zL(e.asyncQueue,r)}Ga(e){const n=jO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Vy(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,zO(),Sd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new yS}}class vh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>V_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=E6.bind(null,this.syncEngine),await i6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new a6}()}createDatastore(e){const n=bf(e.databaseInfo.databaseId),r=function(i){return new $O(i)}(e.databaseInfo);return function(i,o,a,c){return new KO(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new GO(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>V_(this.syncEngine,n,0),function(){return j_.D()?new j_:new FO}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new f6(s,i,o,a,c,u);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await eu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vh.provider={build:()=>new vh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(U.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=ae(s),a={documents:i.map(f=>Ic(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,be.emptyPath(),a,i.length),u=new Map;c.forEach(f=>{const m=GM(o.serializer,f);u.set(m.key.toString(),m)});const h=[];return i.forEach(f=>{const m=u.get(f.toString());ne(!!m),h.push(m)}),h}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ja(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=J.fromPath(r);this.mutations.push(new Iy(s,this.precondition(s)))}),await async function(r,s){const i=ae(r),o={writes:s.map(a=>Sc(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,be.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ee();n=re.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new K(U.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(re.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(re.min()))throw new K(U.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new My(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new S6(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Gc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!U2(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=s2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $m(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function M_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j6(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>P_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>P_(e.remoteStore,s)),t._onlineComponents=e}async function j6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await $m(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Di("Error using user provided cache. Falling back to memory cache: "+n),await $m(t,new kc)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await $m(t,new kc);return t._offlineComponents}async function Yy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await M_(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await M_(t,new vh))),t._onlineComponents}function P6(t){return Yy(t).then(e=>e.syncEngine)}function A6(t){return Yy(t).then(e=>e.datastore)}async function wh(t){const e=await Yy(t),n=e.eventManager;return n.onListen=m6.bind(null,e.syncEngine),n.onUnlisten=y6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=p6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x6.bind(null,e.syncEngine),n}function R6(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Qy({next:m=>{h.Za(),o.enqueueAndForget(()=>qy(i,f));const g=m.docs.has(a);!g&&m.fromCache?u.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Wy(Yc(a.path),h,{includeMetadataChanges:!0,_a:!0});return Hy(i,f)}(await wh(t),t.asyncQueue,e,n,r)),r.promise}function D6(t,e,n={}){const r=new Hn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new Qy({next:m=>{h.Za(),o.enqueueAndForget(()=>qy(i,f)),m.fromCache&&c.source==="server"?u.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Wy(a,h,{includeMetadataChanges:!0,_a:!0});return Hy(i,f)}(await wh(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function V6(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F_(t){if(!J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U_(t){if(J.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ef(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function _t(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ef(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PL;switch(r.type){case"firstParty":return new VL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=O_.get(n);r&&(H("ComponentProvider","Removing Datastore"),O_.delete(n),r.terminate())}(this),Promise.resolve()}}function L6(t,e,n,r={}){var s;const i=(t=_t(t,Nf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=uI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(u)}t._authCredentials=new AL(new r2(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class Ss extends zr{constructor(e,n,r){super(e,n,Yc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new J(e))}withConverter(e){return new Ss(this.firestore,e,this._path)}}function Cn(t,e,...n){if(t=$e(t),VS("collection","path",e),t instanceof Nf){const r=be.fromString(e,...n);return U_(r),new Ss(t,null,r)}{if(!(t instanceof bt||t instanceof Ss))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return U_(r),new Ss(t.firestore,null,r)}}function We(t,e,...n){if(t=$e(t),arguments.length===1&&(e=s2.newId()),VS("doc","path",e),t instanceof Nf){const r=be.fromString(e,...n);return F_(r),new bt(t,null,new J(r))}{if(!(t instanceof bt||t instanceof Ss))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return F_(r),new bt(t.firestore,t instanceof Ss?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new My(this,"async_queue_retry"),this.Vu=()=>{const r=Sd();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Sd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Sd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ws(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ht("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=$y.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function z_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rn extends Nf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new $_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $_(e),this._firestoreClient=void 0,await e}}}function M6(t,e){const n=typeof t=="object"?t:oy(),r=typeof t=="string"?t:"(default)",s=cf(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=aI("firestore");i&&L6(s,...i)}return s}function Aa(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LS(t),t._firestoreClient}function LS(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new hM(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new C6(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}function O6(t,e){Di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return F6(t,vh.provider,{build:r=>new I6(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function F6(t,e,n){if((t=_t(t,Rn))._firestoreClient||t._terminated)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new K(U.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},LS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(st.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=/^__.*__$/;class B6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class MS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $r(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class If{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new If(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return _h(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OS(this.Cu)&&U6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||bf(e)}Qu(e,n,r,s=!1){return new If({Cu:e,methodName:n,qu:r,path:qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Da(t){const e=t._freezeSettings(),n=bf(t._databaseId);return new $6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Sf(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ix("Data must be an object, but it was:",o,r);const a=US(r,o);let c,u;if(i.merge)c=new en(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Vg(e,f,n);if(!o.contains(m))throw new K(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);$S(h,m)||h.push(m)}c=new en(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new B6(new vt(a),c,u)}class kf extends Xi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}function FS(t,e,n){return new If({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zy extends Xi{_toFieldTransform(e){return new Xc(e.path,new ha)}isEqual(e){return e instanceof Zy}}class ex extends Xi{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=FS(this,e,!0),r=this.Ku.map(i=>Zi(i,n)),s=new Oi(r);return new Xc(e.path,s)}isEqual(e){return e instanceof ex&&oa(this.Ku,e.Ku)}}class tx extends Xi{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=FS(this,e,!0),r=this.Ku.map(i=>Zi(i,n)),s=new Fi(r);return new Xc(e.path,s)}isEqual(e){return e instanceof tx&&oa(this.Ku,e.Ku)}}class nx extends Xi{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new fa(e.serializer,R2(e.serializer,this.$u));return new Xc(e.path,n)}isEqual(e){return e instanceof nx&&this.$u===e.$u}}function rx(t,e,n,r){const s=t.Qu(1,e,n);ix("Data must be an object, but it was:",s,r);const i=[],o=vt.empty();Yi(r,(c,u)=>{const h=ox(e,c,n);u=$e(u);const f=s.Nu(h);if(u instanceof kf)i.push(h);else{const m=Zi(u,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new en(i);return new MS(o,a,s.fieldTransforms)}function sx(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Vg(e,r,n)],c=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Vg(e,i[m])),c.push(i[m+1]);const u=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!$S(u,a[m])){const g=a[m];let v=c[m];v=$e(v);const x=o.Nu(g);if(v instanceof kf)u.push(g);else{const T=Zi(v,x);T!=null&&(u.push(g),h.set(g,T))}}const f=new en(u);return new MS(h,f,o.fieldTransforms)}function z6(t,e,n,r=!1){return Zi(n,t.Qu(r?4:3,e))}function Zi(t,e){if(BS(t=$e(t)))return ix("Unsupported field value:",e,t),US(t,e);if(t instanceof Xi)return function(r,s){if(!OS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=Zi(a,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Be.fromDate(r);return{timestampValue:ma(s.serializer,i)}}if(r instanceof Be){const i=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ma(s.serializer,i)}}if(r instanceof Jy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:H2(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Py(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Ny(a.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Ef(r)}`)}(t,e)}function US(t,e){const n={};return m2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(t,(r,s)=>{const i=Zi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function BS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Jy||t instanceof zi||t instanceof bt||t instanceof Xi||t instanceof Xy)}function ix(t,e,n){if(!BS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Ef(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Vg(t,e,n){if((e=$e(e))instanceof Ra)return e._internalPath;if(typeof e=="string")return ox(t,e);throw _h("Field path arguments must be of type string or ",t,!1,void 0,n)}const H6=new RegExp("[~\\*/\\[\\]]");function ox(t,e,n){if(e.search(H6)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ra(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _h(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new K(U.INVALID_ARGUMENT,a+t+c)}function $S(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q6 extends bh{data(){return super.data()}}function Cf(t,e){return typeof e=="string"?ox(t,e):e instanceof Ra?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ax{}class lx extends ax{}function Cc(t,e,...n){let r=[];e instanceof ax&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ux).length,a=i.filter(c=>c instanceof jf).length;if(o>1||o>0&&a>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class jf extends lx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jf(e,n,r)}_apply(e){const n=this._parse(e);return qS(e._query,n),new zr(e.firestore,e.converter,Eg(e._query,n))}_parse(e){const n=Da(e.firestore);return function(i,o,a,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){K_(f,h);const g=[];for(const v of f)g.push(q_(c,i,v));m={arrayValue:{values:g}}}else m=q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||K_(f,h),m=z6(a,o,f,h==="in"||h==="not-in");return ye.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cx(t,e,n){const r=e,s=Cf("where",t);return jf._create(s,r,n)}class ux extends ax{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ux(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ie.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const c of a)qS(o,c),o=Eg(o,c)}(e._query,n),new zr(e.firestore,e.converter,Eg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dx extends lx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dx(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(i,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ka(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function HS(t,e="asc"){const n=e,r=Cf("orderBy",t);return dx._create(r,n)}class hx extends lx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new hx(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,mh(e._query,this._limit,this._limitType))}}function H_(t){return hx._create("limit",t,"F")}function q_(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!I2(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!J.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tc(t,new J(r))}if(n instanceof bt)return Tc(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ef(n)}.`)}function K_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qS(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KS{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Me(o.doubleValue));return new Xy(i)}convertGeoPoint(e){return new Jy(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ty(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=Or(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ne(eS(r));const s=new Vi(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||Ht(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class K6 extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fx extends bh{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class kd extends fx{data(e={}){return super.data(e)}}class WS{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Mo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kd(this._firestore,this._userDataWriter,r.key,r,new Mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new kd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Mo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new kd(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Mo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:W6(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function W6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){t=_t(t,bt);const e=_t(t.firestore,Rn);return R6(Aa(e),t._key).then(n=>GS(e,t,n))}class Af extends KS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function G6(t){t=_t(t,zr);const e=_t(t.firestore,Rn),n=Aa(e),r=new Af(e);return zS(t._query),D6(n,t._query).then(s=>new WS(e,r,t,s))}function mx(t,e,n){t=_t(t,bt);const r=_t(t.firestore,Rn),s=Pf(t.converter,e,n);return ru(r,[Sf(Da(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ue.none())])}function Sr(t,e,n,...r){t=_t(t,bt);const s=_t(t.firestore,Rn),i=Da(s);let o;return o=typeof(e=$e(e))=="string"||e instanceof Ra?sx(i,"updateDoc",t._key,e,n,r):rx(i,"updateDoc",t._key,e),ru(s,[o.toMutation(t._key,Ue.exists(!0))])}function Q6(t){return ru(_t(t.firestore,Rn),[new ja(t._key,Ue.none())])}function ga(t,e){const n=_t(t.firestore,Rn),r=We(t),s=Pf(t.converter,e);return ru(n,[Sf(Da(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function Va(t,...e){var n,r,s;t=$e(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||z_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(z_(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof bt)u=_t(t.firestore,Rn),h=Yc(t._key.path),c={next:f=>{e[o]&&e[o](GS(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=_t(t,zr);u=_t(f.firestore,Rn),h=f._query;const m=new Af(u);c={next:g=>{e[o]&&e[o](new WS(u,m,f,g))},error:e[o+1],complete:e[o+2]},zS(t._query)}return function(m,g,v,x){const T=new Qy(x),b=new Wy(g,T,v);return m.asyncQueue.enqueueAndForget(async()=>Hy(await wh(m),b)),()=>{T.Za(),m.asyncQueue.enqueueAndForget(async()=>qy(await wh(m),b))}}(Aa(u),h,a,c)}function ru(t,e){return function(r,s){const i=new Hn;return r.asyncQueue.enqueueAndForget(async()=>v6(await P6(r),s,i)),i.promise}(Aa(t),e)}function GS(t,e,n){const r=n.docs.get(e._key),s=new Af(t);return new fx(t,s,e._key,r,new Mo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Da(e)}set(e,n,r){this._verifyNotCommitted();const s=us(e,this._firestore),i=Pf(s.converter,n,r),o=Sf(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ue.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=us(e,this._firestore);let o;return o=typeof(n=$e(n))=="string"||n instanceof Ra?sx(this._dataReader,"WriteBatch.update",i._key,n,r,s):rx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=us(e,this._firestore);return this._mutations=this._mutations.concat(new ja(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function us(t,e){if((t=$e(t)).firestore!==e)throw new K(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6 extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Da(n)}get(n){const r=us(n,this._firestore),s=new K6(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return ee();const o=i[0];if(o.isFoundDocument())return new bh(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new bh(this._firestore,s,r._key,null,r.converter);throw ee()})}set(n,r,s){const i=us(n,this._firestore),o=Pf(i.converter,r,s),a=Sf(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,a),this}update(n,r,s,...i){const o=us(n,this._firestore);let a;return a=typeof(r=$e(r))=="string"||r instanceof Ra?sx(this._dataReader,"Transaction.update",o._key,r,s,i):rx(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=us(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=us(e,this._firestore),r=new Af(this._firestore);return super.get(e).then(s=>new fx(this._firestore,r,n._key,s._document,new Mo(!1,!1),n.converter))}}function px(t,e,n){t=_t(t,Rn);const r=Object.assign(Object.assign({},Y6),n);return function(i){if(i.maxAttempts<1)throw new K(U.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,a){const c=new Hn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await A6(i);new k6(i.asyncQueue,u,a,o,c).au()}),c.promise}(Aa(t),s=>e(new X6(t,s)),r)}function qt(){return new Zy("serverTimestamp")}function Lg(...t){return new ex("arrayUnion",t)}function W_(...t){return new tx("arrayRemove",t)}function Mg(t){return new nx("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(t){return Aa(t=_t(t,Rn)),new J6(t,e=>ru(t,e))}(function(e,n=!0){(function(s){Sa=s})(Gi),ji(new Ps("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Rn(new RL(r.getProvider("auth-internal")),new ML(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(Mw,"4.7.3",e),nr(Mw,"4.7.3","esm2017")})();var e3="firebase",t3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(e3,t3,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",n3="storageBucket",r3=2*60*1e3,s3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ar{constructor(e,n,r=0){super(zm(e),`Firebase Storage: ${n} (${zm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var or;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(or||(or={}));function zm(t){return"storage/"+t}function i3(){const t="An unknown error occurred, please check the error payload for server response.";return new lr(or.UNKNOWN,t)}function o3(){return new lr(or.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function a3(){return new lr(or.CANCELED,"User canceled the upload/download.")}function l3(t){return new lr(or.INVALID_URL,"Invalid URL '"+t+"'.")}function c3(t){return new lr(or.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function G_(t){return new lr(or.INVALID_ARGUMENT,t)}function YS(){return new lr(or.APP_DELETED,"The Firebase app was deleted.")}function u3(t){return new lr(or.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Un.makeFromUrl(e,n)}catch{return new Un(e,"")}if(r.path==="")return r;throw c3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},x=n===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",b=new RegExp(`^https?://${x}/${s}/${T}`,"i"),_=[{regex:a,indices:c,postModify:i},{regex:g,indices:v,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<_.length;I++){const A=_[I],R=A.regex.exec(e);if(R){const S=R[A.indices.bucket];let E=R[A.indices.path];E||(E=""),r=new Un(S,E),A.postModify(r);break}}if(r==null)throw l3(e);return r}}class d3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h3(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,t(g,c())},T)}function m(){i&&clearTimeout(i)}function g(T,...b){if(u){m();return}if(T){m(),h.call(null,T,...b);return}if(c()||o){m(),h.call(null,T,...b);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let v=!1;function x(T){v||(v=!0,m(),!u&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function f3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){return t!==void 0}function Q_(t,e,n,r){if(r<e)throw G_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw G_(`Invalid value for '${t}'. Expected ${n} or less.`)}function p3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Eh;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Eh||(Eh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n,r,s,i,o,a,c,u,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Qu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Eh.NO_ERROR,c=i.getStatus();if(!a||g3(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Eh.ABORT;r(!1,new Qu(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Qu(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());m3(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=i3();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?YS():a3();o(c)}else{const c=o3();o(c)}};this.canceled_?n(!1,new Qu(!1,null,!0)):this.backoffId_=h3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function x3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function v3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function w3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b3(t,e,n,r,s,i,o=!0){const a=p3(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return w3(u,e),x3(u,n),v3(u,i),_3(u,r),new y3(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function E3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this._service=e,n instanceof Un?this._location=n:this._location=Un.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Nh(e,n)}get root(){const e=new Un(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return E3(this._location.path)}get storage(){return this._service}get parent(){const e=T3(this._location.path);if(e===null)return null;const n=new Un(this._location.bucket,e);return new Nh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw u3(e)}}function Y_(t,e){const n=e==null?void 0:e[n3];return n==null?null:Un.makeFromBucketSpec(n,t)}function N3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:uI(s,t.app.options.projectId))}class I3{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=r3,this._maxUploadRetryTime=s3,this._requests=new Set,s!=null?this._bucket=Un.makeFromBucketSpec(s,this._host):this._bucket=Y_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Un.makeFromBucketSpec(this._url,e):this._bucket=Y_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Q_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Q_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Nh(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new d3(YS());{const o=b3(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const J_="@firebase/storage",X_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="storage";function S3(t=oy(),e){t=$e(t);const r=cf(t,JS).getImmediate({identifier:e}),s=aI("storage");return s&&k3(r,...s),r}function k3(t,e,n,r={}){N3(t,e,n,r)}function C3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new I3(n,r,s,e,Gi)}function j3(){ji(new Ps(JS,C3,"PUBLIC").setMultipleInstances(!0)),nr(J_,X_,""),nr(J_,X_,"esm2017")}j3();const P3={apiKey:"AIzaSyBH2cfQxaQLvKhYrQ6dYm4vcuiw0Xbv17Q",authDomain:"new-sankalpa-app.firebaseapp.com",projectId:"new-sankalpa-app",storageBucket:"new-sankalpa-app.firebasestorage.app",messagingSenderId:"484434742594",appId:"1:484434742594:web:220653dc47b96e9e254cdb",measurementId:"G-WWB92V7ZP4"},gx=pI(P3),cl=CL(gx),me=M6(gx);S3(gx);O6(me).catch(t=>{t.code==="failed-precondition"?console.warn("Multiple tabs open, persistence can only be enabled in one tab at a time."):t.code==="unimplemented"?console.warn("The current browser does not support all of the features required to enable persistence"):console.warn("Failed to enable persistence:",t)});const XS=N.createContext(void 0),vn=()=>{const t=N.useContext(XS);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Yu=t=>{switch(t){case"auth/invalid-credential":return"ভুল ইমেইল বা পাসওয়ার্ড। দয়া করে আবার চেষ্টা করুন।";case"auth/user-not-found":return"এই ইমেইল ঠিকানায় কোনো অ্যাকাউন্ট পাওয়া যায়নি।";case"auth/wrong-password":return"ভুল পাসওয়ার্ড। দয়া করে আবার চেষ্টা করুন।";case"auth/invalid-email":return"দয়া করে একটি বৈধ ইমেইল ঠিকানা লিখুন।";case"auth/user-disabled":return"এই অ্যাকাউন্টটি নিষ্ক্রিয় করা হয়েছে। সাহায্যের জন্য যোগাযোগ করুন।";case"auth/too-many-requests":return"অনেকবার ভুল চেষ্টা। কিছুক্ষণ পর আবার চেষ্টা করুন।";case"auth/email-already-in-use":return"এই ইমেইল দিয়ে ইতিমধ্যে একটি অ্যাকাউন্ট আছে। লগইন করার চেষ্টা করুন।";case"auth/weak-password":return"পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে।";case"auth/operation-not-allowed":return"এই সাইন-ইন পদ্ধতি সক্রিয় নয়। সাহায্যের জন্য যোগাযোগ করুন।";case"auth/popup-closed-by-user":return"সাইন-ইন বাতিল করা হয়েছে। দয়া করে আবার চেষ্টা করুন।";case"auth/popup-blocked":return"পপ-আপ ব্লক করা হয়েছে। দয়া করে পপ-আপ অনুমতি দিন।";case"auth/network-request-failed":return"নেটওয়ার্ক সমস্যা। ইন্টারনেট সংযোগ চেক করুন।";case"auth/requires-recent-login":return"নিরাপত্তার জন্য আবার লগইন করুন।";case"auth/account-exists-with-different-credential":return"এই ইমেইল দিয়ে অন্য পদ্ধতিতে অ্যাকাউন্ট আছে।";default:return"একটি অপ্রত্যাশিত সমস্যা হয়েছে। দয়া করে আবার চেষ্টা করুন।"}},A3=({children:t})=>{const[e,n]=N.useState(null),[r,s]=N.useState(null),[i,o]=N.useState(!0),a=async x=>{try{const T=await Th(We(me,"users",x.uid));if(T.exists()){const b=T.data();s(b)}else await c(x,x.displayName||"User")}catch(T){console.error("Error fetching user data:",T),Q.error("ব্যবহারকারীর তথ্য লোড করতে সমস্যা হয়েছে")}},c=async(x,T,b="bn")=>{try{const y={uid:x.uid,email:x.email||"",displayName:T||x.displayName||"User",level:1,xp:0,coins:50,streak:0,lastCheckIn:"",createdAt:new Date().toISOString(),language:b,following:[],followers:[],inventory:[],unlocked_items:{themes:[],badges:[],music:[],features:[]},active_theme:"default",last_daily_popup:"",streakStartDate:qt(),currentBadge:"clown"};await mx(We(me,"users",x.uid),{...y,createdAt:qt(),lastCheckIn:qt(),streakStartDate:qt()}),s(y),Q.success("স্বাগতম! আপনার অ্যাকাউন্ট তৈরি হয়েছে! 🎉")}catch(y){throw console.error("Error creating user data:",y),Q.error("ব্যবহারকারীর তথ্য সংরক্ষণে সমস্যা হয়েছে"),y}},u=async(x,T)=>{try{const b=await h5(cl,x,T);return Q.success("স্বাগতম! সফলভাবে লগইন হয়েছে! 🎉"),b}catch(b){const y=Yu(b.code);throw Q.error(y),b}},h=async(x,T,b)=>{try{const y=await d5(cl,x,T);return await m5(y.user,{displayName:b}),await c(y.user,b),y}catch(y){const _=Yu(y.code);throw Q.error(_),y}},f=async()=>{try{const x=new gr;x.setCustomParameters({prompt:"select_account"});const T=await O5(cl,x);return(await Th(We(me,"users",T.user.uid))).exists()||await c(T.user,T.user.displayName||"User"),Q.success("Google দিয়ে সফলভাবে লগইন হয়েছে! 🎉"),T}catch(x){const T=Yu(x.code);throw Q.error(T),x}},m=async()=>{try{await x5(cl),s(null),Q.success("সফলভাবে লগআউট হয়েছে!")}catch(x){const T=Yu(x.code);throw Q.error(T),x}},g=async x=>{if(e)try{if(x.level&&r&&x.level>r.level){const y=(x.level-r.level)*50;x.coins=(x.coins||r.coins)+y,Q.success(`লেভেল আপ! +${y} বোনাস কয়েন! 🎉`,{duration:4e3})}const T={...x,updatedAt:qt()};await Sr(We(me,"users",e.uid),T),s(b=>b?{...b,...x}:null)}catch(T){throw console.error("Error updating user data:",T),Q.error("তথ্য আপডেট করতে সমস্যা হয়েছে"),T}};N.useEffect(()=>y5(cl,async T=>{try{n(T),T?await a(T):s(null)}catch(b){console.error("Auth state change error:",b)}finally{o(!1)}}),[]);const v={currentUser:e,userData:r,login:u,signup:h,loginWithGoogle:f,logout:m,updateUserData:g,loading:i};return l.jsx(XS.Provider,{value:v,children:t})},ZS=N.createContext(void 0),eo=()=>{const t=N.useContext(ZS);if(t===void 0)throw new Error("useUserContext must be used within a UserContextProvider");return t},R3=({children:t})=>{const{currentUser:e}=vn(),[n,r]=N.useState({themes:[],badges:[],music:[],features:[]}),[s,i]=N.useState("default"),[o,a]=N.useState(""),[c,u]=N.useState(!0);N.useEffect(()=>{if(!e){u(!1);return}const g=async()=>{try{return await e.getIdToken(!0),Va(We(me,"users",e.uid),T=>{if(T.exists()){const b=T.data();r(b.unlocked_items||{themes:[],badges:[],music:[],features:[]}),i(b.active_theme||"default"),a(b.last_daily_popup||"")}u(!1)},T=>{console.error("Error listening to user document:",T),T.code!=="permission-denied"&&console.warn("User context listener error:",T.message),u(!1)})}catch(x){return console.error("Error setting up user context listener:",x),u(!1),()=>{}}};let v;return g().then(x=>{v=x}),()=>{v&&v()}},[e]);const m={unlockedItems:n,activeTheme:s,lastDailyPopup:o,updateUserContext:g=>{g.unlockedItems&&r(g.unlockedItems),g.activeTheme&&i(g.activeTheme),g.lastDailyPopup&&a(g.lastDailyPopup)},hasUnlockedItem:(g,v)=>{var x;return((x=n[g])==null?void 0:x.includes(v))||!1},loading:c};return l.jsx(ZS.Provider,{value:m,children:t})},ek=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Rf=N.createContext({}),Df=N.createContext(null),Vf=typeof document<"u",yx=Vf?N.useLayoutEffect:N.useEffect,tk=N.createContext({strict:!1}),xx=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),D3="framerAppearId",nk="data-"+xx(D3);function V3(t,e,n,r){const{visualElement:s}=N.useContext(Rf),i=N.useContext(tk),o=N.useContext(Df),a=N.useContext(ek).reducedMotion,c=N.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(n,o)});const h=N.useRef(!!(n[nk]&&!window.HandoffComplete));return yx(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Oo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function L3(t,e,n){return N.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Oo(n)&&(n.current=r))},[e])}function jc(t){return typeof t=="string"||Array.isArray(t)}function Lf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const vx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wx=["initial",...vx];function Mf(t){return Lf(t.animate)||wx.some(e=>jc(t[e]))}function rk(t){return!!(Mf(t)||t.variants)}function M3(t,e){if(Mf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||jc(n)?n:void 0,animate:jc(r)?r:void 0}}return t.inherit!==!1?e:{}}function O3(t){const{initial:e,animate:n}=M3(t,N.useContext(Rf));return N.useMemo(()=>({initial:e,animate:n}),[Z_(e),Z_(n)])}function Z_(t){return Array.isArray(t)?t.join(" "):t}const eb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pc={};for(const t in eb)Pc[t]={isEnabled:e=>eb[t].some(n=>!!e[n])};function F3(t){for(const e in t)Pc[e]={...Pc[e],...t[e]}}const _x=N.createContext({}),sk=N.createContext({}),U3=Symbol.for("motionComponentSymbol");function B3({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&F3(t);function i(a,c){let u;const h={...N.useContext(ek),...a,layoutId:$3(a)},{isStatic:f}=h,m=O3(a),g=r(a,f);if(!f&&Vf){m.visualElement=V3(s,g,h,e);const v=N.useContext(sk),x=N.useContext(tk).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,x,t,v))}return N.createElement(Rf.Provider,{value:m},u&&m.visualElement?N.createElement(u,{visualElement:m.visualElement,...h}):null,n(s,a,L3(g,m.visualElement,c),g,f,m.visualElement))}const o=N.forwardRef(i);return o[U3]=s,o}function $3({layoutId:t}){const e=N.useContext(_x).id;return e&&t!==void 0?e+"-"+t:t}function z3(t){function e(r,s={}){return B3(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const H3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bx(t){return typeof t!="string"||t.includes("-")?!1:!!(H3.indexOf(t)>-1||/[A-Z]/.test(t))}const Ih={};function q3(t){Object.assign(Ih,t)}const su=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],to=new Set(su);function ik(t,{layout:e,layoutId:n}){return to.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ih[t]||t==="opacity")}const sn=t=>!!(t&&t.getVelocity),K3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},W3=su.length;function G3(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<W3;o++){const a=su[o];if(t[a]!==void 0){const c=K3[a]||a;i+=`${c}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const ok=t=>e=>typeof e=="string"&&e.startsWith(t),ak=ok("--"),Og=ok("var(--"),Q3=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Y3=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vs=(t,e,n)=>Math.min(Math.max(n,t),e),no={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ql={...no,transform:t=>Vs(0,1,t)},Ju={...no,default:1},Kl=t=>Math.round(t*1e5)/1e5,Of=/(-)?([\d]*\.?[\d])+/g,lk=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,J3=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function iu(t){return typeof t=="string"}const ou=t=>({test:e=>iu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Zr=ou("deg"),sr=ou("%"),ie=ou("px"),X3=ou("vh"),Z3=ou("vw"),tb={...sr,parse:t=>sr.parse(t)/100,transform:t=>sr.transform(t*100)},nb={...no,transform:Math.round},ck={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,size:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,rotate:Zr,rotateX:Zr,rotateY:Zr,rotateZ:Zr,scale:Ju,scaleX:Ju,scaleY:Ju,scaleZ:Ju,skew:Zr,skewX:Zr,skewY:Zr,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:ql,originX:tb,originY:tb,originZ:ie,zIndex:nb,fillOpacity:ql,strokeOpacity:ql,numOctaves:nb};function Tx(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let c=!1,u=!1,h=!0;for(const f in e){const m=e[f];if(ak(f)){i[f]=m;continue}const g=ck[f],v=Y3(m,g);if(to.has(f)){if(c=!0,o[f]=v,!h)continue;m!==(g.default||0)&&(h=!1)}else f.startsWith("origin")?(u=!0,a[f]=v):s[f]=v}if(e.transform||(c||r?s.transform=G3(t.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:f="50%",originY:m="50%",originZ:g=0}=a;s.transformOrigin=`${f} ${m} ${g}`}}const Ex=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function uk(t,e,n){for(const r in e)!sn(e[r])&&!ik(r,n)&&(t[r]=e[r])}function eF({transformTemplate:t},e,n){return N.useMemo(()=>{const r=Ex();return Tx(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function tF(t,e,n){const r=t.style||{},s={};return uk(s,r,t),Object.assign(s,eF(t,e,n)),t.transformValues?t.transformValues(s):s}function nF(t,e,n){const r={},s=tF(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const rF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rF.has(t)}let dk=t=>!Sh(t);function sF(t){t&&(dk=e=>e.startsWith("on")?!Sh(e):t(e))}try{sF(require("@emotion/is-prop-valid").default)}catch{}function iF(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(dk(s)||n===!0&&Sh(s)||!e&&!Sh(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function rb(t,e,n){return typeof t=="string"?t:ie.transform(e+n*t)}function oF(t,e,n){const r=rb(e,t.x,t.width),s=rb(n,t.y,t.height);return`${r} ${s}`}const aF={offset:"stroke-dashoffset",array:"stroke-dasharray"},lF={offset:"strokeDashoffset",array:"strokeDasharray"};function cF(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?aF:lF;t[i.offset]=ie.transform(-r);const o=ie.transform(e),a=ie.transform(n);t[i.array]=`${o} ${a}`}function Nx(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,f,m){if(Tx(t,u,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:x}=t;g.transform&&(x&&(v.transform=g.transform),delete g.transform),x&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=oF(x,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&cF(g,o,a,c,!1)}const hk=()=>({...Ex(),attrs:{}}),Ix=t=>typeof t=="string"&&t.toLowerCase()==="svg";function uF(t,e,n,r){const s=N.useMemo(()=>{const i=hk();return Nx(i,e,{enableHardwareAcceleration:!1},Ix(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};uk(i,t.style,t),s.style={...i,...s.style}}return s}function dF(t=!1){return(n,r,s,{latestValues:i},o)=>{const c=(bx(n)?uF:nF)(r,i,o,n),h={...iF(r,typeof n=="string",t),...c,ref:s},{children:f}=r,m=N.useMemo(()=>sn(f)?f.get():f,[f]);return N.createElement(n,{...h,children:m})}}function fk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const mk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pk(t,e,n,r){fk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(mk.has(s)?s:xx(s),e.attrs[s])}function Sx(t,e){const{style:n}=t,r={};for(const s in n)(sn(n[s])||e.style&&sn(e.style[s])||ik(s,t))&&(r[s]=n[s]);return r}function gk(t,e){const n=Sx(t,e);for(const r in t)if(sn(t[r])||sn(e[r])){const s=su.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function kx(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function yk(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const kh=t=>Array.isArray(t),hF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fF=t=>kh(t)?t[t.length-1]||0:t;function Cd(t){const e=sn(t)?t.get():t;return hF(e)?e.toValue():e}function mF({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:pF(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const xk=t=>(e,n)=>{const r=N.useContext(Rf),s=N.useContext(Df),i=()=>mF(t,e,r,s);return n?i():yk(i)};function pF(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Cd(i[m]);let{initial:o,animate:a}=t;const c=Mf(t),u=rk(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!Lf(f)&&(Array.isArray(f)?f:[f]).forEach(g=>{const v=kx(t,g);if(!v)return;const{transitionEnd:x,transition:T,...b}=v;for(const y in b){let _=b[y];if(Array.isArray(_)){const I=h?_.length-1:0;_=_[I]}_!==null&&(s[y]=_)}for(const y in x)s[y]=x[y]}),s}const Ze=t=>t;class sb{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function gF(t){let e=new sb,n=new sb,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const f=h&&s,m=f?e:n;return u&&o.add(c),m.add(c)&&f&&s&&(r=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(c),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(c))}};return a}const Xu=["prepare","read","update","preRender","render","postRender"],yF=40;function xF(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Xu.reduce((f,m)=>(f[m]=gF(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,yF),1),s.timestamp=f,s.isProcessing=!0,Xu.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},c=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Xu.reduce((f,m)=>{const g=i[m];return f[m]=(v,x=!1,T=!1)=>(n||c(),g.schedule(v,x,T)),f},{}),cancel:f=>Xu.forEach(m=>i[m].cancel(f)),state:s,steps:i}}const{schedule:Re,cancel:Fr,state:At,steps:Hm}=xF(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),vF={useVisualState:xk({scrapeMotionValuesFromProps:gk,createRenderState:hk,onMount:(t,e,{renderState:n,latestValues:r})=>{Re.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Re.render(()=>{Nx(n,r,{enableHardwareAcceleration:!1},Ix(e.tagName),t.transformTemplate),pk(e,n)})}})},wF={useVisualState:xk({scrapeMotionValuesFromProps:Sx,createRenderState:Ex})};function _F(t,{forwardMotionProps:e=!1},n,r){return{...bx(t)?vF:wF,preloadedFeatures:n,useRender:dF(e),createVisualElement:r,Component:t}}function Tr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const vk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Ff(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const bF=t=>e=>vk(e)&&t(e,Ff(e));function kr(t,e,n,r){return Tr(t,e,bF(n),r)}const TF=(t,e)=>n=>e(t(n)),ks=(...t)=>t.reduce(TF);function wk(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const ib=wk("dragHorizontal"),ob=wk("dragVertical");function _k(t){let e=!1;if(t==="y")e=ob();else if(t==="x")e=ib();else{const n=ib(),r=ob();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function bk(){const t=_k(!0);return t?(t(),!1):!0}class Qs{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ab(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||bk())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Re.update(()=>a[r](i,o))};return kr(t.current,n,s,{passive:!t.getProps()[r]})}class EF extends Qs{mount(){this.unmount=ks(ab(this.node,!0),ab(this.node,!1))}unmount(){}}class NF extends Qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ks(Tr(this.node.current,"focus",()=>this.onFocus()),Tr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Tk=(t,e)=>e?t===e?!0:Tk(t,e.parentElement):!1;function qm(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ff(n))}class IF extends Qs{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=kr(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Re.update(()=>{!f&&!Tk(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=kr(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ks(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||qm("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Re.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Tr(this.node.current,"keyup",o),qm("down",(a,c)=>{this.startPress(a,c)})},n=Tr(this.node.current,"keydown",e),r=()=>{this.isPressing&&qm("cancel",(i,o)=>this.cancelPress(i,o))},s=Tr(this.node.current,"blur",r);this.removeAccessibleListeners=ks(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Re.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Re.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=kr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Tr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ks(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Fg=new WeakMap,Km=new WeakMap,SF=t=>{const e=Fg.get(t.target);e&&e(t)},kF=t=>{t.forEach(SF)};function CF({root:t,...e}){const n=t||document;Km.has(n)||Km.set(n,{});const r=Km.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(kF,{root:t,...e})),r[s]}function jF(t,e,n){const r=CF(e);return Fg.set(t,n),r.observe(t),()=>{Fg.delete(t),r.unobserve(t)}}const PF={some:0,all:1};class AF extends Qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:PF[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=u?h:f;m&&m(c)};return jF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(RF(e,n))&&this.startObserver()}unmount(){}}function RF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const DF={inView:{Feature:AF},tap:{Feature:IF},focus:{Feature:NF},hover:{Feature:EF}};function Ek(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function VF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function LF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Uf(t,e,n){const r=t.getProps();return kx(r,e,n!==void 0?n:r.custom,VF(t),LF(t))}let Ch=Ze;const Ei=t=>t*1e3,Cr=t=>t/1e3,MF={current:!1},Nk=t=>Array.isArray(t)&&typeof t[0]=="number";function Ik(t){return!!(!t||typeof t=="string"&&Sk[t]||Nk(t)||Array.isArray(t)&&t.every(Ik))}const kl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Sk={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:kl([0,.65,.55,1]),circOut:kl([.55,0,1,.45]),backIn:kl([.31,.01,.66,-.59]),backOut:kl([.33,1.53,.69,.99])};function kk(t){if(t)return Nk(t)?kl(t):Array.isArray(t)?t.map(kk):Sk[t]}function OF(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=kk(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function FF(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Ck=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,UF=1e-7,BF=12;function $F(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=Ck(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>UF&&++a<BF);return o}function au(t,e,n,r){if(t===e&&n===r)return Ze;const s=i=>$F(i,0,1,t,n);return i=>i===0||i===1?i:Ck(s(i),e,r)}const zF=au(.42,0,1,1),HF=au(0,0,.58,1),jk=au(.42,0,.58,1),qF=t=>Array.isArray(t)&&typeof t[0]!="number",Pk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ak=t=>e=>1-t(1-e),Cx=t=>1-Math.sin(Math.acos(t)),Rk=Ak(Cx),KF=Pk(Cx),Dk=au(.33,1.53,.69,.99),jx=Ak(Dk),WF=Pk(jx),GF=t=>(t*=2)<1?.5*jx(t):.5*(2-Math.pow(2,-10*(t-1))),lb={linear:Ze,easeIn:zF,easeInOut:jk,easeOut:HF,circIn:Cx,circInOut:KF,circOut:Rk,backIn:jx,backInOut:WF,backOut:Dk,anticipate:GF},cb=t=>{if(Array.isArray(t)){Ch(t.length===4);const[e,n,r,s]=t;return au(e,n,r,s)}else if(typeof t=="string")return Ch(lb[t]!==void 0),lb[t];return t},Px=(t,e)=>n=>!!(iu(n)&&J3.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Vk=(t,e,n)=>r=>{if(!iu(r))return r;const[s,i,o,a]=r.match(Of);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},QF=t=>Vs(0,255,t),Wm={...no,transform:t=>Math.round(QF(t))},wi={test:Px("rgb","red"),parse:Vk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Wm.transform(t)+", "+Wm.transform(e)+", "+Wm.transform(n)+", "+Kl(ql.transform(r))+")"};function YF(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ug={test:Px("#"),parse:YF,transform:wi.transform},Fo={test:Px("hsl","hue"),parse:Vk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+sr.transform(Kl(e))+", "+sr.transform(Kl(n))+", "+Kl(ql.transform(r))+")"},Bt={test:t=>wi.test(t)||Ug.test(t)||Fo.test(t),parse:t=>wi.test(t)?wi.parse(t):Fo.test(t)?Fo.parse(t):Ug.parse(t),transform:t=>iu(t)?t:t.hasOwnProperty("red")?wi.transform(t):Fo.transform(t)},Ke=(t,e,n)=>-n*t+n*e+t;function Gm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function JF({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=Gm(c,a,t+1/3),i=Gm(c,a,t),o=Gm(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Qm=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},XF=[Ug,wi,Fo],ZF=t=>XF.find(e=>e.test(t));function ub(t){const e=ZF(t);let n=e.parse(t);return e===Fo&&(n=JF(n)),n}const Lk=(t,e)=>{const n=ub(t),r=ub(e),s={...n};return i=>(s.red=Qm(n.red,r.red,i),s.green=Qm(n.green,r.green,i),s.blue=Qm(n.blue,r.blue,i),s.alpha=Ke(n.alpha,r.alpha,i),wi.transform(s))};function eU(t){var e,n;return isNaN(t)&&iu(t)&&(((e=t.match(Of))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(lk))===null||n===void 0?void 0:n.length)||0)>0}const Mk={regex:Q3,countKey:"Vars",token:"${v}",parse:Ze},Ok={regex:lk,countKey:"Colors",token:"${c}",parse:Bt.parse},Fk={regex:Of,countKey:"Numbers",token:"${n}",parse:no.parse};function Ym(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function jh(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ym(n,Mk),Ym(n,Ok),Ym(n,Fk),n}function Uk(t){return jh(t).values}function Bk(t){const{values:e,numColors:n,numVars:r,tokenised:s}=jh(t),i=e.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(Mk.token,o[c]):c<r+n?a=a.replace(Ok.token,Bt.transform(o[c])):a=a.replace(Fk.token,Kl(o[c]));return a}}const tU=t=>typeof t=="number"?0:t;function nU(t){const e=Uk(t);return Bk(t)(e.map(tU))}const Ls={test:eU,parse:Uk,createTransformer:Bk,getAnimatableNone:nU},$k=(t,e)=>n=>`${n>0?e:t}`;function zk(t,e){return typeof t=="number"?n=>Ke(t,e,n):Bt.test(t)?Lk(t,e):t.startsWith("var(")?$k(t,e):qk(t,e)}const Hk=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>zk(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},rU=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=zk(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},qk=(t,e)=>{const n=Ls.createTransformer(e),r=jh(t),s=jh(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ks(Hk(r.values,s.values),n):$k(t,e)},Ac=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},db=(t,e)=>n=>Ke(t,e,n);function sU(t){return typeof t=="number"?db:typeof t=="string"?Bt.test(t)?Lk:qk:Array.isArray(t)?Hk:typeof t=="object"?rU:db}function iU(t,e,n){const r=[],s=n||sU(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ze:e;a=ks(c,a)}r.push(a)}return r}function Kk(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ch(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=iU(e,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Ac(t[h],t[h+1],u);return o[h](f)};return n?u=>c(Vs(t[0],t[i-1],u)):c}function oU(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ac(0,e,r);t.push(Ke(n,1,s))}}function aU(t){const e=[0];return oU(e,t.length-1),e}function lU(t,e){return t.map(n=>n*e)}function cU(t,e){return t.map(()=>e||jk).splice(0,t.length-1)}function Ph({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=qF(r)?r.map(cb):cb(r),i={done:!1,value:e[0]},o=lU(n&&n.length===e.length?n:aU(e),t),a=Kk(o,e,{ease:Array.isArray(s)?s:cU(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}function Wk(t,e){return e?t*(1e3/e):0}const uU=5;function Gk(t,e,n){const r=Math.max(e-uU,0);return Wk(n-t(r),e-r)}const Jm=.001,dU=.01,hU=10,fU=.05,mU=1;function pU({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=Vs(fU,mU,o),t=Vs(dU,hU,Cr(t)),o<1?(s=u=>{const h=u*o,f=h*t,m=h-n,g=Bg(u,o),v=Math.exp(-f);return Jm-m/g*v},i=u=>{const f=u*o*t,m=f*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-f),x=Bg(Math.pow(u,2),o);return(-s(u)+Jm>0?-1:1)*((m-g)*v)/x}):(s=u=>{const h=Math.exp(-u*t),f=(u-n)*t+1;return-Jm+h*f},i=u=>{const h=Math.exp(-u*t),f=(n-u)*(t*t);return h*f});const a=5/t,c=yU(s,i,a);if(t=Ei(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const gU=12;function yU(t,e,n){let r=n;for(let s=1;s<gU;s++)r=r-t(r)/e(r);return r}function Bg(t,e){return t*Math.sqrt(1-e*e)}const xU=["duration","bounce"],vU=["stiffness","damping","mass"];function hb(t,e){return e.some(n=>t[n]!==void 0)}function wU(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!hb(t,vU)&&hb(t,xU)){const n=pU(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Qk({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=wU({...r,velocity:-Cr(r.velocity||0)}),g=f||0,v=c/(2*Math.sqrt(a*u)),x=i-s,T=Cr(Math.sqrt(a/u)),b=Math.abs(x)<5;n||(n=b?.01:2),e||(e=b?.005:.5);let y;if(v<1){const _=Bg(T,v);y=I=>{const A=Math.exp(-v*T*I);return i-A*((g+v*T*x)/_*Math.sin(_*I)+x*Math.cos(_*I))}}else if(v===1)y=_=>i-Math.exp(-T*_)*(x+(g+T*x)*_);else{const _=T*Math.sqrt(v*v-1);y=I=>{const A=Math.exp(-v*T*I),R=Math.min(_*I,300);return i-A*((g+v*T*x)*Math.sinh(R)+_*x*Math.cosh(R))/_}}return{calculatedDuration:m&&h||null,next:_=>{const I=y(_);if(m)o.done=_>=h;else{let A=g;_!==0&&(v<1?A=Gk(y,_,I):A=0);const R=Math.abs(A)<=n,S=Math.abs(i-I)<=e;o.done=R&&S}return o.value=o.done?i:I,o}}}function fb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},g=E=>a!==void 0&&E<a||c!==void 0&&E>c,v=E=>a===void 0?c:c===void 0||Math.abs(a-E)<Math.abs(c-E)?a:c;let x=n*e;const T=f+x,b=o===void 0?T:o(T);b!==T&&(x=b-f);const y=E=>-x*Math.exp(-E/r),_=E=>b+y(E),I=E=>{const k=y(E),j=_(E);m.done=Math.abs(k)<=u,m.value=m.done?b:j};let A,R;const S=E=>{g(m.value)&&(A=E,R=Qk({keyframes:[m.value,v(m.value)],velocity:Gk(_,E,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:E=>{let k=!1;return!R&&A===void 0&&(k=!0,I(E),S(E)),A!==void 0&&E>A?R.next(E-A):(!k&&I(E),m)}}}const _U=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Re.update(e,!0),stop:()=>Fr(e),now:()=>At.isProcessing?At.timestamp:performance.now()}},mb=2e4;function pb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<mb;)e+=n,r=t.next(e);return e>=mb?1/0:e}const bU={decay:fb,inertia:fb,tween:Ph,keyframes:Ph,spring:Qk};function Ah({autoplay:t=!0,delay:e=0,driver:n=_U,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:f,...m}){let g=1,v=!1,x,T;const b=()=>{T=new Promise(te=>{x=te})};b();let y;const _=bU[s]||Ph;let I;_!==Ph&&typeof r[0]!="number"&&(I=Kk([0,100],r,{clamp:!1}),r=[0,100]);const A=_({...m,keyframes:r});let R;a==="mirror"&&(R=_({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let S="idle",E=null,k=null,j=null;A.calculatedDuration===null&&i&&(A.calculatedDuration=pb(A));const{calculatedDuration:D}=A;let V=1/0,P=1/0;D!==null&&(V=D+o,P=V*(i+1)-o);let X=0;const de=te=>{if(k===null)return;g>0&&(k=Math.min(k,te)),g<0&&(k=Math.min(te-P/g,k)),E!==null?X=E:X=Math.round(te-k)*g;const le=X-e*(g>=0?1:-1),xe=g>=0?le<0:le>P;X=Math.max(le,0),S==="finished"&&E===null&&(X=P);let Et=X,ut=A;if(i){const Hr=Math.min(X,P)/V;let B=Math.floor(Hr),se=Hr%1;!se&&Hr>=1&&(se=1),se===1&&B--,B=Math.min(B,i+1),!!(B%2)&&(a==="reverse"?(se=1-se,o&&(se-=o/V)):a==="mirror"&&(ut=R)),Et=Vs(0,1,se)*V}const it=xe?{done:!1,value:r[0]}:ut.next(Et);I&&(it.value=I(it.value));let{done:Yt}=it;!xe&&D!==null&&(Yt=g>=0?X>=P:X<=0);const so=E===null&&(S==="finished"||S==="running"&&Yt);return f&&f(it.value),so&&$(),it},he=()=>{y&&y.stop(),y=void 0},ke=()=>{S="idle",he(),x(),b(),k=j=null},$=()=>{S="finished",h&&h(),he(),x()},z=()=>{if(v)return;y||(y=n(de));const te=y.now();c&&c(),E!==null?k=te-E:(!k||S==="finished")&&(k=te),S==="finished"&&b(),j=k,E=null,S="running",y.start()};t&&z();const G={then(te,le){return T.then(te,le)},get time(){return Cr(X)},set time(te){te=Ei(te),X=te,E!==null||!y||g===0?E=te:k=y.now()-te/g},get duration(){const te=A.calculatedDuration===null?pb(A):A.calculatedDuration;return Cr(te)},get speed(){return g},set speed(te){te===g||!y||(g=te,G.time=Cr(X))},get state(){return S},play:z,pause:()=>{S="paused",E=X},stop:()=>{v=!0,S!=="idle"&&(S="idle",u&&u(),ke())},cancel:()=>{j!==null&&de(j),ke()},complete:()=>{S="finished"},sample:te=>(k=0,de(te))};return G}function TU(t){let e;return()=>(e===void 0&&(e=t()),e)}const EU=TU(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),NU=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Zu=10,IU=2e4,SU=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Ik(e.ease);function kU(t,e,{onUpdate:n,onComplete:r,...s}){if(!(EU()&&NU.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(_=>{a=_})};h();let{keyframes:f,duration:m=300,ease:g,times:v}=s;if(SU(e,s)){const _=Ah({...s,repeat:0,delay:0});let I={done:!1,value:f[0]};const A=[];let R=0;for(;!I.done&&R<IU;)I=_.sample(R),A.push(I.value),R+=Zu;v=void 0,f=A,m=R-Zu,g="linear"}const x=OF(t.owner.current,e,f,{...s,duration:m,ease:g,times:v}),T=()=>{u=!1,x.cancel()},b=()=>{u=!0,Re.update(T),a(),h()};return x.onfinish=()=>{u||(t.set(FF(f,s)),r&&r(),b())},{then(_,I){return c.then(_,I)},attachTimeline(_){return x.timeline=_,x.onfinish=null,Ze},get time(){return Cr(x.currentTime||0)},set time(_){x.currentTime=Ei(_)},get speed(){return x.playbackRate},set speed(_){x.playbackRate=_},get duration(){return Cr(m)},play:()=>{o||(x.play(),Fr(T))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:_}=x;if(_){const I=Ah({...s,autoplay:!1});t.setWithVelocity(I.sample(_-Zu).value,I.sample(_).value,Zu)}b()},complete:()=>{u||x.finish()},cancel:b}}function CU({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ze,pause:Ze,stop:Ze,then:i=>(i(),Promise.resolve()),cancel:Ze,complete:Ze});return e?Ah({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const jU={type:"spring",stiffness:500,damping:25,restSpeed:10},PU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),AU={type:"keyframes",duration:.8},RU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DU=(t,{keyframes:e})=>e.length>2?AU:to.has(t)?t.startsWith("scale")?PU(e[1]):jU:RU,$g=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ls.test(e)||e==="0")&&!e.startsWith("url(")),VU=new Set(["brightness","contrast","saturate","opacity"]);function LU(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Of)||[];if(!r)return t;const s=n.replace(r,"");let i=VU.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const MU=/([a-z-]*)\(.*?\)/g,zg={...Ls,getAnimatableNone:t=>{const e=t.match(MU);return e?e.map(LU).join(" "):t}},OU={...ck,color:Bt,backgroundColor:Bt,outlineColor:Bt,fill:Bt,stroke:Bt,borderColor:Bt,borderTopColor:Bt,borderRightColor:Bt,borderBottomColor:Bt,borderLeftColor:Bt,filter:zg,WebkitFilter:zg},Ax=t=>OU[t];function Yk(t,e){let n=Ax(t);return n!==zg&&(n=Ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Jk=t=>/^0[^.\s]+$/.test(t);function FU(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Jk(t)}function UU(t,e,n,r){const s=$g(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),FU(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Yk(e,a)}return i}function BU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Rx(t,e){return t[e]||t.default||t}const $U={skipAnimations:!1},Dx=(t,e,n,r={})=>s=>{const i=Rx(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ei(o);const c=UU(e,t,n,i),u=c[0],h=c[c.length-1],f=$g(t,u),m=$g(t,h);let g={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:v=>{e.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(BU(i)||(g={...g,...DU(t,g)}),g.duration&&(g.duration=Ei(g.duration)),g.repeatDelay&&(g.repeatDelay=Ei(g.repeatDelay)),!f||!m||MF.current||i.type===!1||$U.skipAnimations)return CU(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=kU(e,t,g);if(v)return v}return Ah(g)};function Rh(t){return!!(sn(t)&&t.add)}const Xk=t=>/^\-?\d*\.?\d+$/.test(t);function Vx(t,e){t.indexOf(e)===-1&&t.push(e)}function Lx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Mx{constructor(){this.subscriptions=[]}add(e){return Vx(this.subscriptions,e),()=>Lx(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zU=t=>!isNaN(parseFloat(t));class HU{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=At;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=zU(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Mx);const r=this.events[e].add(n);return e==="change"?()=>{r(),Re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Wk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ya(t,e){return new HU(t,e)}const Zk=t=>e=>e.test(t),qU={test:t=>t==="auto",parse:t=>t},eC=[no,ie,sr,Zr,Z3,X3,qU],ul=t=>eC.find(Zk(t)),KU=[...eC,Bt,Ls],WU=t=>KU.find(Zk(t));function GU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ya(n))}function QU(t,e){const n=Uf(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=fF(i[o]);GU(t,o,a)}}function YU(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:t.readValue(c))!==null&&s!==void 0?s:e[c]),h!=null&&(typeof h=="string"&&(Xk(h)||Jk(h))?h=parseFloat(h):!WU(h)&&Ls.test(u)&&(h=Yk(c,u)),t.addValue(c,ya(h,{owner:t})),n[c]===void 0&&(n[c]=h),h!==null&&t.setBaseTarget(c,h))}}function JU(t,e){return e?(e[t]||e.default||e).from:void 0}function XU(t,e,n){const r={};for(const s in t){const i=JU(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function ZU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function e9(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function tC(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(i=r);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const m=t.getValue(f),g=a[f];if(!m||g===void 0||h&&ZU(h,f))continue;const v={delay:n,elapsed:0,...Rx(i||{},f)};if(window.HandoffAppearAnimations){const b=t.getProps()[nk];if(b){const y=window.HandoffAppearAnimations(b,f,m,Re);y!==null&&(v.elapsed=y,v.isHandoff=!0)}}let x=!v.isHandoff&&!e9(m,g);if(v.type==="spring"&&(m.getVelocity()||v.velocity)&&(x=!1),m.animation&&(x=!1),x)continue;m.start(Dx(f,m,g,t.shouldReduceMotion&&to.has(f)?{type:!1}:v));const T=m.animation;Rh(c)&&(c.add(f),T.then(()=>c.remove(f))),u.push(T)}return o&&Promise.all(u).then(()=>{o&&QU(t,o)}),u}function Hg(t,e,n={}){const r=Uf(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(tC(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return t9(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function t9(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(n9).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Hg(u,e,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function n9(t,e){return t.sortNodePosition(e)}function r9(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Hg(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Hg(t,e,n);else{const s=typeof e=="function"?Uf(t,e,n.custom):e;r=Promise.all(tC(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const s9=[...vx].reverse(),i9=vx.length;function o9(t){return e=>Promise.all(e.map(({animation:n,options:r})=>r9(t,n,r)))}function a9(t){let e=o9(t);const n=c9();let r=!0;const s=(c,u)=>{const h=Uf(t,u);if(h){const{transition:f,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function i(c){e=c(t)}function o(c,u){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],g=new Set;let v={},x=1/0;for(let b=0;b<i9;b++){const y=s9[b],_=n[y],I=h[y]!==void 0?h[y]:f[y],A=jc(I),R=y===u?_.isActive:null;R===!1&&(x=b);let S=I===f[y]&&I!==h[y]&&A;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),_.protectedKeys={...v},!_.isActive&&R===null||!I&&!_.prevProp||Lf(I)||typeof I=="boolean")continue;let k=l9(_.prevProp,I)||y===u&&_.isActive&&!S&&A||b>x&&A,j=!1;const D=Array.isArray(I)?I:[I];let V=D.reduce(s,{});R===!1&&(V={});const{prevResolvedValues:P={}}=_,X={...P,...V},de=he=>{k=!0,g.has(he)&&(j=!0,g.delete(he)),_.needsAnimating[he]=!0};for(const he in X){const ke=V[he],$=P[he];if(v.hasOwnProperty(he))continue;let z=!1;kh(ke)&&kh($)?z=!Ek(ke,$):z=ke!==$,z?ke!==void 0?de(he):g.add(he):ke!==void 0&&g.has(he)?de(he):_.protectedKeys[he]=!0}_.prevProp=I,_.prevResolvedValues=V,_.isActive&&(v={...v,...V}),r&&t.blockInitialAnimation&&(k=!1),k&&(!S||j)&&m.push(...D.map(he=>({animation:he,options:{type:y,...c}})))}if(g.size){const b={};g.forEach(y=>{const _=t.getBaseTarget(y);_!==void 0&&(b[y]=_)}),m.push({animation:b})}let T=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(m):Promise.resolve()}function a(c,u,h){var f;if(n[c].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(c,u)}),n[c].isActive=u;const m=o(h,c);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function l9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Ek(e,t):!1}function ni(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function c9(){return{animate:ni(!0),whileInView:ni(),whileHover:ni(),whileTap:ni(),whileDrag:ni(),whileFocus:ni(),exit:ni()}}class u9 extends Qs{constructor(e){super(e),e.animationState||(e.animationState=a9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Lf(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let d9=0;class h9 extends Qs{constructor(){super(...arguments),this.id=d9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const f9={animation:{Feature:u9},exit:{Feature:h9}},gb=(t,e)=>Math.abs(t-e);function m9(t,e){const n=gb(t.x,e.x),r=gb(t.y,e.y);return Math.sqrt(n**2+r**2)}class nC{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Zm(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=m9(f.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:v}=f,{timestamp:x}=At;this.history.push({...v,timestamp:x});const{onStart:T,onMove:b}=this.handlers;m||(T&&T(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Xm(m,this.transformPagePoint),Re.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Zm(f.type==="pointercancel"?this.lastMoveEventInfo:Xm(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,T),v&&v(f,T)},!vk(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Ff(e),a=Xm(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=At;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Zm(a,this.history)),this.removeListeners=ks(kr(this.contextWindow,"pointermove",this.handlePointerMove),kr(this.contextWindow,"pointerup",this.handlePointerUp),kr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fr(this.updatePoint)}}function Xm(t,e){return e?{point:e(t.point)}:t}function yb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Zm({point:t},e){return{point:t,delta:yb(t,rC(e)),offset:yb(t,p9(e)),velocity:g9(e,.1)}}function p9(t){return t[0]}function rC(t){return t[t.length-1]}function g9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=rC(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ei(e)));)n--;if(!r)return{x:0,y:0};const i=Cr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function gn(t){return t.max-t.min}function qg(t,e=0,n=.01){return Math.abs(t-e)<=n}function xb(t,e,n,r=.5){t.origin=r,t.originPoint=Ke(e.min,e.max,t.origin),t.scale=gn(n)/gn(e),(qg(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ke(n.min,n.max,t.origin)-t.originPoint,(qg(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Wl(t,e,n,r){xb(t.x,e.x,n.x,r?r.originX:void 0),xb(t.y,e.y,n.y,r?r.originY:void 0)}function vb(t,e,n){t.min=n.min+e.min,t.max=t.min+gn(e)}function y9(t,e,n){vb(t.x,e.x,n.x),vb(t.y,e.y,n.y)}function wb(t,e,n){t.min=e.min-n.min,t.max=t.min+gn(e)}function Gl(t,e,n){wb(t.x,e.x,n.x),wb(t.y,e.y,n.y)}function x9(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ke(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ke(n,t,r.max):Math.min(t,n)),t}function _b(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function v9(t,{top:e,left:n,bottom:r,right:s}){return{x:_b(t.x,n,s),y:_b(t.y,e,r)}}function bb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function w9(t,e){return{x:bb(t.x,e.x),y:bb(t.y,e.y)}}function _9(t,e){let n=.5;const r=gn(t),s=gn(e);return s>r?n=Ac(e.min,e.max-r,t.min):r>s&&(n=Ac(t.min,t.max-s,e.min)),Vs(0,1,n)}function b9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Kg=.35;function T9(t=Kg){return t===!1?t=0:t===!0&&(t=Kg),{x:Tb(t,"left","right"),y:Tb(t,"top","bottom")}}function Tb(t,e,n){return{min:Eb(t,e),max:Eb(t,n)}}function Eb(t,e){return typeof t=="number"?t:t[e]||0}const Nb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:Nb(),y:Nb()}),Ib=()=>({min:0,max:0}),nt=()=>({x:Ib(),y:Ib()});function _n(t){return[t("x"),t("y")]}function sC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function E9({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function N9(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ep(t){return t===void 0||t===1}function Wg({scale:t,scaleX:e,scaleY:n}){return!ep(t)||!ep(e)||!ep(n)}function li(t){return Wg(t)||iC(t)||t.z||t.rotate||t.rotateX||t.rotateY}function iC(t){return Sb(t.x)||Sb(t.y)}function Sb(t){return t&&t!=="0%"}function Dh(t,e,n){const r=t-n,s=e*r;return n+s}function kb(t,e,n,r,s){return s!==void 0&&(t=Dh(t,s,r)),Dh(t,n,r)+e}function Gg(t,e=0,n=1,r,s){t.min=kb(t.min,e,n,r,s),t.max=kb(t.max,e,n,r,s)}function oC(t,{x:e,y:n}){Gg(t.x,e.translate,e.scale,e.originPoint),Gg(t.y,n.translate,n.scale,n.originPoint)}function I9(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Bo(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,oC(t,o)),r&&li(i.latestValues)&&Bo(t,i.latestValues))}e.x=Cb(e.x),e.y=Cb(e.y)}function Cb(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ns(t,e){t.min=t.min+e,t.max=t.max+e}function jb(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Ke(t.min,t.max,i);Gg(t,e[n],e[r],o,e.scale)}const S9=["x","scaleX","originX"],k9=["y","scaleY","originY"];function Bo(t,e){jb(t.x,e,S9),jb(t.y,e,k9)}function aC(t,e){return sC(N9(t.getBoundingClientRect(),e))}function C9(t,e,n){const r=aC(t,n),{scroll:s}=e;return s&&(ns(r.x,s.offset.x),ns(r.y,s.offset.y)),r}const lC=({current:t})=>t?t.ownerDocument.defaultView:null,j9=new WeakMap;class P9{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ff(h,"page").point)},i=(h,f)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=_k(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_n(T=>{let b=this.getAxisMotionValue(T).get()||0;if(sr.test(b)){const{projection:y}=this.visualElement;if(y&&y.layout){const _=y.layout.layoutBox[T];_&&(b=gn(_)*(parseFloat(b)/100))}}this.originPoint[T]=b}),v&&Re.update(()=>v(h,f),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:T}=f;if(g&&this.currentDirection===null){this.currentDirection=A9(T),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",f.point,T),this.updateAxis("y",f.point,T),this.visualElement.render(),x&&x(h,f)},a=(h,f)=>this.stop(h,f),c=()=>_n(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new nC(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:lC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Re.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ed(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=x9(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Oo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=v9(s.layoutBox,n):this.constraints=!1,this.elastic=T9(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&_n(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=b9(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Oo(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=C9(r,s.root,this.visualElement.getTransformPagePoint());let o=w9(s.layout.layoutBox,i);if(n){const a=n(E9(o));this.hasMutatedConstraints=!!a,a&&(o=sC(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=_n(h=>{if(!ed(h,n,this.currentDirection))return;let f=c&&c[h]||{};o&&(f={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Dx(e,r,0,n))}stopAnimation(){_n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_n(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_n(n=>{const{drag:r}=this.getProps();if(!ed(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ke(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Oo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};_n(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=_9({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_n(o=>{if(!ed(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Ke(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;j9.set(this.visualElement,this);const e=this.visualElement.current,n=kr(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Oo(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Tr(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(_n(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Kg,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ed(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function A9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class R9 extends Qs{constructor(e){super(e),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new P9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const Pb=t=>(e,n)=>{t&&Re.update(()=>t(e,n))};class D9 extends Qs{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(e){this.session=new nC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Pb(e),onStart:Pb(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Re.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=kr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function V9(){const t=N.useContext(Df);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=N.useId();return N.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const jd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ab(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const dl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ie.test(t))t=parseFloat(t);else return t;const n=Ab(t,e.target.x),r=Ab(t,e.target.y);return`${n}% ${r}%`}},L9={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ls.parse(t);if(s.length>5)return r;const i=Ls.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const u=Ke(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class M9 extends c0.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;q3(O9),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),jd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function cC(t){const[e,n]=V9(),r=N.useContext(_x);return c0.createElement(M9,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(sk),isPresent:e,safeToRemove:n})}const O9={borderRadius:{...dl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:dl,borderTopRightRadius:dl,borderBottomLeftRadius:dl,borderBottomRightRadius:dl,boxShadow:L9},uC=["TopLeft","TopRight","BottomLeft","BottomRight"],F9=uC.length,Rb=t=>typeof t=="string"?parseFloat(t):t,Db=t=>typeof t=="number"||ie.test(t);function U9(t,e,n,r,s,i){s?(t.opacity=Ke(0,n.opacity!==void 0?n.opacity:1,B9(r)),t.opacityExit=Ke(e.opacity!==void 0?e.opacity:1,0,$9(r))):i&&(t.opacity=Ke(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<F9;o++){const a=`border${uC[o]}Radius`;let c=Vb(e,a),u=Vb(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Db(c)===Db(u)?(t[a]=Math.max(Ke(Rb(c),Rb(u),r),0),(sr.test(u)||sr.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ke(e.rotate||0,n.rotate||0,r))}function Vb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const B9=dC(0,.5,Rk),$9=dC(.5,.95,Ze);function dC(t,e,n){return r=>r<t?0:r>e?1:n(Ac(t,e,r))}function Lb(t,e){t.min=e.min,t.max=e.max}function wn(t,e){Lb(t.x,e.x),Lb(t.y,e.y)}function Mb(t,e,n,r,s){return t-=e,t=Dh(t,1/n,r),s!==void 0&&(t=Dh(t,1/s,r)),t}function z9(t,e=0,n=1,r=.5,s,i=t,o=t){if(sr.test(e)&&(e=parseFloat(e),e=Ke(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ke(i.min,i.max,r);t===i&&(a-=e),t.min=Mb(t.min,e,n,a,s),t.max=Mb(t.max,e,n,a,s)}function Ob(t,e,[n,r,s],i,o){z9(t,e[n],e[r],e[s],e.scale,i,o)}const H9=["x","scaleX","originX"],q9=["y","scaleY","originY"];function Fb(t,e,n,r){Ob(t.x,e,H9,n?n.x:void 0,r?r.x:void 0),Ob(t.y,e,q9,n?n.y:void 0,r?r.y:void 0)}function Ub(t){return t.translate===0&&t.scale===1}function hC(t){return Ub(t.x)&&Ub(t.y)}function K9(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function fC(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Bb(t){return gn(t.x)/gn(t.y)}class W9{constructor(){this.members=[]}add(e){Vx(this.members,e),e.scheduleRender()}remove(e){if(Lx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $b(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const G9=(t,e)=>t.depth-e.depth;class Q9{constructor(){this.children=[],this.isDirty=!1}add(e){Vx(this.children,e),this.isDirty=!0}remove(e){Lx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(G9),this.isDirty=!1,this.children.forEach(e)}}function Y9(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(Fr(r),t(i-e))};return Re.read(r,!0),()=>Fr(r)}function J9(t){window.MotionDebug&&window.MotionDebug.record(t)}function X9(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Z9(t,e,n){const r=sn(t)?t:ya(t);return r.start(Dx("",r,e,n)),r.animation}const zb=["","X","Y","Z"],e8={visibility:"hidden"},Hb=1e3;let t8=0;const ci={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=t8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ci.totalNodes=ci.resolvedTargetDeltas=ci.recalculatedProjection=0,this.nodes.forEach(s8),this.nodes.forEach(c8),this.nodes.forEach(u8),this.nodes.forEach(i8),J9(ci)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Q9)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=X9(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Y9(m,250),jd.hasAnimatedSinceResize&&(jd.hasAnimatedSinceResize=!1,this.nodes.forEach(Kb))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||p8,{onLayoutAnimationStart:T,onLayoutAnimationComplete:b}=h.getProps(),y=!this.targetLayout||!fC(this.targetLayout,v)||g,_=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const I={...Rx(x,"layout"),onPlay:T,onComplete:b};(h.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||Kb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(d8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qb);return}this.isUpdating||this.nodes.forEach(a8),this.isUpdating=!1,this.nodes.forEach(l8),this.nodes.forEach(n8),this.nodes.forEach(r8),this.clearAllSnapshots();const a=performance.now();At.delta=Vs(0,1e3/60,a-At.timestamp),At.timestamp=a,At.isProcessing=!0,Hm.update.process(At),Hm.preRender.process(At),Hm.render.process(At),At.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(o8),this.sharedNodes.forEach(h8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!hC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||li(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),g8(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return nt();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ns(a.x,c.offset.x),ns(a.y,c.offset.y)),a}removeElementScroll(o){const a=nt();wn(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;if(u!==this.root&&h&&f.layoutScroll){if(h.isRoot){wn(a,o);const{scroll:m}=this.root;m&&(ns(a.x,-m.offset.x),ns(a.y,-m.offset.y))}ns(a.x,h.offset.x),ns(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=nt();wn(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Bo(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),li(h.latestValues)&&Bo(c,h.latestValues)}return li(this.latestValues)&&Bo(c,this.latestValues),c}removeTransform(o){const a=nt();wn(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!li(u.latestValues))continue;Wg(u.latestValues)&&u.updateSnapshot();const h=nt(),f=u.measurePageBox();wn(h,f),Fb(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return li(this.latestValues)&&Fb(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==At.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=At.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Gl(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),y9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wn(this.target,this.layout.layoutBox),oC(this.target,this.targetDelta)):wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Gl(this.relativeTargetOrigin,this.target,g.target),wn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ci.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wg(this.parent.latestValues)||iC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===At.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;wn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;I9(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=Uo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo());const x=this.projectionTransform;Wl(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=$b(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ci.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},f=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=nt(),g=c?c.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,T=this.getStack(),b=!T||T.members.length<=1,y=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(m8));this.animationProgress=0;let _;this.mixTargetDelta=I=>{const A=I/1e3;Wb(f.x,o.x,A),Wb(f.y,o.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Gl(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f8(this.relativeTarget,this.relativeTargetOrigin,m,A),_&&K9(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=nt()),wn(_,this.relativeTarget)),x&&(this.animationValues=h,U9(h,u,this.latestValues,A,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Re.update(()=>{jd.hasAnimatedSinceResize=!0,this.currentAnimation=Z9(0,Hb,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&pC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||nt();const f=gn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const m=gn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}wn(a,c),Bo(a,h),Wl(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new W9),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<zb.length;h++){const f="rotate"+zb[h];c[f]&&(u[f]=c[f],o.setStaticValue(f,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return e8;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Cd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!li(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=$b(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:g,y:v}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in Ih){if(m[x]===void 0)continue;const{correct:T,applyTo:b}=Ih[x],y=u.transform==="none"?m[x]:T(m[x],f);if(b){const _=b.length;for(let I=0;I<_;I++)u[b[I]]=y}else u[x]=y}return this.options.layoutId&&(u.pointerEvents=f===this?Cd(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(qb),this.root.sharedNodes.clear()}}}function n8(t){t.updateLayout()}function r8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?_n(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=gn(m);m.min=r[f].min,m.max=m.min+g}):pC(i,n.layoutBox,r)&&_n(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],g=gn(r[f]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Uo();Wl(a,r,n.layoutBox);const c=Uo();o?Wl(c,t.applyTransform(s,!0),n.measuredBox):Wl(c,r,n.layoutBox);const u=!hC(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const v=nt();Gl(v,n.layoutBox,m.layoutBox);const x=nt();Gl(x,r,g.layoutBox),fC(v,x)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function s8(t){ci.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function i8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function o8(t){t.clearSnapshot()}function qb(t){t.clearMeasurements()}function a8(t){t.isLayoutDirty=!1}function l8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function c8(t){t.resolveTargetDelta()}function u8(t){t.calcProjection()}function d8(t){t.resetRotation()}function h8(t){t.removeLeadSnapshot()}function Wb(t,e,n){t.translate=Ke(e.translate,0,n),t.scale=Ke(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Gb(t,e,n,r){t.min=Ke(e.min,n.min,r),t.max=Ke(e.max,n.max,r)}function f8(t,e,n,r){Gb(t.x,e.x,n.x,r),Gb(t.y,e.y,n.y,r)}function m8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p8={duration:.45,ease:[.4,0,.1,1]},Qb=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Yb=Qb("applewebkit/")&&!Qb("chrome/")?Math.round:Ze;function Jb(t){t.min=Yb(t.min),t.max=Yb(t.max)}function g8(t){Jb(t.x),Jb(t.y)}function pC(t,e,n){return t==="position"||t==="preserve-aspect"&&!qg(Bb(e),Bb(n),.2)}const y8=mC({attachResizeListener:(t,e)=>Tr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tp={current:void 0},gC=mC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!tp.current){const t=new y8({});t.mount(window),t.setOptions({layoutScroll:!0}),tp.current=t}return tp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),x8={pan:{Feature:D9},drag:{Feature:R9,ProjectionNode:gC,MeasureLayout:cC}},v8=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function w8(t){const e=v8.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Qg(t,e,n=1){const[r,s]=w8(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Xk(o)?parseFloat(o):o}else return Og(s)?Qg(s,e,n+1):s}function _8(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Og(i))return;const o=Qg(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Og(i))continue;const o=Qg(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const b8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),yC=t=>b8.has(t),T8=t=>Object.keys(t).some(yC),Xb=t=>t===no||t===ie,Zb=(t,e)=>parseFloat(t.split(", ")[e]),eT=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Zb(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Zb(i[1],t):0}},E8=new Set(["x","y","z"]),N8=su.filter(t=>!E8.has(t));function I8(t){const e=[];return N8.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const xa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:eT(4,13),y:eT(5,14)};xa.translateX=xa.x;xa.translateY=xa.y;const S8=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=xa[u](r,i)}),e.render();const c=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=xa[u](c,i)}),t},k8=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(yC);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let h=n[c],f=ul(h);const m=e[c];let g;if(kh(m)){const v=m.length,x=m[0]===null?1:0;h=m[x],f=ul(h);for(let T=x;T<v&&m[T]!==null;T++)g?Ch(ul(m[T])===g):g=ul(m[T])}else g=ul(m);if(f!==g)if(Xb(f)&&Xb(g)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof m=="string"?e[c]=parseFloat(m):Array.isArray(m)&&g===ie&&(e[c]=m.map(parseFloat))}else f!=null&&f.transform&&(g!=null&&g.transform)&&(h===0||m===0)?h===0?u.set(g.transform(h)):e[c]=f.transform(m):(o||(i=I8(t),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=S8(e,t,a);return i.length&&i.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),Vf&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function C8(t,e,n,r){return T8(e)?k8(t,e,n,r):{target:e,transitionEnd:r}}const j8=(t,e,n,r)=>{const s=_8(t,e,r);return e=s.target,r=s.transitionEnd,C8(t,e,n,r)},Yg={current:null},xC={current:!1};function P8(){if(xC.current=!0,!!Vf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=t.matches;t.addListener(e),e()}else Yg.current=!1}function A8(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(sn(i))t.addValue(s,i),Rh(r)&&r.add(s);else if(sn(o))t.addValue(s,ya(i,{owner:t})),Rh(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,ya(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const tT=new WeakMap,vC=Object.keys(Pc),R8=vC.length,nT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],D8=wx.length;class V8{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Re.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Mf(n),this.isVariantNode=rk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&sn(m)&&(m.set(a[f],!1),Rh(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,tT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xC.current||P8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tT.delete(this.current),this.projection&&this.projection.unmount(),Fr(this.notifyUpdate),Fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=to.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let c=0;c<R8;c++){const u=vC[c],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:g}=Pc[u];m&&(o=m),h(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||f&&Oo(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nT.length;r++){const s=nT[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=A8(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<D8;r++){const s=wx[r],i=this.props[s];(jc(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ya(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=kx(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!sn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Mx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wC extends V8{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=XU(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){YU(this,r,o);const a=j8(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function L8(t){return window.getComputedStyle(t)}class M8 extends wC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(to.has(n)){const r=Ax(n);return r&&r.default||0}else{const r=L8(e),s=(ak(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return aC(e,n)}build(e,n,r,s){Tx(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Sx(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){fk(e,n,r,s)}}class O8 extends wC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(to.has(n)){const r=Ax(n);return r&&r.default||0}return n=mk.has(n)?n:xx(n),e.getAttribute(n)}measureInstanceViewportBox(){return nt()}scrapeMotionValuesFromProps(e,n){return gk(e,n)}build(e,n,r,s){Nx(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){pk(e,n,r,s)}mount(e){this.isSVGTag=Ix(e.tagName),super.mount(e)}}const F8=(t,e)=>bx(t)?new O8(e,{enableHardwareAcceleration:!1}):new M8(e,{enableHardwareAcceleration:!0}),U8={layout:{ProjectionNode:gC,MeasureLayout:cC}},B8={...f9,...DF,...x8,...U8},L=z3((t,e)=>_F(t,e,B8,F8));function _C(){const t=N.useRef(!1);return yx(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function $8(){const t=_C(),[e,n]=N.useState(0),r=N.useCallback(()=>{t.current&&n(e+1)},[e]);return[N.useCallback(()=>Re.postRender(r),[r]),e]}class z8 extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H8({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),N.createElement(z8,{isPresent:e,childRef:r,sizeRef:s},N.cloneElement(t,{ref:r}))}const np=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=yk(q8),c=N.useId(),u=N.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return N.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),N.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=N.createElement(H8,{isPresent:n},t)),N.createElement(Df.Provider,{value:u},t)};function q8(){return new Map}function K8(t){return N.useEffect(()=>()=>t(),[])}const ui=t=>t.key||"";function W8(t,e){t.forEach(n=>{const r=ui(n);e.set(r,n)})}function G8(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const qn=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=N.useContext(_x).forceRender||$8()[0],c=_C(),u=G8(t);let h=u;const f=N.useRef(new Map).current,m=N.useRef(h),g=N.useRef(new Map).current,v=N.useRef(!0);if(yx(()=>{v.current=!1,W8(u,g),m.current=h}),K8(()=>{v.current=!0,g.clear(),f.clear()}),v.current)return N.createElement(N.Fragment,null,h.map(y=>N.createElement(np,{key:ui(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},y)));h=[...h];const x=m.current.map(ui),T=u.map(ui),b=x.length;for(let y=0;y<b;y++){const _=x[y];T.indexOf(_)===-1&&!f.has(_)&&f.set(_,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((y,_)=>{if(T.indexOf(_)!==-1)return;const I=g.get(_);if(!I)return;const A=x.indexOf(_);let R=y;if(!R){const S=()=>{f.delete(_);const E=Array.from(g.keys()).filter(k=>!T.includes(k));if(E.forEach(k=>g.delete(k)),m.current=u.filter(k=>{const j=ui(k);return j===_||E.includes(j)}),!f.size){if(c.current===!1)return;a(),r&&r()}};R=N.createElement(np,{key:ui(I),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:i,mode:o},I),f.set(_,R)}h.splice(A,0,R)}),h=h.map(y=>{const _=y.key;return f.has(_)?y:N.createElement(np,{key:ui(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),N.createElement(N.Fragment,null,f.size?h:h.map(y=>N.cloneElement(y)))};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Y=(t,e)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:c,...u},h)=>N.createElement("svg",{ref:h,...Q8,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Y8(t)}`,a].join(" "),...u},[...e.map(([f,m])=>N.createElement(f,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=Y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Y("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=Y("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=Y("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Y("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Y("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=Y("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=Y("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=Y("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=Y("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=Y("Cherry",[["path",{d:"M2 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"cvxqlc"}],["path",{d:"M12 17a5 5 0 0 0 10 0c0-2.76-2.5-5-5-3-2.5-2-5 .24-5 3Z",key:"1ostrc"}],["path",{d:"M7 14c3.22-2.91 4.29-8.75 5-12 1.66 2.38 4.94 9 5 12",key:"hqx58h"}],["path",{d:"M22 9c-4.29 0-7.14-2.33-10-7 5.71 0 10 4.67 10 7Z",key:"eykp1o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=Y("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Y("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Y("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=Y("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=Y("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=Y("Ear",[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Y("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Y("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Y("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Y("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=Y("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=Y("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=Y("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=Y("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=Y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=Y("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=Y("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Y("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=Y("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Y("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Y("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=Y("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Y("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=Y("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Y("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Y("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=Y("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=Y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=Y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=Y("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Y("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Y("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=Y("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Y("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Y("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Y("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=Y("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Y("Sunrise",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Y("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Y("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Y("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=Y("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=Y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Y("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=Y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Y("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Y("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Y("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Y("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=Y("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),jB=[{code:"bn",name:"বাংলা",flag:"🇧🇩"},{code:"en",name:"English",flag:"🇺🇸"},{code:"hi",name:"हिन्दी",flag:"🇮🇳"},{code:"ur",name:"اردو",flag:"🇵🇰"}],PB=({onLanguageSelect:t})=>{const{t:e}=on();return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:l.jsx(Xg,{className:"w-8 h-8 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),l.jsx("p",{className:"text-gray-600",children:e("selectLanguage")})]}),l.jsx("div",{className:"space-y-3",children:jB.map(n=>l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(n.code),className:"w-full p-4 bg-gray-50 hover:bg-blue-50 rounded-xl border-2 border-transparent hover:border-blue-200 transition-all duration-200 flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",children:n.flag}),l.jsx("span",{className:"text-lg font-medium text-gray-800",children:n.name})]})},n.code))}),l.jsx("div",{className:"mt-8 text-center",children:l.jsx("p",{className:"text-sm text-gray-500",children:"A companion for your journey of self-control and personal growth"})})]})})},AB=({onClose:t})=>{const{t:e,i18n:n}=on(),{currentUser:r}=vn(),s=Ki(),[i,o]=N.useState(!1),c=(()=>{const f=n.language;return f==="bn"||f==="ur"?{quote:f==="bn"?"তোমাদের মধ্যে সর্বোত্তম ঐ ব্যক্তি, যে ব্যক্তি নিজ চরিত্রকে সর্বোৎকৃষ্ট হিসেবে গঠন করে।":"تم میں سے بہترین وہ شخص ہے جو اپنے کردار کو بہترین بناتا ہے۔",source:f==="bn"?"- (বুখারী ও মুসলিম)":"- (بخاری و مسلم)",donationMessage:f==="bn"?"আমাদের এই যাত্রাকে সচল রাখতে এবং অন্যদের সাহায্য করতে আপনার সহায়তার প্রয়োজন। অল্প দানও একটি বড় পরিবর্তন আনতে পারে।":"ہمارے اس سفر کو جاری رکھنے اور دوسروں کی مدد کے لیے آپ کی مدد درکار ہے۔ تھوڑا سا عطیہ بھی بڑی تبدیلی لا سکتا ہے۔",buttonText:f==="bn"?"সহায়তা করুন":"مدد کریں"}:{quote:"The best of people are those who benefit others and strive for excellence in character.",source:"- Universal Wisdom",donationMessage:"Help us keep this journey alive and support others on their path. Even a small contribution can make a big difference.",buttonText:"Support Us"}})(),u=async()=>{o(!0);try{r&&await Sr(We(me,"users",r.uid),{last_daily_popup:new Date().toDateString()}),s("/profile"),t()}catch(f){console.error("Error updating popup status:",f)}finally{o(!1)}},h=async()=>{try{r&&await Sr(We(me,"users",r.uid),{last_daily_popup:new Date().toDateString()}),t()}catch(f){console.error("Error updating popup status:",f),t()}};return l.jsx(L.div,{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,children:l.jsxs(L.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-3xl w-full max-w-md max-h-[90vh] overflow-y-auto shadow-2xl",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"relative",children:[l.jsx("button",{onClick:h,className:"absolute top-4 right-4 z-10 p-2 bg-white bg-opacity-80 rounded-full hover:bg-opacity-100 transition-all shadow-lg",children:l.jsx(Os,{className:"w-5 h-5 text-gray-600"})}),l.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-orange-400 via-pink-500 to-purple-600 rounded-t-3xl flex items-center justify-center overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring",stiffness:200},className:"relative z-10",children:l.jsx(bB,{className:"w-16 h-16 text-white drop-shadow-lg"})}),l.jsx("div",{className:"absolute top-8 left-8 w-4 h-4 bg-white bg-opacity-30 rounded-full animate-pulse"}),l.jsx("div",{className:"absolute bottom-12 right-12 w-6 h-6 bg-white bg-opacity-20 rounded-full animate-pulse delay-1000"}),l.jsx("div",{className:"absolute top-16 right-8 w-3 h-3 bg-white bg-opacity-40 rounded-full animate-pulse delay-500"})]})]}),l.jsxs("div",{className:"p-8",children:[l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:n.language==="bn"?"শুভ সকাল!":n.language==="ur"?"صبح بخیر!":"Good Morning!"}),l.jsx("p",{className:"text-gray-600 text-sm",children:n.language==="bn"?"আজকের জন্য একটি অনুপ্রেরণামূলক বার্তা":n.language==="ur"?"آج کے لیے ایک متاثر کن پیغام":"An inspiring message for today"})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 mb-6 border-l-4 border-indigo-500",children:[l.jsxs("blockquote",{className:"text-gray-800 text-lg leading-relaxed mb-3 font-medium",children:['"',c.quote,'"']}),l.jsx("cite",{className:"text-indigo-600 text-sm font-medium",children:c.source})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Ms,{className:"w-5 h-5 text-red-500"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:n.language==="bn"?"আমাদের সাহায্য করুন":n.language==="ur"?"ہماری مدد کریں":"Help Us"})]}),l.jsx("p",{className:"text-gray-700 leading-relaxed text-sm",children:c.donationMessage})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"space-y-3",children:[l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:i,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-4 rounded-xl font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 flex items-center justify-center space-x-2",children:[l.jsx(Ms,{className:"w-5 h-5"}),l.jsx("span",{children:i?"Loading...":c.buttonText})]}),l.jsx("button",{onClick:h,className:"w-full text-gray-600 py-3 rounded-xl font-medium hover:bg-gray-100 transition-colors",children:n.language==="bn"?"পরে দেখব":n.language==="ur"?"بعد میں دیکھوں گا":"Maybe Later"})]})]})]})})},RB=()=>{const{t}=on(),{login:e,loginWithGoogle:n}=vn(),r=Ki(),[s,i]=N.useState(""),[o,a]=N.useState(""),[c,u]=N.useState(!1),[h,f]=N.useState(!1),[m,g]=N.useState({}),v=()=>{const _={};return s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(_.email="বৈধ ইমেইল ঠিকানা লিখুন"):_.email="ইমেইল লিখুন",o||(_.password="পাসওয়ার্ড লিখুন"),g(_),Object.keys(_).length===0},x=async _=>{if(_.preventDefault(),!!v()){f(!0),g({});try{await e(s.trim(),o),r("/dashboard")}catch(I){console.error("Login error:",I)}finally{f(!1)}}},T=async()=>{f(!0),g({});try{await n(),r("/dashboard")}catch(_){console.error("Google login error:",_)}finally{f(!1)}},b=_=>m[_]?"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300",y=_=>m[_]?"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300";return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),l.jsx("p",{className:"text-gray-600",children:t("login")})]}),l.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("email")}),l.jsxs("div",{className:"relative",children:[l.jsx(SC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"email",value:s,onChange:_=>{i(_.target.value),m.email&&g(I=>({...I,email:""}))},className:b("email"),placeholder:"your@email.com",disabled:h}),m.email&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),m.email&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),m.email]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:t("password")}),l.jsxs("div",{className:"relative",children:[l.jsx(Zg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:c?"text":"password",value:o,onChange:_=>{a(_.target.value),m.password&&g(I=>({...I,password:""}))},className:y("password"),placeholder:"••••••••",disabled:h}),l.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:h,children:c?l.jsx(Jg,{className:"w-5 h-5"}):l.jsx(Lh,{className:"w-5 h-5"})})]}),m.password&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),m.password]})]}),l.jsxs(L.button,{whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},type:"submit",disabled:h,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[h&&l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),l.jsx("span",{children:h?"লগইন হচ্ছে...":t("login")})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"অথবা"})})]}),l.jsxs(L.button,{whileHover:{scale:h?1:1.02},whileTap:{scale:h?1:.98},onClick:T,disabled:h,className:"w-full mt-4 bg-white border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l.jsx("span",{children:h?"প্রক্রিয়াকরণ...":t("loginWithGoogle")})]})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-gray-600",children:[t("dontHaveAccount")," ",l.jsx(YN,{to:"/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:t("signup")})]})})]})})},DB=()=>{const{t}=on(),{signup:e,loginWithGoogle:n}=vn(),r=Ki(),[s,i]=N.useState(""),[o,a]=N.useState(""),[c,u]=N.useState(""),[h,f]=N.useState(""),[m,g]=N.useState(!1),[v,x]=N.useState(!1),[T,b]=N.useState(!1),[y,_]=N.useState({}),I=()=>{const k={};return h.trim()?h.trim().length<2&&(k.displayName="নাম কমপক্ষে ২ অক্ষরের হতে হবে"):k.displayName="নাম লিখুন",s.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(k.email="বৈধ ইমেইল ঠিকানা লিখুন"):k.email="ইমেইল লিখুন",o?o.length<6&&(k.password="পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে"):k.password="পাসওয়ার্ড লিখুন",c?o!==c&&(k.confirmPassword="পাসওয়ার্ড মিলছে না"):k.confirmPassword="পাসওয়ার্ড নিশ্চিত করুন",_(k),Object.keys(k).length===0},A=async k=>{if(k.preventDefault(),!!I()){b(!0),_({});try{await e(s.trim(),o,h.trim()),r("/dashboard")}catch(j){console.error("Signup error:",j)}finally{b(!1)}}},R=async()=>{b(!0),_({});try{await n(),r("/dashboard")}catch(k){console.error("Google signup error:",k)}finally{b(!1)}},S=k=>y[k]?"w-full pl-10 pr-4 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300",E=k=>y[k]?"w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors border-red-300 bg-red-50":"border-gray-300";return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"সঙ্কল্প"}),l.jsx("p",{className:"text-gray-600",children:t("createAccount")})]}),l.jsxs("form",{onSubmit:A,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"আপনার নাম *"}),l.jsxs("div",{className:"relative",children:[l.jsx(Hx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",value:h,onChange:k=>{f(k.target.value),y.displayName&&_(j=>({...j,displayName:""}))},className:S("displayName"),placeholder:"আপনার নাম লিখুন",disabled:T}),y.displayName&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),y.displayName&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),y.displayName]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("email")," *"]}),l.jsxs("div",{className:"relative",children:[l.jsx(SC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"email",value:s,onChange:k=>{i(k.target.value),y.email&&_(j=>({...j,email:""}))},className:S("email"),placeholder:"your@email.com",disabled:T}),y.email&&l.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:l.jsx(En,{className:"w-5 h-5 text-red-500"})})]}),y.email&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),y.email]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("password")," *"]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:m?"text":"password",value:o,onChange:k=>{a(k.target.value),y.password&&_(j=>({...j,password:""}))},className:E("password"),placeholder:"••••••••",disabled:T}),l.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:T,children:m?l.jsx(Jg,{className:"w-5 h-5"}):l.jsx(Lh,{className:"w-5 h-5"})})]}),y.password&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),y.password]}),o&&o.length>=6&&!y.password&&l.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center",children:[l.jsx(Vt,{className:"w-4 h-4 mr-1"}),"পাসওয়ার্ড ঠিক আছে"]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t("confirmPassword")," *"]}),l.jsxs("div",{className:"relative",children:[l.jsx(Zg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:v?"text":"password",value:c,onChange:k=>{u(k.target.value),y.confirmPassword&&_(j=>({...j,confirmPassword:""}))},className:E("confirmPassword"),placeholder:"••••••••",disabled:T}),l.jsx("button",{type:"button",onClick:()=>x(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:T,children:v?l.jsx(Jg,{className:"w-5 h-5"}):l.jsx(Lh,{className:"w-5 h-5"})})]}),y.confirmPassword&&l.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[l.jsx(En,{className:"w-4 h-4 mr-1"}),y.confirmPassword]}),c&&o===c&&!y.confirmPassword&&l.jsxs("p",{className:"mt-1 text-sm text-green-600 flex items-center",children:[l.jsx(Vt,{className:"w-4 h-4 mr-1"}),"পাসওয়ার্ড মিলেছে"]})]}),l.jsxs(L.button,{whileHover:{scale:T?1:1.02},whileTap:{scale:T?1:.98},type:"submit",disabled:T,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[T&&l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),l.jsx("span",{children:T?"অ্যাকাউন্ট তৈরি হচ্ছে...":t("createAccount")})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-2 bg-white text-gray-500",children:"অথবা"})})]}),l.jsxs(L.button,{whileHover:{scale:T?1:1.02},whileTap:{scale:T?1:.98},onClick:R,disabled:T,className:"w-full mt-4 bg-white border border-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),l.jsx("span",{children:T?"প্রক্রিয়াকরণ...":t("loginWithGoogle")})]})]}),l.jsx("div",{className:"mt-8 text-center",children:l.jsxs("p",{className:"text-gray-600",children:[t("alreadyHaveAccount")," ",l.jsx(YN,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:t("login")})]})}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("p",{className:"text-xs text-gray-500",children:"অ্যাকাউন্ট তৈরি করে আপনি আমাদের শর্তাবলী এবং গোপনীয়তা নীতিতে সম্মত হচ্ছেন।"})})]})})},ri=[{question:"A bat and a ball cost $1.10 in total. The bat costs $1.00 more than the ball. How much does the ball cost?",options:["$0.10","$0.05","$0.15","$0.20"],correct:1,explanation:"The ball costs $0.05. If the ball costs $0.05, then the bat costs $1.05 ($1.00 more than the ball). Together they cost $1.10."},{question:"If it takes 5 machines 5 minutes to make 5 widgets, how long would it take 100 machines to make 100 widgets?",options:["5 minutes","100 minutes","20 minutes","1 minute"],correct:0,explanation:"5 minutes. Each machine makes 1 widget in 5 minutes, so 100 machines make 100 widgets in 5 minutes."},{question:"In a lake, there is a patch of lily pads. Every day, the patch doubles in size. If it takes 48 days for the patch to cover the entire lake, how long would it take for the patch to cover half of the lake?",options:["24 days","47 days","46 days","25 days"],correct:1,explanation:"47 days. Since the patch doubles every day, it was half the size the day before it covered the entire lake."},{question:"You have 12 balls that look identical. One of them is either heavier or lighter than the others. Using a balance scale only 3 times, how can you identify the different ball?",options:["Divide into groups of 4","Divide into groups of 6","Weigh them one by one","It's impossible"],correct:0,explanation:"Divide into groups of 4. First weighing compares two groups of 4. Based on the result, you can narrow down to the group containing the different ball, then use 2 more weighings to identify it."},{question:"A man lives on the 20th floor of an apartment building. Every morning he takes the elevator down to the ground floor. When he comes home, he takes the elevator to the 10th floor and walks the rest of the way... except on rainy days, when he takes the elevator all the way to the 20th floor. Why?",options:["He's exercising","He's short and can't reach the 20th floor button","The elevator is broken","He likes walking"],correct:1,explanation:"He's too short to reach the 20th floor button, but can reach the 10th floor button. On rainy days, he has an umbrella which he can use to press the 20th floor button."}],VB=({onClose:t,onComplete:e})=>{const{t:n}=on(),[r,s]=N.useState(0),[i,o]=N.useState(null),[a,c]=N.useState(!1),[u,h]=N.useState(0),[f,m]=N.useState(!1),g=ri[r],v=b=>{o(b),c(!0),b===g.correct&&h(u+1)},x=()=>{r<ri.length-1?(s(r+1),o(null),c(!1)):(m(!0),e&&e())},T=()=>{t()};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-full",children:l.jsx(EC,{className:"w-5 h-5 text-purple-600"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n("mentalWorkout")})]}),l.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),f?l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-6",children:l.jsx(Vt,{className:"w-10 h-10 text-white"})}),l.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Workout Complete!"}),l.jsxs("p",{className:"text-gray-600 mb-4",children:["You scored ",u," out of ",ri.length," puzzles correctly."]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6",children:[l.jsx("p",{className:"text-green-800 font-medium",children:"🎉 Mental workout completed!"}),l.jsx("p",{className:"text-green-700 text-sm",children:"You earned 10 coins for strengthening your mind."})]}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-xl font-medium hover:from-purple-700 hover:to-indigo-700 transition-all",children:"Finish"})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:["Question ",r+1," of ",ri.length]}),l.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",u,"/",ri.length]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/ri.length*100}%`}})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"text-gray-800 mb-4 leading-relaxed",children:g.question}),l.jsx("div",{className:"space-y-3",children:g.options.map((b,y)=>l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>!a&&v(y),disabled:a,className:`w-full p-3 rounded-xl text-left transition-all duration-200 ${a?y===g.correct?"bg-green-100 border-2 border-green-500 text-green-700":i===y?"bg-red-100 border-2 border-red-500 text-red-700":"bg-gray-100 text-gray-500":i===y?"bg-blue-100 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{children:b}),a&&l.jsxs("div",{children:[y===g.correct&&l.jsx(Vt,{className:"w-5 h-5 text-green-500"}),i===y&&y!==g.correct&&l.jsx(CB,{className:"w-5 h-5 text-red-500"})]})]})},y))})]}),a&&l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-blue-50 rounded-xl",children:[l.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Explanation:"}),l.jsx("p",{className:"text-blue-700 text-sm",children:g.explanation})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:n("close")}),a&&l.jsx(L.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:x,className:"px-6 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-colors",children:r<ri.length-1?"Next":"Finish"})]})]})]})})},LB=({onClose:t})=>{const{t:e}=on(),{currentUser:n}=vn(),[r,s]=N.useState(""),[i,o]=N.useState([]),[a,c]=N.useState(!1);N.useEffect(()=>{if(!n)return;const h=async()=>{try{await n.getIdToken(!0);const m=Cc(Cn(me,"diaryEntries"),cx("userId","==",n.uid));return Va(m,v=>{const x=[];v.forEach(T=>{x.push({id:T.id,...T.data()})}),x.sort((T,b)=>{var I,A,R,S;const y=((A=(I=T.createdAt)==null?void 0:I.toDate)==null?void 0:A.call(I))||new Date(T.createdAt);return(((S=(R=b.createdAt)==null?void 0:R.toDate)==null?void 0:S.call(R))||new Date(b.createdAt)).getTime()-y.getTime()}),o(x)},v=>{console.error("Error fetching diary entries:",v),Q.error("Failed to load diary entries")})}catch(m){return console.error("Error setting up diary listener:",m),Q.error("Failed to load diary entries"),()=>{}}};let f;return h().then(m=>{f=m}),()=>{f&&f()}},[n]);const u=async()=>{if(!(!r.trim()||!n)){c(!0);try{await ga(Cn(me,"diaryEntries"),{content:r.trim(),date:new Date().toDateString(),userId:n.uid,createdAt:new Date}),s(""),Q.success("Gratitude entry saved!")}catch(h){console.error("Error saving entry:",h),Q.error("Failed to save entry")}finally{c(!1)}}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:l.jsx(Vh,{className:"w-5 h-5 text-blue-600"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:e("gratitudeDiary")})]}),l.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"What are you grateful for today?"}),l.jsx("textarea",{value:r,onChange:h=>s(h.target.value),placeholder:"Write about something you're grateful for...",className:"w-full h-32 p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),l.jsx("div",{className:"flex justify-end mt-3",children:l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:!r.trim()||a,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:[l.jsx(kC,{className:"w-4 h-4"}),l.jsx("span",{children:a?"Saving...":e("save")})]})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Previous Entries"}),l.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:i.length===0?l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No entries yet. Start your gratitude journey!"}):i.map(h=>l.jsxs(L.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 bg-white border border-gray-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(Ox,{className:"w-4 h-4 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-500",children:h.date})]}),l.jsx("p",{className:"text-gray-700",children:h.content})]},h.id))})]})]})})},MB=({embedded:t=!1})=>{on();const{currentUser:e,userData:n,updateUserData:r}=vn(),{activeTheme:s}=eo(),[i,o]=N.useState(!1),[a,c]=N.useState(!1),[u,h]=N.useState(!1),[f,m]=N.useState(!1),[g,v]=N.useState(""),x=(n==null?void 0:n.active_stake)||null,T=((n==null?void 0:n.coins)||0)>=100;N.useEffect(()=>{if(!(x!=null&&x.isActive))return;const R=()=>{var X,de;const E=new Date,j=(((de=(X=x.endDate)==null?void 0:X.toDate)==null?void 0:de.call(X))||new Date(x.endDate)).getTime()-E.getTime();if(j<=0){v("Challenge Ended"),b();return}const D=Math.floor(j/(1e3*60*60*24)),V=Math.floor(j%(1e3*60*60*24)/(1e3*60*60)),P=Math.floor(j%(1e3*60*60)/(1e3*60));v(`${D}d ${V}h ${P}m`)};R();const S=setInterval(R,6e4);return()=>clearInterval(S)},[x]);const b=async()=>{var R,S;if(!(!e||!(x!=null&&x.isActive)||!n))try{const E=new Date,k=((S=(R=x.endDate)==null?void 0:R.toDate)==null?void 0:S.call(R))||new Date(x.endDate);E>=k&&(n.streak>=7?(await r({coins:n.coins+x.rewardAmount,active_stake:null}),Q.success(`🎉 Challenge completed! You earned ${x.rewardAmount} coins!`,{duration:5e3})):(await r({active_stake:null}),Q.error("Challenge failed. Better luck next time!",{duration:4e3})))}catch(E){console.error("Error checking stake outcome:",E)}},y=async()=>{if(!(!e||!n||!T)){h(!0);try{await px(me,async R=>{const S=We(me,"users",e.uid),E=await R.get(S);if(!E.exists())throw new Error("User document does not exist");const k=E.data().coins||0;if(k<100)throw new Error("Insufficient coins");const j=new Date,D=new Date;D.setDate(D.getDate()+7);const V={stakeAmount:100,rewardAmount:150,startDate:j,endDate:D,isActive:!0};R.update(S,{coins:k-100,active_stake:V})}),await r({coins:n.coins-100}),o(!1),Q.success("Weekly challenge started! Good luck! 🍀")}catch(R){console.error("Error starting challenge:",R),Q.error("Failed to start challenge. Please try again.")}finally{h(!1)}}},_=async()=>{if(!(!e||!n||!(x!=null&&x.isActive))){m(!0);try{const R={streakStartDate:qt(),streak:0,currentBadge:"clown",active_stake:{...x,isActive:!1}};await r(R),c(!1),Q.error("চ্যালেঞ্জ বাতিল হয়ে গেছে এবং নতুন যাত্রা শুরু হয়েছে।",{duration:5e3})}catch(R){console.error("Error losing challenge:",R),Q.error("সমস্যা হয়েছে, আবার চেষ্টা করুন।")}finally{m(!1)}}},A=(()=>{switch(s){case"ocean-theme":return{cardBg:"bg-gradient-to-br from-blue-100 to-cyan-50",accent:"from-blue-500 to-cyan-600",border:"border-blue-200"};default:return{cardBg:"bg-white",accent:"from-indigo-500 to-purple-600",border:"border-gray-200"}}})();return l.jsxs("div",{className:"w-full",children:[l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`${A.cardBg} rounded-xl shadow-lg p-6 border ${A.border}`,children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:`w-12 h-12 bg-gradient-to-r ${A.accent} rounded-full flex items-center justify-center`,children:l.jsx(aT,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"সাপ্তাহিক চ্যালেঞ্জ"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Weekly Challenge"})]})]}),x!=null&&x.isActive?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx(Vt,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{className:"font-semibold text-green-800",children:"Challenge Active"})]}),l.jsxs("p",{className:"text-green-700 text-sm mb-3",children:["Keep your streak for ",g," to win ",x.rewardAmount," coins!"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[l.jsx("div",{className:"font-bold text-gray-800",children:x.stakeAmount}),l.jsx("div",{className:"text-gray-500",children:"Coins Staked"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:x.rewardAmount}),l.jsx("div",{className:"text-gray-500",children:"Potential Reward"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 p-4 bg-orange-50 rounded-xl",children:[l.jsx(IC,{className:"w-6 h-6 text-orange-500"}),l.jsxs("span",{className:"text-lg font-bold text-orange-700",children:[(n==null?void 0:n.streak)||0," Day Streak"]})]}),l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!0),className:"w-full bg-red-500 text-white py-3 rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center space-x-2",children:[l.jsx(ro,{className:"w-4 h-4"}),l.jsx("span",{children:"আমি চ্যালেঞ্জটি হেরে গিয়েছি"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[l.jsx("p",{className:"text-blue-800 text-sm leading-relaxed mb-3",children:"আপনার ১০০ কয়েন বাজি রেখে ৭ দিনের একটি নতুন যাত্রা শুরু করুন। সফল হলে ১৫০ কয়েন পুরস্কার জিতুন!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[l.jsx(Kn,{className:"w-4 h-4 text-yellow-600"}),l.jsx("span",{className:"font-bold text-gray-800",children:"100"})]}),l.jsx("div",{className:"text-gray-500",children:"Stake Amount"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-3 text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[l.jsx(n0,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"font-bold text-green-600",children:"150"})]}),l.jsx("div",{className:"text-gray-500",children:"Reward"})]})]})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),l.jsx("span",{children:"Maintain your streak for 7 consecutive days"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),l.jsx("span",{children:"Complete daily check-ins"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),l.jsx("span",{children:"Win 150 coins if successful"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),l.jsx("span",{children:"Lose 100 coins if you break the streak"})]})]}),l.jsx(L.button,{whileHover:{scale:T?1.02:1},whileTap:{scale:T?.98:1},onClick:()=>o(!0),disabled:!T,className:`w-full py-4 rounded-xl font-semibold transition-all duration-200 ${T?`bg-gradient-to-r ${A.accent} text-white hover:shadow-lg`:"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:T?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(Kn,{className:"w-5 h-5"}),l.jsx("span",{children:"১০০ কয়েন দিয়ে চ্যালেঞ্জ শুরু করুন"})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(En,{className:"w-5 h-5"}),l.jsx("span",{children:"অপর্যাপ্ত কয়েন (১০০ প্রয়োজন)"})]})}),!T&&l.jsxs("p",{className:"text-center text-xs text-red-500",children:["আরও ",100-((n==null?void 0:n.coins)||0)," কয়েন প্রয়োজন"]})]})]}),l.jsx(qn,{children:i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(aT,{className:"w-8 h-8 text-white"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"চ্যালেঞ্জ নিশ্চিত করুন"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি ৭ দিনের চ্যালেঞ্জ শুরু করতে চান?"})]}),l.jsx("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Stake Amount:"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Kn,{className:"w-4 h-4 text-yellow-600"}),l.jsx("span",{className:"font-bold",children:"100 coins"})]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Potential Reward:"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(n0,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"font-bold text-green-600",children:"150 coins"})]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-gray-600",children:"Duration:"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Ox,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"font-bold",children:"7 days"})]})]})]})}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 mb-6",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx(En,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-yellow-800 text-sm font-medium mb-1",children:"Important:"}),l.jsx("p",{className:"text-yellow-700 text-xs",children:"If you break your streak during the 7-day period, you will lose your 100 coins. Make sure you're ready for the commitment!"})]})]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>o(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"বাতিল"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,disabled:u,className:"flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-3 rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:u?"শুরু করা হচ্ছে...":"চ্যালেঞ্জ শুরু করুন"})]})]})})}),l.jsx(qn,{children:a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(En,{className:"w-8 h-8 text-red-600"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"চ্যালেঞ্জ হেরে গেছেন?"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি নিশ্চিত যে আপনি চ্যালেঞ্জটি হেরে গিয়েছেন?"}),l.jsx("p",{className:"text-red-600 text-xs mt-2",children:"এটি আপনার চ্যালেঞ্জ বাতিল করে দেবে এবং আপনার স্ট্রিক রিসেট হয়ে যাবে।"})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>c(!1),disabled:f,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"বাতিল"}),l.jsx(L.button,{whileHover:{scale:f?1:1.02},whileTap:{scale:f?1:.98},onClick:_,disabled:f,className:"flex-1 bg-red-600 text-white px-4 py-3 rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:f?"প্রক্রিয়াকরণ...":"হ্যাঁ, হেরে গিয়েছি"})]})]})})})]})},OB=()=>{var de,he,ke,$;const{hasUnlockedItem:t}=eo(),{currentUser:e}=vn(),[n,r]=N.useState(!1),[s,i]=N.useState(!1),[o,a]=N.useState(.5),[c,u]=N.useState(0),[h,f]=N.useState(!1),[m,g]=N.useState([]),[v,x]=N.useState(!1),[T,b]=N.useState(!1),y=N.useRef(null),_=N.useRef(null),I=t("music","focus-music"),R=[...[{id:"default-1",name:"Peaceful Meditation",duration:"10:00",description:"Calm instrumental for deep focus",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"},{id:"default-2",name:"Nature Sounds",duration:"15:00",description:"Rain and forest ambience",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"},{id:"default-3",name:"Zen Garden",duration:"12:00",description:"Traditional meditation music",url:"https://www.soundjay.com/misc/sounds/bell-ringing-05.wav"}],...m.map(z=>({id:z.id,name:z.name,duration:z.duration,description:"Custom uploaded track",url:z.url}))];N.useEffect(()=>{if(!e||!I)return;const z=Cc(Cn(me,"customTracks"),cx("userId","==",e.uid));return Va(z,te=>{const le=[];te.forEach(xe=>{le.push({id:xe.id,...xe.data()})}),g(le)})},[e,I]),N.useEffect(()=>{y.current&&(y.current.volume=o,y.current.muted=s)},[o,s]);const S=()=>{if(!I||!y.current)return;const z=R[c];z&&(n?y.current.pause():(y.current.src=z.url,y.current.play().catch(G=>{console.error("Error playing audio:",G),Q.error("Failed to play audio")})),r(!n))},E=()=>{i(!s)},k=()=>{u(z=>(z+1)%R.length),r(!1)},j=()=>{u(z=>(z-1+R.length)%R.length),r(!1)},D=z=>{const G=parseFloat(z.target.value);a(G),i(G===0)},V=async z=>{var te;const G=(te=z.target.files)==null?void 0:te[0];if(!(!G||!e)){if(!G.type.startsWith("audio/")){Q.error("Please select an audio file");return}if(G.size>10*1024*1024){Q.error("File size must be less than 10MB");return}b(!0);try{const le=URL.createObjectURL(G),xe=new Audio(le);await new Promise(it=>{xe.addEventListener("loadedmetadata",it)});const Et=`${Math.floor(xe.duration/60)}:${Math.floor(xe.duration%60).toString().padStart(2,"0")}`;await ga(Cn(me,"customTracks"),{name:G.name.replace(/\.[^/.]+$/,""),fileName:G.name,duration:Et,userId:e.uid,createdAt:new Date,fileSize:G.size,fileType:G.type});const ut=new FileReader;ut.onload=()=>{localStorage.setItem(`audio_${G.name}`,ut.result)},ut.readAsDataURL(G),Q.success("Track uploaded successfully!"),x(!1)}catch(le){console.error("Error uploading track:",le),Q.error("Failed to upload track")}finally{b(!1)}}},P=async(z,G)=>{try{await Q6(We(me,"customTracks",z)),localStorage.removeItem(`audio_${G}`),Q.success("Track deleted successfully")}catch(te){console.error("Error deleting track:",te),Q.error("Failed to delete track")}},X=z=>{u(z),r(!1),y.current&&y.current.pause()};return I?l.jsxs(l.Fragment,{children:[l.jsxs(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>f(!h),className:"fixed top-20 right-4 z-30 bg-gradient-to-r from-purple-500 to-indigo-600 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all",title:"Focus Music Player",children:[l.jsx(td,{className:"w-6 h-6"}),n&&l.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full animate-pulse"})]}),l.jsx(qn,{children:h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl max-h-[90vh] flex flex-col",children:[l.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-700 text-white p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:l.jsx(td,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold",children:"Focus Music"}),l.jsx("p",{className:"text-purple-200 text-sm",children:"Meditation & Focus"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>x(!0),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",title:"Upload custom track",children:l.jsx(Bx,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5"})})]})]})}),R.length>0&&l.jsxs("div",{className:"p-6 bg-gradient-to-br from-purple-50 to-indigo-50",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-400 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(td,{className:"w-10 h-10 text-white"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:(de=R[c])==null?void 0:de.name}),l.jsx("p",{className:"text-gray-600 text-sm",children:(he=R[c])==null?void 0:he.description}),l.jsx("p",{className:"text-gray-500 text-xs mt-1",children:(ke=R[c])==null?void 0:ke.duration})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:"bg-gradient-to-r from-purple-500 to-indigo-600 h-2 rounded-full",initial:{width:"0%"},animate:{width:n?"45%":"0%"},transition:{duration:2,repeat:n?1/0:0}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"0:00"}),l.jsx("span",{children:($=R[c])==null?void 0:$.duration})]})]})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-6 mb-6",children:[l.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:j,disabled:R.length===0,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors disabled:opacity-50",children:l.jsx(xB,{className:"w-6 h-6"})}),l.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:S,disabled:R.length===0,className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all disabled:opacity-50",children:n?l.jsx(Ux,{className:"w-8 h-8"}):l.jsx(Bf,{className:"w-8 h-8 ml-1"})}),l.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:k,disabled:R.length===0,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors disabled:opacity-50",children:l.jsx(vB,{className:"w-6 h-6"})})]}),l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("button",{onClick:E,className:"p-2 text-gray-600 hover:text-purple-600 transition-colors",children:s||o===0?l.jsx(kB,{className:"w-5 h-5"}):l.jsx(SB,{className:"w-5 h-5"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s?0:o,onChange:D,className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #8b5cf6 0%, #8b5cf6 ${(s?0:o)*100}%, #e5e7eb ${(s?0:o)*100}%, #e5e7eb 100%)`}})]})]}),l.jsx("div",{className:"border-t border-gray-200 flex-1 overflow-y-auto",children:R.length===0?l.jsxs("div",{className:"p-8 text-center",children:[l.jsx(td,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600 mb-2",children:"No tracks available"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Upload your first custom track to get started"})]}):R.map((z,G)=>l.jsx(L.div,{whileHover:{backgroundColor:"#f3f4f6"},className:`p-4 transition-colors ${G===c?"bg-purple-50 border-r-4 border-purple-500":"hover:bg-gray-50"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>X(G),className:"flex-1 text-left",children:[l.jsx("h4",{className:`font-medium ${G===c?"text-purple-700":"text-gray-800"}`,children:z.name}),l.jsx("p",{className:"text-gray-600 text-sm",children:z.description})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-gray-500 text-xs",children:z.duration}),G===c&&n&&l.jsxs("div",{className:"flex items-center space-x-1 mt-1 justify-end",children:[l.jsx("div",{className:"w-1 h-3 bg-purple-500 rounded animate-pulse"}),l.jsx("div",{className:"w-1 h-2 bg-purple-400 rounded animate-pulse delay-100"}),l.jsx("div",{className:"w-1 h-4 bg-purple-500 rounded animate-pulse delay-200"})]})]}),m.find(te=>te.id===z.id)&&l.jsx("button",{onClick:()=>{const te=m.find(le=>le.id===z.id);te&&P(z.id,te.fileName)},className:"p-1 text-red-500 hover:text-red-700 transition-colors",title:"Delete track",children:l.jsx(TB,{className:"w-4 h-4"})})]})]})},z.id))}),l.jsx("audio",{ref:y,onEnded:()=>r(!1),onError:()=>{r(!1),Q.error("Error playing audio file")}})]})})}),l.jsx(qn,{children:v&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-60",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Upload Custom Track"}),l.jsx("button",{onClick:()=>x(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[l.jsx(IB,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload an audio file"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Supports MP3, WAV, M4A (max 10MB)"}),l.jsx("input",{ref:_,type:"file",accept:"audio/*",onChange:V,className:"hidden"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{var z;return(z=_.current)==null?void 0:z.click()},disabled:T,className:"mt-4 bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-2 rounded-xl hover:from-purple-600 hover:to-indigo-700 transition-all disabled:opacity-50",children:T?"Uploading...":"Choose File"})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[l.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Tips for best experience:"}),l.jsxs("ul",{className:"text-blue-700 text-sm space-y-1",children:[l.jsx("li",{children:"• Use high-quality audio files for better sound"}),l.jsx("li",{children:"• Instrumental or ambient music works best for focus"}),l.jsx("li",{children:"• Keep file sizes under 10MB for faster loading"}),l.jsx("li",{children:"• Files are stored locally on your device"})]})]})]})]})})})]}):null},va=()=>{const{t}=on(),e=Na(),n=Ki(),r=[{icon:uB,label:t("dashboard"),path:"/dashboard",isActive:e.pathname==="/dashboard"},{icon:Xo,label:t("community"),path:"/community",isActive:e.pathname==="/community"},{icon:Rc,label:t("rewards"),path:"/rewards",isActive:e.pathname==="/rewards"},{icon:Hx,label:t("profile"),path:"/profile",isActive:e.pathname==="/profile"}];return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-4 py-2 z-40",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"flex justify-around items-center",children:[r.slice(0,2).map(s=>l.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s.path),className:`flex flex-col items-center py-2 px-4 rounded-xl transition-all duration-200 ${s.isActive?"bg-blue-100 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[l.jsx(s.icon,{className:`w-6 h-6 mb-1 ${s.isActive?"text-blue-600":"text-gray-400"}`}),l.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path)),l.jsxs(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>n("/urge-helper"),className:`relative w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 shadow-lg ${e.pathname==="/urge-helper"?"bg-gradient-to-br from-red-500 to-pink-600 shadow-red-200":"bg-gradient-to-br from-indigo-500 to-purple-600 shadow-indigo-200 hover:shadow-xl"}`,style:{marginTop:"-8px"},children:[l.jsx(zx,{className:"w-8 h-8 text-white"}),e.pathname!=="/urge-helper"&&l.jsx(L.div,{className:"absolute inset-0 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 opacity-30",animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),r.slice(2).map(s=>l.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s.path),className:`flex flex-col items-center py-2 px-4 rounded-xl transition-all duration-200 ${s.isActive?"bg-blue-100 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:[l.jsx(s.icon,{className:`w-6 h-6 mb-1 ${s.isActive?"text-blue-600":"text-gray-400"}`}),l.jsx("span",{className:"text-xs font-medium",children:s.label})]},s.path))]})})})},Ql=[{id:"clown",name:"Clown",nameEn:"Clown",nameBn:"ক্লাউন",imageUrl:"https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:0,color:"bg-red-500",description:"Starting your journey"},{id:"noob",name:"Noob",nameEn:"Noob",nameBn:"নুব",imageUrl:"https://images.pexels.com/photos/1040881/pexels-photo-1040881.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:1,color:"bg-orange-500",description:"First step taken"},{id:"novice",name:"Novice",nameEn:"Novice",nameBn:"নবিশ",imageUrl:"https://images.pexels.com/photos/1043471/pexels-photo-1043471.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:3,color:"bg-yellow-500",description:"Building momentum"},{id:"average",name:"Average",nameEn:"Average",nameBn:"গড়পড়তা",imageUrl:"https://images.pexels.com/photos/1239291/pexels-photo-1239291.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:7,color:"bg-blue-500",description:"One week strong"},{id:"advanced",name:"Advanced",nameEn:"Advanced",nameBn:"উন্নত",imageUrl:"https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:15,color:"bg-purple-500",description:"Two weeks of dedication"},{id:"sigma",name:"Sigma",nameEn:"Sigma",nameBn:"সিগমা",imageUrl:"https://images.pexels.com/photos/1043474/pexels-photo-1043474.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:30,color:"bg-green-500",description:"One month champion"},{id:"chad",name:"Chad",nameEn:"Chad",nameBn:"চ্যাড",imageUrl:"https://images.pexels.com/photos/1040880/pexels-photo-1040880.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:45,color:"bg-indigo-500",description:"Elite performer"},{id:"absolute_chad",name:"Absolute Chad",nameEn:"Absolute Chad",nameBn:"পরম চ্যাড",imageUrl:"https://images.pexels.com/photos/1043473/pexels-photo-1043473.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:60,color:"bg-pink-500",description:"Two months of excellence"},{id:"giga_chad",name:"Giga Chad",nameEn:"Giga Chad",nameBn:"গিগা চ্যাড",imageUrl:"https://images.pexels.com/photos/1040883/pexels-photo-1040883.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop",minDays:120,color:"bg-gradient-to-r from-yellow-400 to-orange-500",description:"Legendary status achieved"}],FB=t=>{const e=Ql.filter(n=>t>=n.minDays);return e[e.length-1]||Ql[0]},r0=t=>{if(!t)return 0;const e=t.toDate?t.toDate():new Date(t),r=Math.abs(new Date().getTime()-e.getTime());return Math.floor(r/(1e3*60*60*24))},UB=async(t,e,n)=>{const r=r0(t),s=FB(r);e!==s.id&&await n({currentBadge:s.id})},BB=({streakStartDate:t,onRestart:e})=>{const[n,r]=N.useState({days:0,hours:0,minutes:0,seconds:0});return N.useEffect(()=>{const s=()=>{if(!t)return;const o=t.toDate?t.toDate():new Date(t),c=new Date().getTime()-o.getTime(),u=Math.floor(c/(1e3*60*60*24)),h=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),f=Math.floor(c%(1e3*60*60)/(1e3*60)),m=Math.floor(c%(1e3*60)/1e3);r({days:u,hours:h,minutes:f,seconds:m})};s();const i=setInterval(s,1e3);return()=>clearInterval(i)},[t]),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"relative w-80 h-80 mx-auto rounded-full overflow-hidden shadow-2xl",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-800 via-slate-900 to-black"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-900/30 via-purple-900/20 to-transparent"}),[...Array(20)].map((s,i)=>l.jsx(L.div,{className:"absolute w-1 h-1 bg-white rounded-full opacity-30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{opacity:[.3,.8,.3],scale:[1,1.5,1]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2}},i)),l.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-white p-8",children:[l.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-center mb-4",children:[l.jsx("div",{className:"text-7xl font-bold mb-2 bg-gradient-to-b from-white to-gray-300 bg-clip-text text-transparent",children:n.days}),l.jsxs("div",{className:"text-lg font-medium text-gray-300",children:[n.days===1?"Day":"Days"," Strong"]})]},n.days),l.jsxs("div",{className:"flex space-x-6 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-blue-300",children:n.hours}),l.jsx("div",{className:"text-xs text-gray-400",children:"Hours"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-purple-300",children:n.minutes}),l.jsx("div",{className:"text-xs text-gray-400",children:"Minutes"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl font-bold text-pink-300",children:n.seconds}),l.jsx("div",{className:"text-xs text-gray-400",children:"Seconds"})]})]})]})]}),l.jsx("div",{className:"flex justify-center mt-6",children:l.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-8 py-4 rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transition-all flex items-center space-x-3",children:[l.jsx(ro,{className:"w-6 h-6"}),l.jsx("span",{children:"নতুন যাত্রা শুরু করুন"})]})})]})},$B=({level:t})=>{const n=(r=>r<=5?"sapling":r<=10?"young":r<=20?"mature":"flourishing")(t);return l.jsxs("div",{className:"flex flex-col items-center py-8",children:[l.jsx("div",{className:"relative w-64 h-64",children:l.jsxs("svg",{width:"256",height:"256",viewBox:"0 0 256 256",className:"w-full h-full",children:[l.jsx(L.rect,{x:"118",y:n==="sapling"?"200":n==="young"?"180":n==="mature"?"160":"140",width:n==="sapling"?"8":n==="young"?"12":n==="mature"?"16":"20",height:n==="sapling"?"40":n==="young"?"60":n==="mature"?"80":"100",fill:"#8B4513",initial:{height:0},animate:{height:n==="sapling"?40:n==="young"?60:n==="mature"?80:100},transition:{duration:2,ease:"easeOut"}}),l.jsx(L.circle,{cx:"128",cy:n==="sapling"?"190":n==="young"?"160":n==="mature"?"140":"120",r:n==="sapling"?"25":n==="young"?"40":n==="mature"?"55":"70",fill:"#228B22",initial:{r:0,opacity:0},animate:{r:n==="sapling"?25:n==="young"?40:n==="mature"?55:70,opacity:1},transition:{duration:2,delay:.5,ease:"easeOut"}}),(n==="mature"||n==="flourishing")&&l.jsxs(l.Fragment,{children:[l.jsx(L.circle,{cx:"100",cy:"150",r:"35",fill:"#32CD32",initial:{r:0,opacity:0},animate:{r:35,opacity:.8},transition:{duration:1.5,delay:1,ease:"easeOut"}}),l.jsx(L.circle,{cx:"156",cy:"150",r:"35",fill:"#32CD32",initial:{r:0,opacity:0},animate:{r:35,opacity:.8},transition:{duration:1.5,delay:1.2,ease:"easeOut"}})]}),n==="flourishing"&&l.jsx(l.Fragment,{children:[...Array(8)].map((r,s)=>l.jsx(L.circle,{cx:100+Math.random()*56,cy:100+Math.random()*40,r:"3",fill:"#FFB6C1",initial:{opacity:0,scale:0},animate:{opacity:[0,1,.7,1],scale:[0,1.2,1,1.2]},transition:{duration:3,delay:2+s*.2,repeat:1/0,repeatType:"reverse"}},s))}),[...Array(t>5?6:3)].map((r,s)=>l.jsx(L.ellipse,{cx:110+s*8,cy:n==="sapling"?180+s*5:130+s*8,rx:"4",ry:"8",fill:"#90EE90",initial:{rotate:0},animate:{rotate:[-5,5,-5]},transition:{duration:2+Math.random(),repeat:1/0,ease:"easeInOut",delay:s*.3}},s))]})}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2.5},className:"text-center mt-4",children:[l.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:["সঙ্কল্প বৃক্ষ - Level ",t]}),l.jsxs("p",{className:"text-gray-600 text-sm",children:[n==="sapling"&&"A small seed of determination has been planted",n==="young"&&"Your resolve is growing into a young tree",n==="mature"&&"A strong tree grows from your commitment",n==="flourishing"&&"Your resolution has blossomed beautifully"]})]})]})},zB=({isOpen:t,onConfirm:e,onCancel:n,loading:r})=>t?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(J8,{className:"w-8 h-8 text-red-600"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"নতুন করে শুরু?"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি নিশ্চিত যে আপনি নতুন করে শুরু করতে চান?"}),l.jsx("p",{className:"text-red-600 text-xs mt-2",children:"এটি আপনার বর্তমান স্ট্রিক রিসেট করে দেবে এবং যদি কোনো সাপ্তাহিক চ্যালেঞ্জ চালু থাকে তাহলে সেটিও বাতিল হয়ে যাবে। আপনার ব্যাজও প্রাথমিক অবস্থায় ফিরে যাবে।"})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:n,disabled:r,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"বাতিল"}),l.jsx(L.button,{whileHover:{scale:r?1:1.02},whileTap:{scale:r?1:.98},onClick:e,disabled:r,className:"flex-1 bg-red-600 text-white px-4 py-3 rounded-xl hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?"রিসেট করা হচ্ছে...":"হ্যাঁ, নতুন করে শুরু করুন"})]})]})}):null,HB=({currentBadge:t,streakDays:e})=>{const n=Ql.find(s=>s.id===t)||Ql[0],r=Ql.find(s=>s.minDays>e);return l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"relative mb-4",children:[l.jsx("div",{className:`w-20 h-20 ${n.color} rounded-full flex items-center justify-center mx-auto shadow-lg overflow-hidden`,children:l.jsx("img",{src:n.imageUrl,alt:n.name,className:"w-full h-full object-cover"})}),l.jsx(L.div,{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 text-xs px-2 py-1 rounded-full font-bold",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:200},children:n.nameBn})]}),l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:n.name}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:n.description}),r&&l.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:l.jsxs("p",{className:"text-blue-800 text-sm font-medium",children:["Next: ",r.name," in ",r.minDays-e," days"]})})]})})},qB=()=>{on();const{userData:t,updateUserData:e,currentUser:n}=vn(),{activeTheme:r,unlockedItems:s}=eo(),[i,o]=N.useState(!1),[a,c]=N.useState(!1),[u,h]=N.useState(!1),[f,m]=N.useState(!1),[g,v]=N.useState(""),[x,T]=N.useState(!1),[b,y]=N.useState(""),_=["পরাজয় মানে শেষ নয়, এটি একটি নতুন শুরুর সুযোগ।","প্রতিটি নতুন দিন একটি নতুন সুযোগ নিয়ে আসে।","শক্তি ব্যর্থতা থেকে নয়, আবার উঠে দাঁড়ানো থেকে আসে।","আপনার সবচেয়ে বড় শত্রু আপনার নিজের সন্দেহ।","সাফল্য হলো একবার পড়ে গিয়ে আবার উঠে দাঁড়ানো।"];N.useEffect(()=>{t!=null&&t.streakStartDate&&n&&(r0(t.streakStartDate),UB(t.streakStartDate,t.currentBadge,e))},[t==null?void 0:t.streakStartDate,t==null?void 0:t.currentBadge,n,e]);const I=async()=>{var X;if(!(!n||!t)){m(!0);try{const de={streakStartDate:qt(),streak:0,currentBadge:"clown"};(X=t.active_stake)!=null&&X.isActive&&(de.active_stake={...t.active_stake,isActive:!1},Q.error("সাপ্তাহিক চ্যালেঞ্জ বাতিল হয়ে গেছে।",{duration:4e3})),await e(de);const he=_[Math.floor(Math.random()*_.length)];y(he),h(!1),Q.success("নতুন যাত্রা শুরু হয়েছে! আপনি পারবেন! 💪",{duration:5e3})}catch(de){console.error("Error restarting streak:",de),Q.error("রিসেট করতে সমস্যা হয়েছে")}finally{m(!1)}}},A=async()=>{if(!t)return;const X=new Date().toDateString(),de=t.lastCheckIn?new Date(t.lastCheckIn).toDateString():"";if(X!==de){const he=t.xp+10,ke=t.coins+5;let $=t.streak+1;const z=Math.floor(he/100)+1;let G=0;$%7===0&&(G=25,Q.success("🎉 Weekly streak bonus! +25 coins!",{duration:4e3})),await e({xp:he,coins:ke+G,streak:$,level:z,lastCheckIn:new Date().toISOString()}),Q.success(`Daily check-in complete! +10 XP, +${5+G} coins`)}else Q.success("Already checked in today!")},R=async()=>{if(!(!g.trim()||!n)){T(!0);try{if(await ga(Cn(me,"diaryEntries"),{content:g.trim(),date:new Date().toDateString(),userId:n.uid,createdAt:new Date}),v(""),Q.success("Gratitude saved! +2 coins"),t){const X=t.xp+5,de=t.coins+2,he=Math.floor(X/100)+1;await e({xp:X,coins:de,level:he})}}catch(X){console.error("Error saving gratitude:",X),Q.error("Failed to save gratitude")}finally{T(!1)}}},S=async()=>{if(!t)return;const X=t.coins+10;await e({coins:X}),Q.success("Mental workout completed! +10 coins")},E=[{icon:Vh,label:"ডায়েরি",englishLabel:"Diary",color:"bg-blue-500",hoverColor:"hover:bg-blue-600",action:()=>c(!0)},{icon:zx,label:"জরুরি সাহায্য",englishLabel:"Urge Helper",color:"bg-red-500",hoverColor:"hover:bg-red-600",action:()=>window.location.href="/urge-helper"},{icon:Xo,label:"কমিউনিটি",englishLabel:"Community",color:"bg-green-500",hoverColor:"hover:bg-green-600",action:()=>window.location.href="/community"},{icon:Rc,label:"পুরস্কার",englishLabel:"Rewards",color:"bg-yellow-500",hoverColor:"hover:bg-yellow-600",action:()=>window.location.href="/rewards"}];if(!t)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading your journey..."})]})});const k=t.xp%100,j=100,D=r0(t.streakStartDate),P=(()=>{switch(r){case"ocean-theme":return{background:"bg-gradient-to-br from-blue-50 to-cyan-100",cardBg:"bg-gradient-to-br from-blue-100 to-cyan-50",accent:"from-blue-500 to-cyan-600"};default:return{background:"bg-slate-50",cardBg:"bg-white",accent:"from-indigo-500 to-purple-600"}}})();return Object.values(s).reduce((X,de)=>X+de.length,0),l.jsxs("div",{className:`min-h-screen ${P.background} pb-20 relative`,children:[l.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"আপনার সঙ্কল্পের যাত্রা"}),l.jsx(BB,{streakStartDate:t.streakStartDate,onRestart:()=>h(!0)}),l.jsx(qn,{children:b&&l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-xl",children:[l.jsx("p",{className:"text-green-800 font-medium text-center",children:b}),l.jsx("button",{onClick:()=>y(""),className:"mt-2 text-green-600 hover:text-green-800 text-sm",children:"✕"})]})})]}),l.jsx(HB,{currentBadge:t.currentBadge||"clown",streakDays:D}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:`${P.cardBg} rounded-xl shadow-lg p-6`,children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[l.jsx(Kn,{className:"w-6 h-6 text-yellow-500"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.coins})]}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Coins"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[l.jsx(t0,{className:"w-6 h-6 text-green-500"}),l.jsx("span",{className:"text-2xl font-bold text-gray-800",children:t.level})]}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Level"})]})]}),l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:A,className:`w-full mt-4 bg-gradient-to-r ${P.accent} text-white py-3 rounded-xl font-medium hover:shadow-lg transition-all flex items-center space-x-2 justify-center`,children:[l.jsx(e0,{className:"w-5 h-5"}),l.jsx("span",{children:"Daily Check-in"})]})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:`${P.cardBg} rounded-xl shadow-lg p-6`,children:[l.jsx($B,{level:t.level}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Level ",t.level]}),l.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Level ",t.level+1]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx(L.div,{initial:{width:0},animate:{width:`${k}%`},transition:{duration:1,delay:.5},className:`bg-gradient-to-r ${P.accent} h-3 rounded-full`})}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:[t.xp," XP"]}),l.jsxs("span",{className:"text-xs text-gray-500",children:[t.xp+(j-k)," XP"]})]})]})]}),l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:l.jsx(MB,{embedded:!0})}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:`${P.cardBg} rounded-xl shadow-lg p-6`,children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:E.map((X,de)=>l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:X.action,className:"p-6 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors text-center group",children:[l.jsx("div",{className:`w-12 h-12 ${X.color} ${X.hoverColor} rounded-full flex items-center justify-center mx-auto mb-3 transition-colors group-hover:scale-110 transform duration-200`,children:l.jsx(X.icon,{className:"w-6 h-6 text-white"})}),l.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:X.label}),l.jsx("div",{className:"text-xs text-gray-500",children:X.englishLabel})]},de))})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:`${P.cardBg} rounded-xl shadow-lg p-6`,children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"আজকের কৃতজ্ঞতা"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"What are you thankful for today?"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("textarea",{value:g,onChange:X=>v(X.target.value),placeholder:"I'm grateful for...",className:"w-full h-24 p-3 border border-gray-200 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm"}),l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:R,disabled:!g.trim()||x,className:`w-full bg-gradient-to-r ${P.accent} text-white py-3 rounded-xl font-medium hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2`,children:[l.jsx(kC,{className:"w-4 h-4"}),l.jsx("span",{children:x?"Saving...":"Save Gratitude"})]})]})]})]}),l.jsx(OB,{}),l.jsx(zB,{isOpen:u,onConfirm:I,onCancel:()=>h(!1),loading:f}),i&&l.jsx(VB,{onClose:()=>o(!1),onComplete:S}),a&&l.jsx(LB,{onClose:()=>c(!1)}),l.jsx(va,{})]})},rp=async(t,e,n)=>{const r=[e.uid,t].sort().join("_"),s=We(me,"chats",r);try{return(await Th(s)).exists()||await mx(s,{participants:[e.uid,t],participantNames:{[e.uid]:e.displayName||"User",[t]:n},createdAt:qt(),lastMessage:"",lastMessageTimestamp:qt()}),r}catch(i){throw console.error("Error creating/getting chat:",i),i}},KB=["😊","😂","❤️","👍","🎉","🔥","💪","🙏","✨","🌟"],WB=({user:t,currentUser:e,onClose:n})=>{const[r,s]=N.useState([]),[i,o]=N.useState(""),[a,c]=N.useState(!1),[u,h]=N.useState(!1),f=N.useRef(null),m=[e==null?void 0:e.uid,t.id].sort().join("_"),g=()=>{var y;(y=f.current)==null||y.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{g()},[r]),N.useEffect(()=>{if(!e)return;const y=async()=>{try{await e.getIdToken(!0),await rp(t.id,e,t.displayName);const I=Cn(me,"chats",m,"messages"),A=Cc(I,HS("timestamp","asc"));return Va(A,S=>{const E=[];S.forEach(k=>{const j=k.data();E.push({id:k.id,...j,timestamp:j.timestamp||new Date})}),s(E)},S=>{console.error("Error listening to messages:",S),Q.error("Failed to load messages")})}catch(I){return console.error("Error setting up message listener:",I),Q.error("Failed to initialize chat"),()=>{}}};let _;return y().then(I=>{_=I}),()=>{_&&_()}},[e,m,t.id]);const v=async()=>{if(!(!i.trim()||!e)){h(!0);try{await rp(t.id,e,t.displayName);const y=Cn(me,"chats",m,"messages");await ga(y,{content:i.trim(),senderId:e.uid,receiverId:t.id,timestamp:qt(),type:"text"});const _=We(me,"chats",m);await Sr(_,{lastMessage:i.trim(),lastMessageTimestamp:qt(),participantNames:{[e.uid]:e.displayName||"Unknown",[t.id]:t.displayName}}),o(""),c(!1)}catch(y){console.error("Error sending message:",y),Q.error("Failed to send message")}finally{h(!1)}}},x=async y=>{if(e)try{await rp(t.id,e,t.displayName);const _=Cn(me,"chats",m,"messages");await ga(_,{content:y,senderId:e.uid,receiverId:t.id,timestamp:qt(),type:"emoji"});const I=We(me,"chats",m);await Sr(I,{lastMessage:y,lastMessageTimestamp:qt(),participantNames:{[e.uid]:e.displayName||"Unknown",[t.id]:t.displayName}}),c(!1)}catch(_){console.error("Error sending emoji:",_),Q.error("Failed to send emoji")}},T=y=>{if(!y)return"";let _;if(y.toDate)_=y.toDate();else if(y instanceof Date)_=y;else return"";return _.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},b=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),v())};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:50},className:"bg-white rounded-2xl w-full max-w-md h-[600px] flex flex-col overflow-hidden shadow-2xl",children:[l.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:n,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:l.jsx(TC,{className:"w-5 h-5"})}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"font-bold text-sm",children:t.displayName.charAt(0).toUpperCase()})}),t.isOnline&&l.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold",children:t.displayName}),l.jsxs("p",{className:"text-xs opacity-80",children:[t.isOnline?"Online":"Offline"," • Level ",t.level]})]})]}),l.jsx("button",{className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors",children:l.jsx(fB,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[r.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-2xl",children:"👋"})}),l.jsxs("p",{className:"text-gray-500 text-sm",children:["Start a conversation with ",t.displayName]})]}):r.map(y=>{const _=y.senderId===(e==null?void 0:e.uid);return l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${_?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-2xl ${_?"bg-indigo-600 text-white":"bg-white text-gray-800 shadow-sm"}`,children:[y.type==="emoji"?l.jsx("span",{className:"text-2xl",children:y.content}):l.jsx("p",{className:"text-sm",children:y.content}),l.jsx("p",{className:`text-xs mt-1 ${_?"text-indigo-200":"text-gray-500"}`,children:T(y.timestamp)})]})},y.id)}),l.jsx("div",{ref:f})]}),a&&l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-white border-t border-gray-200 p-4",children:l.jsx("div",{className:"grid grid-cols-5 gap-2",children:KB.map((y,_)=>l.jsx(L.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>x(y),className:"text-2xl p-2 hover:bg-gray-100 rounded-lg transition-colors",children:y},_))})}),l.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>c(!a),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(_B,{className:"w-5 h-5"})}),l.jsx("div",{className:"flex-1 relative",children:l.jsx("textarea",{value:i,onChange:y=>o(y.target.value),onKeyPress:b,placeholder:"Type a message...",className:"w-full px-4 py-2 border border-gray-300 rounded-full resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent max-h-20",rows:1})}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,disabled:!i.trim()||u,className:"bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx($x,{className:"w-5 h-5"})})]})})]})})},GB=({post:t,currentUser:e,userData:n,onClose:r,onCommentAdded:s})=>{const[i,o]=N.useState(t),[a,c]=N.useState(""),[u,h]=N.useState(!1);N.useEffect(()=>{if(!e)return;const x=async()=>{try{return await e.getIdToken(!0),Va(We(me,"communityPosts",t.id),y=>{y.exists()&&o({id:y.id,...y.data()})})}catch(b){return console.error("Error setting up comment listener:",b),()=>{}}};let T;return x().then(b=>{T=b}),()=>{T&&T()}},[t.id,e]);const f=async()=>{if(!(!a.trim()||!e||!n)){h(!0);try{const x=Z6(me),T=We(me,"communityPosts",i.id),b={id:Date.now().toString(),content:a.trim(),authorId:e.uid,authorName:n.displayName,createdAt:new Date,likes:[]};x.update(T,{comments:Lg(b),commentCount:Mg(1)});const y=We(me,"users",e.uid);x.update(y,{coins:Mg(2)}),await x.commit(),c(""),Q.success("Comment added! +2 coins"),s&&s()}catch(x){console.error("Error adding comment:",x),Q.error("Failed to add comment")}finally{h(!1)}}},m=x=>{var R;const T=((R=x==null?void 0:x.toDate)==null?void 0:R.call(x))||new Date(x),y=new Date().getTime()-T.getTime(),_=Math.floor(y/(1e3*60)),I=Math.floor(y/(1e3*60*60)),A=Math.floor(y/(1e3*60*60*24));return A>0?`${A}d ago`:I>0?`${I}h ago`:_>0?`${_}m ago`:"Just now"},g=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),f())},v=Array.isArray(i.comments)?i.comments:[];return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl w-full max-w-md max-h-[80vh] flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("h2",{className:"text-lg font-bold text-gray-800",children:["Comments (",i.commentCount||v.length,")"]}),l.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-xs",children:i.authorName.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("h4",{className:"font-medium text-gray-800 text-sm",children:i.authorName}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(jr,{className:"w-3 h-3 text-yellow-500"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["L",i.authorLevel]})]})]}),l.jsx("p",{className:"text-xs text-gray-500",children:m(i.createdAt)})]})]}),l.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:i.content})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:v.length>0?v.map(x=>{var T;return l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-white font-bold text-xs",children:x.authorName.charAt(0).toUpperCase()})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"bg-gray-100 rounded-2xl px-3 py-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx("h5",{className:"font-medium text-gray-800 text-sm",children:x.authorName}),l.jsx("span",{className:"text-xs text-gray-500",children:m(x.createdAt)})]}),l.jsx("p",{className:"text-gray-700 text-sm",children:x.content})]}),l.jsxs("div",{className:"flex items-center space-x-4 mt-2 ml-3",children:[l.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-red-500 transition-colors",children:[l.jsx(Ms,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs",children:((T=x.likes)==null?void 0:T.length)||0})]}),l.jsx("button",{className:"text-xs text-gray-500 hover:text-gray-700 transition-colors",children:"Reply"})]})]})]},x.id)}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx("span",{className:"text-xl",children:"💬"})}),l.jsx("p",{className:"text-gray-500 text-sm",children:"No comments yet"}),l.jsx("p",{className:"text-gray-400 text-xs",children:"Be the first to comment!"})]})}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-end space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx("span",{className:"text-white font-bold text-xs",children:n==null?void 0:n.displayName.charAt(0).toUpperCase()})}),l.jsx("div",{className:"flex-1",children:l.jsx("textarea",{value:a,onChange:x=>c(x.target.value),onKeyPress:g,placeholder:"Write a comment...",className:"w-full px-3 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-sm",rows:2})}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:!a.trim()||u,className:"bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx($x,{className:"w-4 h-4"})})]})})]})})},QB=()=>{var Hr;on();const{currentUser:t,userData:e,updateUserData:n}=vn(),{unlockedItems:r}=eo(),[s,i]=N.useState([]),[o,a]=N.useState([]),[c,u]=N.useState(!1),[h,f]=N.useState(!1),[m,g]=N.useState(!1),[v,x]=N.useState(null),[T,b]=N.useState(null),[y,_]=N.useState(""),[I,A]=N.useState("general"),[R,S]=N.useState(!1),[E,k]=N.useState("posts"),[j,D]=N.useState(""),[V,P]=N.useState("relevant"),[X,de]=N.useState(0),he=[{value:"motivation",label:"অনুপ্রেরণা",emoji:"💪",color:"bg-blue-100 text-blue-800"},{value:"success",label:"সাফল্য",emoji:"🎉",color:"bg-green-100 text-green-800"},{value:"support",label:"সহায়তা",emoji:"🤝",color:"bg-purple-100 text-purple-800"},{value:"general",label:"সাধারণ",emoji:"💬",color:"bg-gray-100 text-gray-800"}],ke=B=>{var Pe;const se=new Date,Te=((Pe=B==null?void 0:B.toDate)==null?void 0:Pe.call(B))||new Date(B),Ee=(se.getTime()-Te.getTime())/(1e3*60*60);return Math.max(0,24-Ee)},$=B=>{var se;return((se=e==null?void 0:e.following)==null?void 0:se.includes(B))||!1},z=B=>{var Ne;const se=(((Ne=B.likes)==null?void 0:Ne.length)||0)*2,Te=(B.commentCount||0)*3,Ee=$(B.authorId)?10:0,Pe=ke(B.createdAt);return se+Te+Ee+Pe};N.useEffect(()=>{if(!t){console.log("User not authenticated yet, skipping Firestore listener."),i([]);return}console.log("User is authenticated. Setting up Firestore listener for user:",t.uid);const B=async()=>{try{await t.getIdToken(!0);const Te=new Date;Te.setDate(Te.getDate()-30);const Ee=Cc(Cn(me,"communityPosts"),cx("createdAt",">=",Be.fromDate(Te)),HS("createdAt","desc"),H_(50));return Va(Ee,Ne=>{const Nt=[];Ne.forEach(Ot=>{const an={id:Ot.id,...Ot.data()};an.relevanceScore=z(an),Nt.push(an)});let Mt=[...Nt];if(V==="relevant")Mt.sort((Ot,an)=>(an.relevanceScore||0)-(Ot.relevanceScore||0));else if(V==="recent")Mt.sort((Ot,an)=>{var io,oo,qr,La;const ln=((oo=(io=Ot.createdAt)==null?void 0:io.toDate)==null?void 0:oo.call(io))||new Date(Ot.createdAt);return(((La=(qr=an.createdAt)==null?void 0:qr.toDate)==null?void 0:La.call(qr))||new Date(an.createdAt)).getTime()-ln.getTime()});else if(V==="following"){const Ot=Mt.filter(ln=>$(ln.authorId)),an=Mt.filter(ln=>!$(ln.authorId));Mt=[...Ot.sort((ln,Ys)=>(Ys.relevanceScore||0)-(ln.relevanceScore||0)),...an.sort((ln,Ys)=>(Ys.relevanceScore||0)-(ln.relevanceScore||0))]}i(Mt)},Ne=>{console.error("Firestore snapshot listener error:",Ne),Q.error("পোস্ট লোড করতে সমস্যা হয়েছে")})}catch(Te){return console.error("Error setting up posts listener:",Te),Q.error("পোস্ট লোড করতে সমস্যা হয়েছে"),()=>{}}};let se;return B().then(Te=>{se=Te}),()=>{se&&(console.log("Cleaning up Firestore listener."),se())}},[t,V,e==null?void 0:e.following]),N.useEffect(()=>{if(!t)return;(async()=>{try{await t.getIdToken(!0);const se=Cc(Cn(me,"users"),H_(50)),Te=await G6(se),Ee=[];Te.forEach(Pe=>{const Ne=Pe.data();Pe.id!==(t==null?void 0:t.uid)&&Ee.push({id:Pe.id,displayName:Ne.displayName||"Unknown User",level:Ne.level||1,isOnline:Ne.isOnline||!1,lastSeen:Ne.lastSeen,following:Ne.following||[],followers:Ne.followers||[]})}),a(Ee)}catch(se){console.error("Error fetching users:",se),Q.error("ব্যবহারকারী তালিকা লোড করতে সমস্যা হয়েছে")}})()},[t]),N.useEffect(()=>{if(!t)return;(async()=>{try{de(0)}catch(se){console.error("Error fetching comment count:",se)}})()},[t]);const G=async()=>{if(!(!y.trim()||!t||!e)){S(!0);try{const B=r.badges||[];if(await ga(Cn(me,"communityPosts"),{content:y.trim(),authorId:t.uid,authorName:e.displayName,authorLevel:e.level,authorBadges:B,createdAt:qt(),likes:[],commentCount:0,category:I}),_(""),u(!1),Q.success("Post shared with community! +3 coins"),e){const se=e.coins+3;await n({coins:se})}}catch(B){console.error("Error creating post:",B),Q.error("Failed to create post")}finally{S(!1)}}},te=async(B,se)=>{if(!t)return;const Te=We(me,"communityPosts",B),Ee=se.includes(t.uid);try{if(Ee)await Sr(Te,{likes:W_(t.uid)});else if(await Sr(Te,{likes:Lg(t.uid)}),se.length+1===10){const Ne=s.find(Nt=>Nt.id===B);if(Ne&&Ne.authorId!==t.uid){const Nt=We(me,"users",Ne.authorId);await Sr(Nt,{coins:Mg(15)}),console.log(`Post by ${Ne.authorName} reached 10 likes! +15 coins awarded.`)}}}catch(Pe){console.error("Error updating like:",Pe),Q.error("লাইক আপডেট করতে সমস্যা হয়েছে")}},le=async B=>{var Te;if(!t){Q.error("অনুগ্রহ করে ফলো করার জন্য লগইন করুন।");return}if(t.uid===B){Q.error("আপনি নিজেকে ফলো করতে পারবেন না।");return}const se=We(me,"users",t.uid);console.log(`Follow attempt for target: ${B} by user: ${t.uid}`);try{if(await px(me,async Ee=>{const Pe=await Ee.get(se);if(!Pe.exists())throw new Error("আপনার ইউজার প্রোফাইল খুঁজে পাওয়া যায়নি।");(Pe.data().following||[]).includes(B)?(Ee.update(se,{following:W_(B)}),console.log(`User ${t.uid} is unfollowing ${B}`)):(Ee.update(se,{following:Lg(B)}),console.log(`User ${t.uid} is following ${B}`))}),e){const Pe=$(B)?((Te=e.following)==null?void 0:Te.filter(Ne=>Ne!==B))||[]:[...e.following||[],B];await n({following:Pe})}Q.success("ফলো স্ট্যাটাস আপডেট হয়েছে!")}catch(Ee){console.error("Follow Transaction Failed:",Ee),Q.error("ফলো স্ট্যাটাস আপডেট করা যায়নি।")}},xe=async B=>{if(!t){Q.error("অনুগ্রহ করে চ্যাট শুরু করার জন্য লগইন করুন।");return}if(t.uid===B.id){Q.error("আপনি নিজের সাথে চ্যাট করতে পারবেন না।");return}const se=[t.uid,B.id].sort().join("_"),Te=We(me,"chats",se);console.log(`Initiating chat. Checking for chat ID: ${se}`);try{(await Th(Te)).exists()?console.log("Chat document already exists."):(console.log("Chat does not exist. Creating new chat document..."),await mx(Te,{participants:[t.uid,B.id],participantNames:{[t.uid]:t.displayName||"User",[B.id]:B.displayName||"User"},createdAt:qt(),lastMessage:""}),console.log("Chat document created successfully.")),x(B),f(!0)}catch(Ee){console.error("Error initiating chat:",Ee),Q.error("চ্যাট সেশন শুরু করা যায়নি।")}},Et=B=>{b(B),g(!0)},ut=()=>{const B=X+1;if(de(B),B%5===0&&e){const se=e.coins+10;n({coins:se}),Q.success("Wisdom Sharer! +10 coins for 5 comments!",{duration:4e3})}},it=B=>{var Mt;const se=((Mt=B==null?void 0:B.toDate)==null?void 0:Mt.call(B))||new Date(B),Ee=new Date().getTime()-se.getTime(),Pe=Math.floor(Ee/(1e3*60)),Ne=Math.floor(Ee/(1e3*60*60)),Nt=Math.floor(Ee/(1e3*60*60*24));return Nt>0?`${Nt}d ago`:Ne>0?`${Ne}h ago`:Pe>0?`${Pe}m ago`:"Just now"},Yt=B=>he.find(se=>se.value===B)||he[3],so=o.filter(B=>B.displayName&&B.displayName.toLowerCase().includes(j.toLowerCase()));return l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[l.jsx("div",{className:"bg-white shadow-sm px-4 py-6",children:l.jsxs("div",{className:"max-w-md mx-auto",children:[l.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"কমিউনিটি"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Connect and share your journey"})]}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u(!0),className:"bg-indigo-600 text-white p-3 rounded-full hover:bg-indigo-700 transition-colors",children:l.jsx(Bx,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-xl p-1",children:[l.jsxs("button",{onClick:()=>k("posts"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-colors ${E==="posts"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[l.jsx(hB,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Posts"})]}),l.jsxs("button",{onClick:()=>k("chat"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 rounded-lg transition-colors ${E==="chat"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-200"}`,children:[l.jsx(hl,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Chat"})]})]})]})}),l.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-center mb-2",children:l.jsx(Xo,{className:"w-5 h-5 text-blue-600"})}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:o.length+1}),l.jsx("div",{className:"text-xs text-gray-500",children:"Members"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-center mb-2",children:l.jsx(hl,{className:"w-5 h-5 text-green-600"})}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:s.length}),l.jsx("div",{className:"text-xs text-gray-500",children:"Posts"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"flex items-center justify-center mb-2",children:l.jsx(t0,{className:"w-5 h-5 text-purple-600"})}),l.jsx("div",{className:"text-2xl font-bold text-gray-800",children:((Hr=e==null?void 0:e.following)==null?void 0:Hr.length)||0}),l.jsx("div",{className:"text-xs text-gray-500",children:"Following"})]})]})}),E==="posts"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:l.jsx("div",{className:"flex space-x-1",children:[{key:"relevant",label:"Relevant",icon:t0},{key:"recent",label:"Recent",icon:NC},{key:"following",label:"Following",icon:Xo}].map(B=>l.jsxs("button",{onClick:()=>P(B.key),className:`flex-1 flex items-center justify-center space-x-2 py-2 px-3 rounded-lg transition-colors ${V===B.key?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100"}`,children:[l.jsx(B.icon,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:B.label})]},B.key))})}),l.jsx("div",{className:"space-y-4",children:s.length===0?l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[l.jsx(Xo,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No posts yet"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Be the first to share your journey!"}),l.jsx("button",{onClick:()=>u(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-xl hover:bg-indigo-700 transition-colors",children:"Create First Post"})]}):s.map(B=>{var Ne,Nt;const se=Yt(B.category),Te=(Ne=B.likes)==null?void 0:Ne.includes((t==null?void 0:t.uid)||""),Ee=$(B.authorId),Pe=B.authorId===(t==null?void 0:t.uid);return l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-sm",children:B.authorName.charAt(0).toUpperCase()})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("h4",{className:"font-semibold text-gray-800",children:B.authorName}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(jr,{className:"w-3 h-3 text-yellow-500"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["L",B.authorLevel]})]}),B.authorBadges&&B.authorBadges.length>0&&l.jsxs("div",{className:"flex space-x-1",children:[B.authorBadges.slice(0,2).map((Mt,Ot)=>l.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-xs",children:"🏆"})},Ot)),B.authorBadges.length>2&&l.jsxs("span",{className:"text-xs text-gray-500",children:["+",B.authorBadges.length-2]})]}),V==="relevant"&&B.relevanceScore&&l.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:["Score: ",Math.round(B.relevanceScore)]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("p",{className:"text-xs text-gray-500",children:it(B.createdAt)}),!Pe&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>le(B.authorId),className:`text-xs px-2 py-1 rounded-full transition-colors ${Ee?"bg-green-100 text-green-700 hover:bg-green-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:Ee?l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(lT,{className:"w-3 h-3"}),l.jsx("span",{children:"Following"})]}):l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(cT,{className:"w-3 h-3"}),l.jsx("span",{children:"Follow"})]})}),l.jsx("button",{onClick:()=>{const Mt=o.find(Ot=>Ot.id===B.authorId);Mt&&xe(Mt)},className:"text-xs bg-gray-100 text-gray-700 hover:bg-gray-200 px-2 py-1 rounded-full transition-colors",children:l.jsx(hl,{className:"w-3 h-3"})})]})]})]})]}),l.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${se.color}`,children:[se.emoji," ",se.label]})]}),l.jsx("p",{className:"text-gray-700 mb-4 leading-relaxed",children:B.content}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:()=>te(B.id,B.likes||[]),className:`flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors ${Te?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[l.jsx(Ms,{className:`w-4 h-4 ${Te?"fill-current":""}`}),l.jsx("span",{className:"text-sm",children:((Nt=B.likes)==null?void 0:Nt.length)||0})]}),l.jsxs("button",{onClick:()=>Et(B),className:"flex items-center space-x-2 px-3 py-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:[l.jsx(hl,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm",children:B.commentCount||0})]})]}),l.jsx("button",{className:"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",children:l.jsx(yB,{className:"w-4 h-4"})})]})]},B.id)})})]}),E==="chat"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4",children:l.jsxs("div",{className:"relative",children:[l.jsx(pB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Search members...",value:j,onChange:B=>D(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Community Members"}),l.jsx("div",{className:"space-y-3",children:so.length===0?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"No members found"}):so.map(B=>{const se=$(B.id);return l.jsxs(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white font-bold text-sm",children:B.displayName.charAt(0).toUpperCase()})}),B.isOnline&&l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-800",children:B.displayName}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(jr,{className:"w-3 h-3 text-yellow-500"}),l.jsxs("span",{className:"text-xs text-gray-500",children:["Level ",B.level]}),B.isOnline?l.jsx("span",{className:"text-xs text-green-600",children:"Online"}):l.jsx("span",{className:"text-xs text-gray-400",children:"Offline"}),se&&l.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Following"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>le(B.id),className:`p-2 rounded-lg transition-colors ${se?"bg-green-100 text-green-600 hover:bg-green-200":"bg-blue-100 text-blue-600 hover:bg-blue-200"}`,children:se?l.jsx(lT,{className:"w-4 h-4"}):l.jsx(cT,{className:"w-4 h-4"})}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>xe(B),className:"bg-indigo-600 text-white p-2 rounded-lg hover:bg-indigo-700 transition-colors",children:l.jsx(hl,{className:"w-4 h-4"})})]})]},B.id)})})]})]})]}),l.jsx(qn,{children:c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Share Your Journey"}),l.jsx("button",{onClick:()=>u(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Os,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:he.map(B=>l.jsx("button",{onClick:()=>A(B.value),className:`p-3 rounded-lg border-2 transition-colors text-left ${I===B.value?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{children:B.emoji}),l.jsx("span",{className:"text-sm font-medium",children:B.label})]})},B.value))})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message"}),l.jsx("textarea",{value:y,onChange:B=>_(B.target.value),placeholder:"Share your thoughts, progress, or ask for support...",className:"w-full h-32 p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y.length,"/500 characters"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:G,disabled:!y.trim()||R,className:"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[l.jsx($x,{className:"w-4 h-4"}),l.jsx("span",{children:R?"Posting...":"Share Post"})]})]})]})})}),l.jsx(qn,{children:h&&v&&l.jsx(WB,{user:v,currentUser:t,onClose:()=>{f(!1),x(null)}})}),l.jsx(qn,{children:m&&T&&l.jsx(GB,{post:T,currentUser:t,userData:e,onClose:()=>{g(!1),b(null)},onCommentAdded:ut})}),l.jsx(va,{})]})},YB=()=>{const{t,i18n:e}=on(),{currentUser:n,userData:r,logout:s,updateUserData:i}=vn(),{unlockedItems:o}=eo(),[a,c]=N.useState(!1),[u,h]=N.useState(!1),[f,m]=N.useState((r==null?void 0:r.displayName)||""),[g,v]=N.useState(!1),x=[{code:"bn",name:"বাংলা",nativeName:"বাংলা",flag:"🇧🇩"},{code:"en",name:"English",nativeName:"English",flag:"🇺🇸"},{code:"hi",name:"हिन्दी",nativeName:"हिन्दी",flag:"🇮🇳"},{code:"ur",name:"اردو",nativeName:"اردو",flag:"🇵🇰"}],T=async()=>{try{await s()}catch(j){console.error("Logout error:",j)}},b=async()=>{if(f.trim()){v(!0);try{await i({displayName:f.trim()}),c(!1),Q.success("Profile updated successfully!")}catch(j){console.error("Error updating profile:",j),Q.error("Failed to update profile")}finally{v(!1)}}},y=async j=>{try{await e.changeLanguage(j),localStorage.setItem("selectedLanguage",j),document.documentElement.lang=j,r&&await i({language:j}),h(!1),Q.success("Language updated successfully!")}catch(D){console.error("Error updating language:",D),Q.error("Failed to update language")}},_=j=>{navigator.clipboard.writeText(j),Q.success("Copied to clipboard!")},I=[{id:1,title:"First Steps",description:"Started your journey",icon:"🌱",unlocked:!0,date:"2024-01-15"},{id:2,title:"Week Warrior",description:"7 days streak",icon:"🔥",unlocked:(r==null?void 0:r.streak)>=7,date:(r==null?void 0:r.streak)>=7?"2024-01-22":null},{id:3,title:"Community Helper",description:"Helped 10 people",icon:"🤝",unlocked:!1,date:null},{id:4,title:"Gratitude Master",description:"30 gratitude entries",icon:"🙏",unlocked:!1,date:null},{id:5,title:"Level 10 Hero",description:"Reached level 10",icon:"⭐",unlocked:(r==null?void 0:r.level)>=10,date:(r==null?void 0:r.level)>=10?"2024-02-01":null},{id:6,title:"Month Champion",description:"30 days streak",icon:"🏆",unlocked:(r==null?void 0:r.streak)>=30,date:(r==null?void 0:r.streak)>=30?"2024-02-15":null}],A=[{label:"Current Streak",value:`${(r==null?void 0:r.streak)||0} days`,icon:IC,color:"text-red-500",bgColor:"bg-red-100"},{label:"Total XP",value:(r==null?void 0:r.xp)||0,icon:Mh,color:"text-yellow-500",bgColor:"bg-yellow-100"},{label:"Coins Earned",value:(r==null?void 0:r.coins)||0,icon:Kn,color:"text-green-500",bgColor:"bg-green-100"},{label:"Current Level",value:(r==null?void 0:r.level)||1,icon:n0,color:"text-purple-500",bgColor:"bg-purple-100"}],R=[{icon:mB,label:"Edit Profile",action:()=>c(!0),color:"text-blue-600"},{icon:Xg,label:"Language",action:()=>h(!0),color:"text-green-600"},{icon:X8,label:"Notifications",action:()=>Q.info("Notification settings coming soon!"),color:"text-yellow-600"},{icon:zx,label:"Privacy & Security",action:()=>Q.info("Privacy settings coming soon!"),color:"text-purple-600"},{icon:cB,label:"Help & Support",action:()=>Q.info("Help center coming soon!"),color:"text-indigo-600"}];if(!r)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading profile..."})]})});const S=new Date(r.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"}),E=Object.values(o).reduce((j,D)=>j+D.length,0),k=x.find(j=>j.code===e.language)||x[0];return l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 px-4 py-8",children:l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[l.jsxs("div",{className:"relative mb-4",children:[l.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto shadow-lg",children:l.jsx("span",{className:"text-3xl font-bold text-indigo-600",children:r.displayName.charAt(0).toUpperCase()})}),l.jsx("button",{className:"absolute bottom-0 right-1/2 transform translate-x-8 bg-white rounded-full p-2 shadow-lg hover:shadow-xl transition-shadow",children:l.jsx(eB,{className:"w-4 h-4 text-gray-600"})})]}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-1",children:r.displayName}),l.jsx("p",{className:"text-indigo-200 text-sm mb-2",children:n==null?void 0:n.email}),l.jsxs("div",{className:"flex items-center justify-center space-x-4 text-indigo-200 text-sm",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Ox,{className:"w-4 h-4"}),l.jsxs("span",{children:["Joined ",S]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(jr,{className:"w-4 h-4"}),l.jsxs("span",{children:["Level ",r.level]})]})]}),l.jsx("div",{className:"mt-3 bg-white bg-opacity-20 rounded-full px-4 py-2 inline-block",children:l.jsxs("span",{className:"text-white text-sm font-medium",children:[k.flag," ",k.nativeName]})}),E>0&&l.jsx("div",{className:"mt-3 bg-white bg-opacity-20 rounded-full px-4 py-2 inline-block",children:l.jsxs("span",{className:"text-white text-sm font-medium",children:["🎁 ",E," items unlocked"]})})]})})}),l.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl shadow-lg p-6 border border-green-200",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[l.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:l.jsx(Ms,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"আমাদের সাপোর্ট করুন"}),l.jsx("p",{className:"text-green-700 text-sm",children:"Support Our Mission"})]})]}),l.jsx("p",{className:"text-gray-700 text-sm mb-4 leading-relaxed",children:"আমাদের এই যাত্রাকে সচল রাখতে এবং অন্যদের সাহায্য করতে আপনার সহায়তার প্রয়োজন। অল্প দানও একটি বড় পরিবর্তন আনতে পারে।"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(iT,{className:"w-4 h-4 text-pink-600"}),l.jsx("span",{className:"font-medium text-gray-800",children:"bKash"})]}),l.jsx("button",{onClick:()=>_("01712345678"),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:l.jsx(rT,{className:"w-4 h-4 text-gray-500"})})]}),l.jsx("p",{className:"text-gray-600 text-sm font-mono",children:"01712345678"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal Number"})]}),l.jsxs("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(iT,{className:"w-4 h-4 text-orange-600"}),l.jsx("span",{className:"font-medium text-gray-800",children:"Nagad"})]}),l.jsx("button",{onClick:()=>_("01712345678"),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:l.jsx(rT,{className:"w-4 h-4 text-gray-500"})})]}),l.jsx("p",{className:"text-gray-600 text-sm font-mono",children:"01712345678"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Personal Number"})]})]}),l.jsx("div",{className:"mt-4 p-3 bg-green-100 rounded-lg",children:l.jsx("p",{className:"text-green-800 text-xs text-center",children:"💚 আপনার প্রতিটি অবদান আমাদের কমিউনিটিকে আরও শক্তিশালী করে তোলে"})})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Your Progress"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:A.map((j,D)=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-12 h-12 ${j.bgColor} rounded-full flex items-center justify-center mx-auto mb-2`,children:l.jsx(j.icon,{className:`w-6 h-6 ${j.color}`})}),l.jsx("div",{className:"text-xl font-bold text-gray-800",children:j.value}),l.jsx("div",{className:"text-xs text-gray-500",children:j.label})]},D))})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Achievements"}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:I.map(j=>l.jsxs(L.div,{whileHover:{scale:1.05},className:`p-3 rounded-xl text-center transition-all ${j.unlocked?"bg-gradient-to-br from-yellow-100 to-orange-100 border-2 border-yellow-300":"bg-gray-100 border-2 border-gray-200"}`,children:[l.jsx("div",{className:`text-2xl mb-1 ${j.unlocked?"":"grayscale opacity-50"}`,children:j.icon}),l.jsx("div",{className:`text-xs font-medium ${j.unlocked?"text-gray-800":"text-gray-500"}`,children:j.title}),j.unlocked&&j.date&&l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:j.date})]},j.id))})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-4",children:"Settings"}),l.jsx("div",{className:"space-y-1",children:R.map((j,D)=>l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j.action,className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(j.icon,{className:`w-5 h-5 ${j.color}`}),l.jsx("span",{className:"font-medium text-gray-700",children:j.label})]}),l.jsx(rB,{className:"w-4 h-4 text-gray-400"})]},D))})]}),l.jsxs(L.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"w-full bg-red-500 text-white py-4 rounded-xl font-medium hover:bg-red-600 transition-colors flex items-center justify-center space-x-2",children:[l.jsx(dB,{className:"w-5 h-5"}),l.jsx("span",{children:"Logout"})]})]}),a&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Edit Profile"}),l.jsx("button",{onClick:()=>c(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Hx,{className:"w-5 h-5 text-gray-500"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),l.jsx("input",{type:"text",value:f,onChange:j=>m(j.target.value),className:"w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter your name"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,disabled:!f.trim()||g,className:"flex-1 bg-indigo-600 text-white px-4 py-3 rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Saving...":"Save Changes"})]})]})]})}),u&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Select Language"}),l.jsx("button",{onClick:()=>h(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:l.jsx(Xg,{className:"w-5 h-5 text-gray-500"})})]}),l.jsx("div",{className:"space-y-3",children:x.map(j=>l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>y(j.code),className:`w-full p-4 rounded-xl border-2 transition-all flex items-center justify-between ${e.language===j.code?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",children:j.flag}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-gray-800",children:j.nativeName}),l.jsx("div",{className:"text-sm text-gray-500",children:j.name})]})]}),e.language===j.code&&l.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs",children:"✓"})})]},j.code))}),l.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl",children:l.jsx("p",{className:"text-blue-800 text-sm text-center",children:"Language changes will apply immediately and be saved to your profile."})})]})}),l.jsx(va,{})]})},JB=({reward:t,userCoins:e,onConfirm:n,onCancel:r,loading:s})=>{const i=e>=t.cost;return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(t.icon,{className:"w-8 h-8 text-white"})}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"নিশ্চিত করুন"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"আপনি কি নিশ্চিতভাবে এই পুরস্কারটি রিডিম করতে চান?"})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"font-medium text-gray-800",children:t.name}),l.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[l.jsx(Kn,{className:"w-4 h-4"}),l.jsx("span",{className:"font-bold",children:t.cost})]})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-3",children:t.description}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"আপনার বর্তমান কয়েন:"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Kn,{className:"w-4 h-4 text-yellow-600"}),l.jsx("span",{className:"font-bold text-gray-800",children:e})]})]}),i&&l.jsxs("div",{className:"flex items-center justify-between text-sm mt-2 pt-2 border-t border-gray-200",children:[l.jsx("span",{className:"text-gray-500",children:"রিডিমের পর অবশিষ্ট:"}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Kn,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"font-bold text-green-600",children:e-t.cost})]})]})]}),!i&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:l.jsxs("p",{className:"text-red-700 text-sm text-center",children:["দুঃখিত! আপনার পর্যাপ্ত কয়েন নেই। আরও ",t.cost-e," কয়েন প্রয়োজন।"]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"না"}),l.jsx(L.button,{whileHover:{scale:i?1.02:1},whileTap:{scale:i?.98:1},onClick:n,disabled:!i||s,className:`flex-1 px-4 py-3 rounded-xl font-medium transition-colors ${i&&!s?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:s?"প্রক্রিয়াকরণ...":"হ্যাঁ, নিশ্চিত"})]})]})})},uT=({reward:t,userCoins:e,onRedeem:n,isUnlocked:r=!1,isActive:s=!1,onActivate:i})=>{const o=e>=t.cost;return l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},className:`bg-white rounded-xl shadow-lg p-6 border transition-all duration-300 hover:shadow-xl ${r?"border-green-300 bg-green-50":"border-gray-100"}`,children:[l.jsxs("div",{className:"relative mb-4",children:[l.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3 ${t.type==="theme"?"bg-gradient-to-br from-blue-400 to-cyan-500":t.type==="badge"?"bg-gradient-to-br from-yellow-400 to-orange-500":t.type==="tree-design"?"bg-gradient-to-br from-pink-400 to-rose-500":t.type==="recharge"?"bg-gradient-to-br from-green-400 to-emerald-500":t.type==="music"?"bg-gradient-to-br from-purple-400 to-indigo-500":"bg-gradient-to-br from-red-400 to-pink-500"}`,children:l.jsx(t.icon,{className:"w-8 h-8 text-white"})}),r&&l.jsx("div",{className:"absolute -top-2 -right-2",children:l.jsxs("div",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[l.jsx(tB,{className:"w-3 h-3"}),l.jsx("span",{children:"Unlocked"})]})}),s&&l.jsx("div",{className:"absolute -bottom-2 -right-2",children:l.jsxs("div",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[l.jsx(Mh,{className:"w-3 h-3"}),l.jsx("span",{children:"Active"})]})}),t.cost>=5e3&&!r&&l.jsx("div",{className:"absolute -top-2 -left-2",children:l.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[l.jsx(sB,{className:"w-3 h-3"}),l.jsx("span",{children:"Premium"})]})})]}),l.jsxs("div",{className:"text-center mb-4",children:[l.jsx("h3",{className:"font-bold text-gray-800 mb-2 text-lg",children:t.name}),l.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-3",children:t.description}),!r&&l.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[l.jsx("span",{className:"text-gray-500 text-sm",children:"মূল্য:"}),l.jsxs("div",{className:"flex items-center space-x-1 bg-yellow-100 px-3 py-1 rounded-full",children:[l.jsx(Kn,{className:"w-4 h-4 text-yellow-600"}),l.jsx("span",{className:"font-bold text-yellow-700",children:t.cost}),l.jsx("span",{className:"text-yellow-600 text-sm",children:"কয়েন"})]})]})]}),r?l.jsxs("div",{className:"space-y-2",children:[t.category==="in-app"&&i&&l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(t),disabled:s,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 ${s?"bg-blue-100 text-blue-700 cursor-default":"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl"}`,children:s?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(Mh,{className:"w-4 h-4"}),l.jsx("span",{children:"সক্রিয়"})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(gB,{className:"w-4 h-4"}),l.jsx("span",{children:"সক্রিয় করুন"})]})}),l.jsx("div",{className:"bg-green-100 text-green-700 py-2 px-4 rounded-xl text-center text-sm font-medium",children:"✅ আনলক করা হয়েছে"})]}):l.jsx(L.button,{whileHover:{scale:o?1.05:1},whileTap:{scale:o?.95:1},onClick:()=>n(t),disabled:!o,className:`w-full py-3 px-4 rounded-xl font-medium transition-all duration-200 ${o?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:from-indigo-700 hover:to-purple-700 shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed opacity-50"}`,children:o?l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(Rc,{className:"w-4 h-4"}),l.jsx("span",{children:"রিডিম করুন"})]}):l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(Kn,{className:"w-4 h-4"}),l.jsx("span",{children:"অপর্যাপ্ত কয়েন"})]})}),!o&&!r&&l.jsxs("p",{className:"text-center text-xs text-red-500 mt-2",children:["আরও ",t.cost-e," কয়েন প্রয়োজন"]})]})},XB=()=>{on();const{userData:t,updateUserData:e,currentUser:n}=vn(),{unlockedItems:r,activeTheme:s,hasUnlockedItem:i}=eo(),[o,a]=N.useState(null),[c,u]=N.useState(!1),h=[{id:"ocean-theme",name:"প্রিমিয়াম ওশেন থিম",description:"আপনার অ্যাপকে একটি শান্ত এবং সুন্দর সমুদ্রের থিম দিন।",cost:500,icon:Fx,category:"in-app",type:"theme",unlockCategory:"themes"},{id:"legendary-badge",name:"লিজেন্ডারি ব্যাজ",description:"আপনার প্রোফাইলে এই বিশেষ ব্যাজটি প্রদর্শন করে আপনার অর্জনকে দেখান।",cost:1500,icon:jr,category:"in-app",type:"badge",unlockCategory:"badges"},{id:"cherry-blossom-tree",name:"চেরি ব্লসম ট্রি",description:"আপনার সঙ্কল্প বৃক্ষটিকে একটি সুন্দর চেরি ব্লসম গাছে পরিণত করুন।",cost:1e3,icon:nB,category:"in-app",type:"tree-design",unlockCategory:"features"},{id:"focus-music",name:"ফোকাস মোড মিউজিক",description:"অ্যাপ ব্যবহারের সময় শোনার জন্য একটি শান্ত এবং মেডিটেটিভ সাউন্ডট্র্যাক আনলক করুন।",cost:750,icon:lB,category:"in-app",type:"music",unlockCategory:"music"}],f=[{id:"mobile-recharge-20",name:"২০ টাকা মোবাইল রিচার্জ",description:"আপনার যেকোনো লোকাল অপারেটরে ২০ টাকা রিচার্জ নিন।",cost:5e3,icon:wB,category:"real-world",type:"recharge"},{id:"plant-tree",name:"একটি বাস্তব গাছ লাগান",description:"আপনার নামে একটি বাস্তব গাছ লাগানো হবে এবং আপনি তার একটি ডিজিটাল সার্টিফিকেট পাবেন।",cost:1e4,icon:EB,category:"real-world",type:"donation"},{id:"charity-donation",name:"১০ টাকা চ্যারিটিতে দান করুন",description:"আপনার কয়েন ব্যবহার করে কোনো একটি মহৎ উদ্দেশ্যে সাহায্য করুন।",cost:1e3,icon:Ms,category:"real-world",type:"donation"}],m=async v=>{if(!n||!t){Q.error("Please log in to redeem rewards");return}if(t.coins<v.cost){Q.error("Insufficient coins");return}u(!0);try{await px(me,async x=>{const T=We(me,"users",n.uid),b=await x.get(T);if(!b.exists())throw new Error("User document does not exist");const y=b.data().coins||0;if(y<v.cost)throw new Error("Insufficient coins");const _={coins:y-v.cost};if(v.category==="in-app"&&v.unlockCategory){const I=b.data().unlocked_items||{themes:[],badges:[],music:[],features:[]};I[v.unlockCategory].includes(v.id)||(I[v.unlockCategory].push(v.id),_.unlocked_items=I)}if(x.update(T,_),v.category==="real-world"){const I=We(Cn(me,"redemptionRequests"));x.set(I,{userId:n.uid,userEmail:n.email,userName:t.displayName,rewardId:v.id,rewardName:v.name,rewardType:v.type,cost:v.cost,status:"pending",createdAt:new Date,processedAt:null,notes:""})}}),await e({coins:t.coins-v.cost}),a(null),v.category==="real-world"?Q.success("Redemption request submitted! We will process it within 24 hours."):Q.success(`${v.name} has been unlocked!`)}catch(x){console.error("Error redeeming reward:",x),Q.error("Failed to redeem reward. Please try again.")}finally{u(!1)}},g=async v=>{if(n)try{await Sr(We(me,"users",n.uid),{active_theme:v.id}),Q.success(`${v.name} activated!`)}catch(x){console.error("Error activating theme:",x),Q.error("Failed to activate theme")}};return t?l.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[l.jsx("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-700 px-4 py-8",children:l.jsx("div",{className:"max-w-md mx-auto text-center",children:l.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-white",children:[l.jsx("div",{className:"flex items-center justify-center mb-4",children:l.jsx("div",{className:"bg-white bg-opacity-20 p-3 rounded-full",children:l.jsx(Rc,{className:"w-8 h-8"})})}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"পুরস্কার কেন্দ্র"}),l.jsx("p",{className:"text-indigo-200 text-sm",children:"Rewards Center"})]})})}),l.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[l.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6 border border-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Kn,{className:"w-8 h-8 text-white"})}),l.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"আপনার বর্তমান কয়েন"}),l.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"text-4xl font-bold text-yellow-600",children:t.coins.toLocaleString()}),l.jsx(e0,{className:"w-6 h-6 text-yellow-500"})]}),l.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Keep completing daily tasks to earn more coins!"})]})}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Mh,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ইন-অ্যাপ পুরস্কার"}),l.jsx("span",{className:"text-sm text-gray-500",children:"(In-App Rewards)"})]}),l.jsx("div",{className:"grid gap-4",children:h.map((v,x)=>l.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*x},children:l.jsx(uT,{reward:v,userCoins:t.coins,onRedeem:a,isUnlocked:i(v.unlockCategory,v.id),isActive:v.type==="theme"&&s===v.id,onActivate:v.type==="theme"?g:void 0})},v.id))})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Rc,{className:"w-5 h-5 text-green-600"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"বাস্তব পুরস্কার"}),l.jsx("span",{className:"text-sm text-gray-500",children:"(Real-World Rewards)"})]}),l.jsx("div",{className:"grid gap-4",children:f.map((v,x)=>l.jsx(L.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*x},children:l.jsx(uT,{reward:v,userCoins:t.coins,onRedeem:a})},v.id))})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-6 border border-blue-200",children:[l.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-3 flex items-center space-x-2",children:[l.jsx(e0,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{children:"আরও কয়েন অর্জন করুন"})]}),l.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),l.jsx("span",{children:"Daily check-in: +5 coins"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),l.jsx("span",{children:"Create a post: +3 coins"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),l.jsx("span",{children:"Complete mental workout: +10 coins"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),l.jsx("span",{children:"Write gratitude entry: +2 coins"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),l.jsx("span",{children:"Level up: +50 coins"})]})]})]})]}),l.jsx(qn,{children:o&&l.jsx(JB,{reward:o,userCoins:t.coins,onConfirm:()=>m(o),onCancel:()=>a(null),loading:c})}),l.jsx(va,{})]}):l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading rewards..."})]})})},ZB=[{id:"breathing",type:"mental",title:"শ্বাস-প্রশ্বাসের ব্যায়াম",description:"২ মিনিটের শান্তিদায়ক শ্বাস-প্রশ্বাসের ব্যায়াম",componentName:"BreathingExercise",duration:120,coins:5},{id:"squats",type:"physical",title:"শারীরিক কার্যকলাপ",description:"১০ বার স্কোয়াট করুন",componentName:"PhysicalActivity",duration:60,coins:5},{id:"reverse_spelling",type:"mental",title:"উল্টো বানান",description:'"SUCCESS" শব্দটি উল্টো করে লিখুন',componentName:"ReverseSpelling",duration:60,coins:3},{id:"grounding",type:"mental",title:"গ্রাউন্ডিং টেকনিক",description:"৫-৪-৩-২-১ পদ্ধতি অনুসরণ করুন",componentName:"GroundingTechnique",duration:180,coins:7},{id:"counting_backwards",type:"mental",title:"উল্টো গণনা",description:"১০০ থেকে ৭ বিয়োগ করে গণনা করুন",componentName:"CountingBackwards",duration:90,coins:4},{id:"memory_sequence",type:"mental",title:"স্মৃতি পরীক্ষা",description:"রঙের ক্রম মনে রাখুন এবং পুনরাবৃত্তি করুন",componentName:"MemorySequence",duration:120,coins:6},{id:"doodle_pad",type:"creative",title:"সৃজনশীল আঁকা",description:"১ মিনিটের জন্য যা ইচ্ছা আঁকুন",componentName:"DoodlePad",duration:60,coins:4},{id:"word_association",type:"creative",title:"শব্দ সংযোগ",description:"দেওয়া শব্দের সাথে সম্পর্কিত ৫টি শব্দ লিখুন",componentName:"WordAssociation",duration:90,coins:5},{id:"bubble_pop",type:"game",title:"বুদবুদ ফাটানো",description:"৩০ সেকেন্ডের জন্য বুদবুদ ফাটান",componentName:"BubblePopGame",duration:30,coins:3},{id:"color_match",type:"game",title:"রঙ মিলানো",description:"সঠিক রঙের নাম ক্লিক করুন",componentName:"ColorMatchGame",duration:45,coins:4},{id:"reaction_test",type:"game",title:"প্রতিক্রিয়া পরীক্ষা",description:"সবুজ হলেই ক্লিক করুন",componentName:"ReactionTest",duration:60,coins:5},{id:"jumping_jacks",type:"physical",title:"জাম্পিং জ্যাকস",description:"১৫ বার জাম্পিং জ্যাকস করুন",componentName:"JumpingJacks",duration:45,coins:4},{id:"wall_pushups",type:"physical",title:"দেয়াল পুশআপ",description:"১০ বার দেয়ালে পুশআপ করুন",componentName:"WallPushups",duration:60,coins:5}],dT=(t=4)=>[...ZB].sort(()=>.5-Math.random()).slice(0,t),fl=[{word:"SUCCESS",meaning:"সাফল্য"},{word:"STRENGTH",meaning:"শক্তি"},{word:"COURAGE",meaning:"সাহস"},{word:"WISDOM",meaning:"প্রজ্ঞা"},{word:"PEACE",meaning:"শান্তি"},{word:"FOCUS",meaning:"মনোযোগ"},{word:"GROWTH",meaning:"বৃদ্ধি"}],e$=({onComplete:t})=>{const[e,n]=N.useState(fl[0]),[r,s]=N.useState(""),[i,o]=N.useState(null),[a,c]=N.useState(!1),[u,h]=N.useState(0);N.useEffect(()=>{const x=fl[Math.floor(Math.random()*fl.length)];n(x)},[]);const f=e.word.split("").reverse().join(""),m=()=>{const x=r.toUpperCase()===f;o(x),h(T=>T+1),x&&(c(!0),setTimeout(()=>{t()},2e3))},g=()=>{const x=fl[Math.floor(Math.random()*fl.length)];n(x),s(""),o(null),c(!1),h(0)},v=x=>{x.key==="Enter"&&r.trim()&&m()};return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:l.jsx(NB,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"উল্টো বানান"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"শব্দটি উল্টো করে লিখুন"})]})]}),a?l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"চমৎকার!"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"সঠিক উত্তর! +3 কয়েন অর্জিত"})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center bg-gradient-to-br from-purple-50 to-indigo-100 rounded-xl p-6",children:[l.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-2 tracking-wider",children:e.word}),l.jsxs("div",{className:"text-purple-600 text-sm",children:["অর্থ: ",e.meaning]}),l.jsx("div",{className:"text-xs text-purple-500 mt-2",children:"এই শব্দটি উল্টো করে লিখুন"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:r,onChange:x=>s(x.target.value.toUpperCase()),onKeyPress:v,placeholder:"উল্টো বানান লিখুন...",className:`w-full p-4 text-center text-xl font-mono border-2 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${i===!0?"border-green-500 bg-green-50":i===!1?"border-red-500 bg-red-50":"border-gray-300"}`}),i===!1&&l.jsxs(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center text-red-600 text-sm",children:["ভুল! সঠিক উত্তর: ",l.jsx("span",{className:"font-bold",children:f}),l.jsx("br",{}),l.jsx("span",{className:"text-xs",children:"আবার চেষ্টা করুন"})]}),u>=2&&i!==!0&&l.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:l.jsxs("p",{className:"text-yellow-800 text-sm text-center",children:["💡 সাহায্য: প্রতিটি অক্ষর উল্টো ক্রমে সাজান",l.jsx("br",{}),l.jsx("span",{className:"font-mono text-xs",children:e.word.split("").map((x,T)=>l.jsx("span",{className:"mx-1 p-1 bg-yellow-100 rounded",children:x},T))})]})})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,disabled:!r.trim(),className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-xl font-medium hover:from-purple-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"জমা দিন"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors",children:l.jsx(ro,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"text-center text-xs text-gray-500",children:["চেষ্টা: ",u," | সময়সীমা: ৬০ সেকেন্ড"]})]})]})},ml=[{number:5,icon:Lh,title:"৫টি জিনিস দেখুন",instruction:"আপনার চারপাশে ৫টি জিনিস খুঁজে বের করুন এবং মনে মনে নাম বলুন",examples:["দেয়াল","টেবিল","বই","ফোন","হাত"],color:"blue"},{number:4,icon:aB,title:"৪টি জিনিস স্পর্শ করুন",instruction:"আপনার চারপাশের ৪টি জিনিস স্পর্শ করুন এবং অনুভব করুন",examples:["টেবিলের পৃষ্ঠ","কাপড়ের টেক্সচার","ফোনের পৃষ্ঠ","চুল"],color:"green"},{number:3,icon:oB,title:"৩টি শব্দ শুনুন",instruction:"মনোযোগ দিয়ে ৩টি আলাদা শব্দ শোনার চেষ্টা করুন",examples:["পাখির ডাক","গাড়ির শব্দ","ফ্যানের শব্দ","নিজের শ্বাস"],color:"purple"},{number:2,icon:iB,title:"২টি গন্ধ নিন",instruction:"আপনার চারপাশের ২টি গন্ধ শোঁকার চেষ্টা করুন",examples:["বাতাসের গন্ধ","খাবারের গন্ধ","সাবানের গন্ধ","প্রাকৃতিক গন্ধ"],color:"orange"},{number:1,icon:Oh,title:"১টি স্বাদ নিন",instruction:"মুখের ভিতরের স্বাদ অনুভব করুন বা কিছু খান/পান করুন",examples:["পানি","চা","মুখের প্রাকৃতিক স্বাদ","মিন্ট"],color:"red"}],t$=({onComplete:t})=>{const[e,n]=N.useState(0),[r,s]=N.useState(!1),[i,o]=N.useState(0),[a,c]=N.useState([]),[u,h]=N.useState("");N.useEffect(()=>{if(e<ml.length){const x=setInterval(()=>{o(T=>T>=100?100:T+2)},1e3);return()=>clearInterval(x)}},[e]);const f=()=>{e<ml.length-1?(c(x=>[...x,u]),h(""),n(x=>x+1),o(0)):(c(x=>[...x,u]),s(!0),setTimeout(()=>{t()},3e3))},m=()=>{f()},g=ml[e],v=x=>{const T={blue:"from-blue-500 to-cyan-600 bg-blue-100 text-blue-600",green:"from-green-500 to-emerald-600 bg-green-100 text-green-600",purple:"from-purple-500 to-indigo-600 bg-purple-100 text-purple-600",orange:"from-orange-500 to-red-600 bg-orange-100 text-orange-600",red:"from-red-500 to-pink-600 bg-red-100 text-red-600"};return T[x]||T.blue};return r?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"গ্রাউন্ডিং সম্পন্ন!"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"আপনি সফলভাবে ৫-৪-৩-২-১ টেকনিক সম্পন্ন করেছেন। +7 কয়েন অর্জিত!"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:"এই টেকনিক আপনাকে বর্তমান মুহূর্তে ফিরিয়ে এনেছে এবং মানসিক চাপ কমিয়েছে।"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${v(g.color).split(" ")[2]} ${v(g.color).split(" ")[3]}`,children:l.jsx(g.icon,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"গ্রাউন্ডিং টেকনিক"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"৫-৪-৩-২-১ পদ্ধতি"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["ধাপ ",e+1," / ",ml.length]}),l.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(i),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:`bg-gradient-to-r ${v(g.color).split(" ")[0]} ${v(g.color).split(" ")[1]} h-2 rounded-full`,initial:{width:0},animate:{width:`${i}%`},transition:{duration:.5}})})]}),l.jsx(qn,{mode:"wait",children:l.jsxs(L.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[l.jsxs("div",{className:`bg-gradient-to-br ${v(g.color).split(" ")[2]} rounded-xl p-6 text-center`,children:[l.jsx("div",{className:"text-6xl font-bold text-gray-800 mb-2",children:g.number}),l.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-3",children:g.title}),l.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:g.instruction})]}),l.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[l.jsx("p",{className:"text-gray-600 text-sm mb-3 font-medium",children:"উদাহরণ:"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.examples.map((x,T)=>l.jsx("div",{className:"bg-white rounded-lg p-2 text-center text-sm text-gray-700",children:x},T))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"আপনি কী খুঁজে পেলেন? (ঐচ্ছিক)"}),l.jsx("textarea",{value:u,onChange:x=>h(x.target.value),placeholder:`${g.number}টি জিনিসের নাম লিখুন...`,className:"w-full p-3 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:`flex-1 bg-gradient-to-r ${v(g.color).split(" ")[0]} ${v(g.color).split(" ")[1]} text-white py-3 rounded-xl font-medium transition-all`,children:e===ml.length-1?"সম্পন্ন করুন":"পরবর্তী ধাপ"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors text-sm",children:"এড়িয়ে যান"})]}),l.jsx("div",{className:"text-center text-xs text-gray-500",children:"প্রতিটি ধাপের জন্য সময় নিন • মোট সময়: ৩ মিনিট"})]},e)})]})},n$=({onComplete:t})=>{const e=N.useRef(null),[n,r]=N.useState(!1),[s,i]=N.useState("#3B82F6"),[o,a]=N.useState(3),[c,u]=N.useState(60),[h,f]=N.useState(!1),[m,g]=N.useState(!1),v=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"];N.useEffect(()=>{const I=e.current;if(!I)return;const A=I.getContext("2d");A&&(I.width=I.offsetWidth,I.height=I.offsetHeight,A.lineCap="round",A.lineJoin="round",A.fillStyle="#FFFFFF",A.fillRect(0,0,I.width,I.height))},[]),N.useEffect(()=>{if(c>0&&!h){const I=setTimeout(()=>u(c-1),1e3);return()=>clearTimeout(I)}else c===0&&(f(!0),setTimeout(()=>{t()},2e3))},[c,h,t]);const x=I=>{r(!0),g(!0),T(I)},T=I=>{if(!n)return;const A=e.current;if(!A)return;const R=A.getContext("2d");if(!R)return;const S=A.getBoundingClientRect(),E=I.clientX-S.left,k=I.clientY-S.top;R.lineWidth=o,R.strokeStyle=s,R.lineTo(E,k),R.stroke(),R.beginPath(),R.moveTo(E,k)},b=()=>{if(!n)return;r(!1);const I=e.current;if(!I)return;const A=I.getContext("2d");A&&A.beginPath()},y=()=>{const I=e.current;if(!I)return;const A=I.getContext("2d");A&&(A.fillStyle="#FFFFFF",A.fillRect(0,0,I.width,I.height),g(!1))},_=()=>{const I=e.current;if(!I)return;const A=document.createElement("a");A.download="my-doodle.png",A.href=I.toDataURL(),A.click()};return h?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"সৃজনশীল কাজ সম্পন্ন!"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"দারুণ! আপনি আপনার সৃজনশীলতা প্রকাশ করেছেন। +4 কয়েন অর্জিত!"}),m&&l.jsxs(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors flex items-center space-x-2 mx-auto",children:[l.jsx(sT,{className:"w-4 h-4"}),l.jsx("span",{children:"ডাউনলোড করুন"})]})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center",children:l.jsx(Fx,{className:"w-5 h-5 text-pink-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"সৃজনশীল আঁকা"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"যা ইচ্ছা আঁকুন"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[c,"s"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"বাকি সময়"})]})]}),l.jsx("div",{className:"mb-4",children:l.jsx("canvas",{ref:e,width:300,height:200,className:"w-full h-48 border-2 border-gray-200 rounded-xl cursor-crosshair bg-white",onMouseDown:x,onMouseMove:T,onMouseUp:b,onMouseLeave:b})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"রঙ নির্বাচন করুন:"}),l.jsx("div",{className:"flex space-x-2",children:v.map(I=>l.jsx(L.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(I),className:`w-8 h-8 rounded-full border-2 transition-all ${s===I?"border-gray-800 scale-110":"border-gray-300"}`,style:{backgroundColor:I}},I))})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"ব্রাশের আকার:"}),l.jsx("input",{type:"range",min:"1",max:"10",value:o,onChange:I=>a(Number(I.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"ছোট"}),l.jsx("span",{children:"বড়"})]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:y,className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-xl hover:bg-gray-300 transition-colors flex items-center justify-center space-x-2",children:[l.jsx(ro,{className:"w-4 h-4"}),l.jsx("span",{children:"মুছে ফেলুন"})]}),m&&l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[l.jsx(sT,{className:"w-4 h-4"}),l.jsx("span",{children:"সেভ"})]})]}),l.jsx("div",{className:"mt-4 bg-pink-50 rounded-lg p-3",children:l.jsx("p",{className:"text-pink-800 text-xs text-center",children:"💡 যা মনে আসে তাই আঁকুন - কোনো নিয়ম নেই! শুধু উপভোগ করুন।"})})]})},hT=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"],r$=({onComplete:t})=>{const[e,n]=N.useState([]),[r,s]=N.useState(0),[i,o]=N.useState(30),[a,c]=N.useState(!1),[u,h]=N.useState(!1),f=N.useCallback(()=>({id:Date.now()+Math.random(),x:Math.random()*80+10,y:100,size:Math.random()*30+20,color:hT[Math.floor(Math.random()*hT.length)],speed:Math.random()*2+1}),[]);N.useEffect(()=>{if(u&&i>0&&!a){const v=setTimeout(()=>o(i-1),1e3);return()=>clearTimeout(v)}else i===0&&(c(!0),setTimeout(()=>{t()},2e3))},[i,a,u,t]),N.useEffect(()=>{if(!u||a)return;const v=setInterval(()=>{n(x=>[...x,f()])},800);return()=>clearInterval(v)},[u,a,f]),N.useEffect(()=>{if(!u||a)return;const v=setInterval(()=>{n(x=>x.map(T=>({...T,y:T.y-T.speed})).filter(T=>T.y>-10))},50);return()=>clearInterval(v)},[u,a]);const m=v=>{n(x=>x.filter(T=>T.id!==v)),s(x=>x+1)},g=()=>{h(!0),s(0),o(30),n([])};return a?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"গেম শেষ!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-2",children:["আপনি ",r,"টি বুদবুদ ফাটিয়েছেন! +3 কয়েন অর্জিত"]}),l.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:l.jsx("p",{className:"text-blue-800 text-xs",children:r>=20?"🎉 চমৎকার স্কোর!":r>=10?"👍 ভালো খেলেছেন!":"💪 আরও ভালো করতে পারবেন!"})})]})]})}):u?l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Oh,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"বুদবুদ ফাটানো"}),l.jsxs("p",{className:"text-gray-600 text-sm",children:["স্কোর: ",r]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[i,"s"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"বাকি সময়"})]})]}),l.jsxs("div",{className:"relative bg-gradient-to-b from-sky-100 to-blue-200 rounded-xl h-64 overflow-hidden",children:[l.jsx(qn,{children:e.map(v=>l.jsx(L.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},style:{position:"absolute",left:`${v.x}%`,bottom:`${v.y}%`,width:`${v.size}px`,height:`${v.size}px`,backgroundColor:v.color,borderRadius:"50%",cursor:"pointer",boxShadow:"inset -5px -5px 10px rgba(255,255,255,0.5), inset 5px 5px 10px rgba(0,0,0,0.1)",border:"2px solid rgba(255,255,255,0.3)"},onClick:()=>m(v.id),whileHover:{scale:1.1},whileTap:{scale:.8},transition:{type:"spring",stiffness:400,damping:17}},v.id))}),e.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-blue-700",children:[l.jsx("div",{className:"text-2xl mb-2",children:"🫧"}),l.jsx("p",{className:"text-sm",children:"বুদবুদ আসছে..."})]})})]}),l.jsx("div",{className:"mt-4",children:l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:"bg-gradient-to-r from-blue-500 to-cyan-600 h-2 rounded-full",initial:{width:"100%"},animate:{width:`${i/30*100}%`},transition:{duration:.5}})})}),l.jsx("div",{className:"mt-4 text-center",children:l.jsxs("div",{className:"inline-flex items-center space-x-2 bg-blue-50 rounded-lg px-4 py-2",children:[l.jsx("span",{className:"text-blue-600 font-bold text-lg",children:r}),l.jsx("span",{className:"text-blue-600 text-sm",children:"বুদবুদ ফাটানো হয়েছে"})]})})]}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Oh,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"বুদবুদ ফাটানো"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"৩০ সেকেন্ডে যত বেশি পারেন"})]})]}),l.jsxs("div",{className:"text-center space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[l.jsx("div",{className:"text-4xl mb-4",children:"🫧"}),l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"কীভাবে খেলবেন"}),l.jsx("p",{className:"text-gray-700 text-sm leading-relaxed",children:"উপর থেকে নিচে আসা বুদবুদগুলোতে ক্লিক করুন। যত বেশি বুদবুদ ফাটাবেন, তত বেশি পয়েন্ট পাবেন!"})]}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:"w-full bg-gradient-to-r from-blue-600 to-cyan-600 text-white py-4 rounded-xl font-medium hover:from-blue-700 hover:to-cyan-700 transition-all",children:"গেম শুরু করুন"})]})]})},s$=({onComplete:t})=>{const[e,n]=N.useState(100),[r,s]=N.useState(""),[i,o]=N.useState([100]),[a,c]=N.useState(!1),[u,h]=N.useState(0),[f,m]=N.useState(!1),g=()=>{const T=parseInt(r),b=e-7;if(T===b){const y=[...i,T];o(y),n(T),s(""),h(0),m(!1),T<=9&&(c(!0),setTimeout(()=>{t()},2e3))}else h(y=>y+1),u>=1&&m(!0)},v=()=>{n(100),s(""),o([100]),c(!1),h(0),m(!1)},x=T=>{T.key==="Enter"&&r.trim()&&g()};return a?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"চমৎকার!"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"আপনি সফলভাবে ১০০ থেকে ৭ বিয়োগ করে গণনা সম্পন্ন করেছেন। +4 কয়েন অর্জিত!"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:"এই ব্যায়াম আপনার মনোযোগ এবং গাণিতিক দক্ষতা বৃদ্ধি করেছে।"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:l.jsx(Z8,{className:"w-5 h-5 text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"উল্টো গণনা"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"১০০ থেকে ৭ বিয়োগ করে গণনা করুন"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"আপনার ক্রম:"}),l.jsx("div",{className:"bg-orange-50 rounded-xl p-4",children:l.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.map((T,b)=>l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:b*.1},className:"bg-orange-200 text-orange-800 px-3 py-1 rounded-lg font-bold text-sm",children:T},b)),!a&&l.jsx("div",{className:"bg-gray-200 text-gray-500 px-3 py-1 rounded-lg font-bold text-sm border-2 border-dashed border-gray-400",children:"?"})]})})]}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-gradient-to-br from-orange-100 to-red-100 rounded-xl p-6",children:[l.jsx("p",{className:"text-orange-700 text-sm mb-2",children:"বর্তমান সংখ্যা:"}),l.jsx("div",{className:"text-4xl font-bold text-orange-800 mb-2",children:e}),l.jsx("p",{className:"text-orange-600 text-sm",children:"এখান থেকে ৭ বিয়োগ করুন"})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"পরবর্তী সংখ্যা লিখুন:"}),l.jsx("input",{type:"number",value:r,onChange:T=>s(T.target.value),onKeyPress:x,placeholder:`${e} - 7 = ?`,className:"w-full p-4 text-center text-xl font-bold border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-colors"})]}),f&&l.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:l.jsxs("p",{className:"text-yellow-800 text-sm text-center",children:["💡 সাহায্য: ",e," - 7 = ",l.jsx("span",{className:"font-bold",children:e-7})]})}),u>0&&!f&&l.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center text-red-600 text-sm",children:"ভুল উত্তর! আবার চেষ্টা করুন।"})]}),l.jsxs("div",{className:"flex space-x-3 mt-6",children:[l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,disabled:!r.trim(),className:"flex-1 bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-xl font-medium hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"জমা দিন"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors",children:l.jsx(ro,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"mt-4 text-center text-xs text-gray-500",children:["অগ্রগতি: ",i.length-1," / 14 ধাপ সম্পন্ন"]}),l.jsx("div",{className:"mt-4 bg-orange-50 rounded-lg p-3",children:l.jsx("p",{className:"text-orange-800 text-xs text-center",children:"💡 প্রতিবার ৭ বিয়োগ করুন যতক্ষণ না একক সংখ্যায় পৌঁছান"})})]})},sp=[{name:"লাল",color:"#EF4444",bgColor:"bg-red-500"},{name:"নীল",color:"#3B82F6",bgColor:"bg-blue-500"},{name:"সবুজ",color:"#10B981",bgColor:"bg-green-500"},{name:"হলুদ",color:"#F59E0B",bgColor:"bg-yellow-500"},{name:"বেগুনি",color:"#8B5CF6",bgColor:"bg-purple-500"},{name:"গোলাপি",color:"#EC4899",bgColor:"bg-pink-500"}],i$=({onComplete:t})=>{const[e,n]=N.useState([]),[r,s]=N.useState([]),[i,o]=N.useState(!1),[a,c]=N.useState(1),[u,h]=N.useState("waiting"),[f,m]=N.useState(-1),[g,v]=N.useState(0),x=I=>{const A=[];for(let R=0;R<I;R++)A.push(Math.floor(Math.random()*sp.length));return A},T=()=>{const I=x(a+2);n(I),s([]),h("showing"),b(I)},b=async I=>{o(!0);for(let A=0;A<I.length;A++)await new Promise(R=>setTimeout(R,600)),m(I[A]),await new Promise(R=>setTimeout(R,600)),m(-1);o(!1),h("input")},y=I=>{if(u!=="input")return;const A=[...r,I];if(s(A),e[A.length-1]!==I){h("wrong");return}A.length===e.length&&(h("correct"),v(R=>R+a),a>=5?setTimeout(()=>{h("completed"),setTimeout(()=>{t()},2e3)},1e3):setTimeout(()=>{c(R=>R+1),h("waiting")},1500))},_=()=>{c(1),v(0),n([]),s([]),h("waiting"),m(-1)};return u==="completed"?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"স্মৃতি পরীক্ষা সম্পন্ন!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["চমৎকার! আপনি ৫টি লেভেল সম্পন্ন করেছেন। স্কোর: ",g," পয়েন্ট"]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"+6 কয়েন অর্জিত!"}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:"এই ব্যায়াম আপনার স্মৃতিশক্তি এবং মনোযোগ বৃদ্ধি করেছে।"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:l.jsx(EC,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"স্মৃতি পরীক্ষা"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"রঙের ক্রম মনে রাখুন"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-lg font-bold text-indigo-600",children:["Level ",a]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Score: ",g]})]})]}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4",children:[u==="waiting"&&l.jsxs("div",{children:[l.jsxs("p",{className:"text-indigo-800 font-medium mb-2",children:["Level ",a," শুরু করুন"]}),l.jsxs("p",{className:"text-indigo-600 text-sm",children:[a+2,"টি রঙের ক্রম মনে রাখতে হবে"]})]}),u==="showing"&&l.jsxs("div",{children:[l.jsx("p",{className:"text-indigo-800 font-medium mb-2",children:"মনোযোগ দিয়ে দেখুন"}),l.jsx("p",{className:"text-indigo-600 text-sm",children:"রঙের ক্রম মনে রাখুন"})]}),u==="input"&&l.jsxs("div",{children:[l.jsx("p",{className:"text-indigo-800 font-medium mb-2",children:"এখন ক্লিক করুন"}),l.jsxs("p",{className:"text-indigo-600 text-sm",children:[r.length+1,"/",e.length," - সঠিক ক্রমে রঙে ক্লিক করুন"]})]}),u==="correct"&&l.jsxs("div",{children:[l.jsx("p",{className:"text-green-800 font-medium mb-2",children:"✅ সঠিক!"}),l.jsx("p",{className:"text-green-600 text-sm",children:"পরবর্তী লেভেলে যাচ্ছেন..."})]}),u==="wrong"&&l.jsxs("div",{children:[l.jsx("p",{className:"text-red-800 font-medium mb-2",children:"❌ ভুল!"}),l.jsx("p",{className:"text-red-600 text-sm",children:"আবার চেষ্টা করুন"})]})]})}),l.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:sp.map((I,A)=>l.jsx(L.button,{whileHover:{scale:u==="input"?1.05:1},whileTap:{scale:u==="input"?.95:1},onClick:()=>y(A),disabled:u!=="input",className:`
              aspect-square rounded-xl font-medium text-white text-sm transition-all duration-300
              ${I.bgColor}
              ${f===A?"ring-4 ring-white ring-opacity-50 scale-110":""}
              ${u==="input"?"hover:shadow-lg cursor-pointer":"cursor-not-allowed"}
              ${u!=="input"?"opacity-70":""}
            `,children:I.name},A))}),u==="input"&&r.length>0&&l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"আপনার ক্রম:"}),l.jsx("div",{className:"flex space-x-2",children:r.map((I,A)=>l.jsx("div",{className:`w-8 h-8 rounded-lg ${sp[I].bgColor}`},A))})]}),l.jsxs("div",{className:"flex space-x-3",children:[u==="waiting"&&l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-xl font-medium hover:from-indigo-700 hover:to-purple-700 transition-all flex items-center justify-center space-x-2",children:[l.jsx(Bf,{className:"w-4 h-4"}),l.jsx("span",{children:"শুরু করুন"})]}),u==="wrong"&&l.jsxs(l.Fragment,{children:[l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 rounded-xl font-medium hover:from-indigo-700 hover:to-purple-700 transition-all",children:"আবার চেষ্টা"}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,className:"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors",children:l.jsx(ro,{className:"w-4 h-4"})})]})]}),l.jsx("div",{className:"mt-4 bg-indigo-50 rounded-lg p-3",children:l.jsx("p",{className:"text-indigo-800 text-xs text-center",children:"💡 রঙের ক্রম মনে রাখুন এবং একই ক্রমে ক্লিক করুন। প্রতি লেভেলে একটি করে রঙ বাড়বে।"})})]})},ip=[{word:"সাফল্য",meaning:"Success"},{word:"শান্তি",meaning:"Peace"},{word:"সাহস",meaning:"Courage"},{word:"স্বপ্ন",meaning:"Dream"},{word:"শক্তি",meaning:"Strength"},{word:"আনন্দ",meaning:"Joy"},{word:"প্রকৃতি",meaning:"Nature"},{word:"বন্ধুত্ব",meaning:"Friendship"}],o$=({onComplete:t})=>{const[e,n]=N.useState(ip[0]),[r,s]=N.useState([]),[i,o]=N.useState(""),[a,c]=N.useState(!1),[u,h]=N.useState(90);N.useEffect(()=>{const v=ip[Math.floor(Math.random()*ip.length)];n(v)},[]),N.useEffect(()=>{if(u>0&&!a){const v=setTimeout(()=>h(u-1),1e3);return()=>clearTimeout(v)}else(u===0||r.length>=5)&&(c(!0),setTimeout(()=>{t()},2e3))},[u,a,r.length,t]);const f=()=>{i.trim()&&r.length<5&&(s(v=>[...v,i.trim()]),o(""))},m=v=>{s(x=>x.filter((T,b)=>b!==v))},g=v=>{v.key==="Enter"&&i.trim()&&f()};return a?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"সৃজনশীল চিন্তা সম্পন্ন!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["আপনি ",r.length,"টি সম্পর্কিত শব্দ খুঁজে পেয়েছেন। +5 কয়েন অর্জিত!"]}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:"এই ব্যায়াম আপনার সৃজনশীল চিন্তাভাবনা এবং শব্দভান্ডার বৃদ্ধি করেছে।"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:l.jsx(Vh,{className:"w-5 h-5 text-teal-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"শব্দ সংযোগ"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"সম্পর্কিত শব্দ খুঁজুন"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-teal-600",children:[u,"s"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"বাকি সময়"})]})]}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-gradient-to-br from-teal-100 to-cyan-100 rounded-xl p-6",children:[l.jsx("div",{className:"text-3xl font-bold text-teal-700 mb-2",children:e.word}),l.jsxs("div",{className:"text-teal-600 text-sm mb-3",children:["(",e.meaning,")"]}),l.jsx("p",{className:"text-teal-700 text-sm",children:"এই শব্দের সাথে সম্পর্কিত ৫টি শব্দ লিখুন"})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["আপনার শব্দগুলো (",r.length,"/5):"]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[5-r.length," টি বাকি"]})]}),l.jsx("div",{className:"min-h-[80px] bg-gray-50 rounded-xl p-4",children:r.length===0?l.jsxs("div",{className:"text-center text-gray-400 py-4",children:[l.jsx(Vh,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"এখানে আপনার শব্দগুলো দেখাবে"})]}):l.jsx("div",{className:"flex flex-wrap gap-2",children:r.map((v,x)=>l.jsxs(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"bg-teal-100 text-teal-800 px-3 py-2 rounded-lg flex items-center space-x-2 group",children:[l.jsx("span",{className:"font-medium",children:v}),l.jsx("button",{onClick:()=>m(x),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Os,{className:"w-3 h-3 text-teal-600 hover:text-teal-800"})})]},x))})})]}),r.length<5&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),onKeyPress:g,placeholder:"একটি সম্পর্কিত শব্দ লিখুন...",className:"flex-1 p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-transparent"}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:f,disabled:!i.trim(),className:"bg-teal-600 text-white p-3 rounded-xl hover:bg-teal-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(Bx,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"bg-teal-50 rounded-lg p-3",children:[l.jsx("p",{className:"text-teal-800 text-xs mb-2 font-medium",children:"💡 উদাহরণ ধারণা:"}),l.jsxs("p",{className:"text-teal-700 text-xs",children:[e.word==="সাফল্য"&&"লক্ষ্য, পরিশ্রম, অর্জন, গর্ব, খুশি",e.word==="শান্তি"&&"নিরবতা, প্রকৃতি, মেডিটেশন, স্বস্তি, সুখ",e.word==="সাহস"&&"বীরত্ব, দৃঢ়তা, সংগ্রাম, শক্তি, আত্মবিশ্বাস",e.word==="স্বপ্ন"&&"আশা, ভবিষ্যৎ, কল্পনা, লক্ষ্য, ইচ্ছা",e.word==="শক্তি"&&"ক্ষমতা, সামর্থ্য, দৃঢ়তা, উৎসাহ, প্রেরণা",e.word==="আনন্দ"&&"খুশি, হাসি, উৎসব, সুখ, উল্লাস",e.word==="প্রকৃতি"&&"গাছ, ফুল, পাখি, নদী, পাহাড়",e.word==="বন্ধুত্ব"&&"ভালোবাসা, বিশ্বাস, সাহায্য, সঙ্গ, আনুগত্য"]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:"bg-gradient-to-r from-teal-500 to-cyan-600 h-2 rounded-full",initial:{width:0},animate:{width:`${r.length/5*100}%`},transition:{duration:.5}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"শুরু"}),l.jsx("span",{children:"সম্পন্ন"})]})]}),l.jsx("div",{className:"mt-4 bg-teal-50 rounded-lg p-3",children:l.jsx("p",{className:"text-teal-800 text-xs text-center",children:"💭 মূল শব্দের সাথে যেকোনো ভাবে সম্পর্কিত শব্দ লিখুন - কোনো ভুল উত্তর নেই!"})})]})},yo=[{name:"লাল",color:"#EF4444",textColor:"#DC2626"},{name:"নীল",color:"#3B82F6",textColor:"#2563EB"},{name:"সবুজ",color:"#10B981",textColor:"#059669"},{name:"হলুদ",color:"#F59E0B",textColor:"#D97706"},{name:"বেগুনি",color:"#8B5CF6",textColor:"#7C3AED"},{name:"গোলাপি",color:"#EC4899",textColor:"#DB2777"},{name:"কমলা",color:"#F97316",textColor:"#EA580C"},{name:"আকাশি",color:"#06B6D4",textColor:"#0891B2"}],a$=({onComplete:t})=>{const[e,n]=N.useState(""),[r,s]=N.useState(""),[i,o]=N.useState([]),[a,c]=N.useState(0),[u,h]=N.useState(45),[f,m]=N.useState(!1),[g,v]=N.useState(null),[x,T]=N.useState(1),b=()=>{const _=yo[Math.floor(Math.random()*yo.length)],I=yo[Math.floor(Math.random()*yo.length)];n(_.name),s(I.textColor);const A=I.name,R=yo.filter(E=>E.name!==A).sort(()=>.5-Math.random()).slice(0,3).map(E=>E.name),S=[A,...R].sort(()=>.5-Math.random());o(S),v(null)};N.useEffect(()=>{b()},[]),N.useEffect(()=>{if(u>0&&!f){const _=setTimeout(()=>h(u-1),1e3);return()=>clearTimeout(_)}else u===0&&(m(!0),setTimeout(()=>{t()},2e3))},[u,f,t]);const y=_=>{const I=yo.find(R=>R.textColor===r),A=_===(I==null?void 0:I.name);v(A?"correct":"wrong"),A&&c(R=>R+1),setTimeout(()=>{x>=15||u<=0?(m(!0),setTimeout(()=>{t()},2e3)):(T(R=>R+1),b())},1e3)};return f?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"গেম শেষ!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["আপনার স্কোর: ",a,"/",x-1," সঠিক উত্তর"]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"+4 কয়েন অর্জিত!"}),l.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:l.jsx("p",{className:"text-blue-800 text-xs",children:a>=10?"🎉 চমৎকার মনোযোগ!":a>=5?"👍 ভালো করেছেন!":"💪 আরও অনুশীলন করুন!"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-rainbow-100 rounded-full flex items-center justify-center",children:l.jsx(Fx,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"রঙ মিলানো"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"সঠিক রঙের নাম ক্লিক করুন"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[u,"s"]}),l.jsxs("div",{className:"text-xs text-gray-500",children:["Score: ",a]})]})]}),l.jsx("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:l.jsx("p",{className:"text-yellow-800 text-sm text-center font-medium",children:"⚠️ সাবধান! শব্দের অর্থ নয়, শব্দের রঙ দেখে উত্তর দিন!"})}),l.jsx("div",{className:"mb-8 text-center",children:l.jsxs("div",{className:"bg-gray-100 rounded-xl p-8",children:[l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"এই শব্দটি কোন রঙে লেখা?"}),l.jsx("div",{className:"text-6xl font-bold mb-4",style:{color:r},children:e}),l.jsx("p",{className:"text-gray-500 text-xs",children:"শব্দের অর্থ নয়, শব্দের রঙ দেখুন!"})]})}),g&&l.jsx(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:`mb-4 p-3 rounded-xl text-center ${g==="correct"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g==="correct"?"✅ সঠিক!":"❌ ভুল!"}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:i.map((_,I)=>l.jsx(L.button,{whileHover:{scale:g?1:1.02},whileTap:{scale:g?1:.98},onClick:()=>!g&&y(_),disabled:g!==null,className:`p-4 rounded-xl font-medium transition-all ${g===null?"bg-gray-100 hover:bg-gray-200 text-gray-800":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,children:_},I))}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsxs("span",{children:["Round ",x]}),l.jsxs("span",{children:["Score: ",a]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:"bg-gradient-to-r from-purple-500 to-pink-600 h-2 rounded-full",initial:{width:0},animate:{width:`${x/15*100}%`},transition:{duration:.5}})})]}),l.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:l.jsx("p",{className:"text-purple-800 text-xs text-center",children:"💡 এটি একটি স্ট্রুপ টেস্ট - আপনার মস্তিষ্কের মনোযোগ পরীক্ষা করে!"})})]})},l$=({onComplete:t})=>{const[e,n]=N.useState("waiting"),[r,s]=N.useState([]),[i,o]=N.useState(1),[a,c]=N.useState(0),[u,h]=N.useState(null),[f,m]=N.useState(!1),g=5,v=()=>{n("ready"),m(!1);const _=Math.random()*4e3+2e3,I=setTimeout(()=>{n("go"),c(Date.now())},_);h(I)},x=()=>{if(e==="ready"){m(!0),n("waiting"),u&&clearTimeout(u);return}if(e==="go"){const _=Date.now()-a;s(I=>[...I,_]),n("clicked"),setTimeout(()=>{i>=g?(n("completed"),setTimeout(()=>{t()},3e3)):(o(I=>I+1),n("waiting"))},1500)}},T=()=>{n("waiting"),s([]),o(1),m(!1),u&&clearTimeout(u)},b=r.length>0?Math.round(r.reduce((_,I)=>_+I,0)/r.length):0,y=_=>_<200?{text:"⚡ অসাধারণ দ্রুত!",color:"text-green-600"}:_<300?{text:"🚀 খুব ভালো!",color:"text-blue-600"}:_<400?{text:"👍 ভালো!",color:"text-yellow-600"}:{text:"💪 আরও অনুশীলন করুন!",color:"text-orange-600"};if(e==="completed"){const _=y(b);return l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"প্রতিক্রিয়া পরীক্ষা সম্পন্ন!"}),l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[b,"ms"]}),l.jsx("p",{className:"text-gray-600 text-sm",children:"গড় প্রতিক্রিয়ার সময়"}),l.jsx("p",{className:`text-sm font-medium ${_.color}`,children:_.text})]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"+5 কয়েন অর্জিত!"}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[l.jsx("p",{className:"text-gray-700 text-xs mb-2 font-medium",children:"প্রতিটি রাউন্ডের সময়:"}),l.jsx("div",{className:"flex justify-center space-x-2",children:r.map((I,A)=>l.jsxs("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded",children:[I,"ms"]},A))})]})]})]})})}return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center",children:l.jsx(Oh,{className:"w-5 h-5 text-yellow-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"প্রতিক্রিয়া পরীক্ষা"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"সবুজ হলেই ক্লিক করুন"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-lg font-bold text-yellow-600",children:[i,"/",g]}),l.jsx("div",{className:"text-xs text-gray-500",children:"রাউন্ড"})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx(L.div,{className:`w-full h-48 rounded-xl flex items-center justify-center cursor-pointer transition-all duration-300 ${e==="waiting"?"bg-gray-200":e==="ready"?"bg-red-500":e==="go"?"bg-green-500":e==="clicked"?"bg-blue-500":"bg-gray-200"}`,onClick:x,whileHover:{scale:1.02},whileTap:{scale:.98},children:l.jsxs("div",{className:"text-center text-white",children:[e==="waiting"&&l.jsxs("div",{children:[l.jsx("div",{className:"text-4xl mb-4",children:"⏳"}),l.jsx("p",{className:"text-lg font-bold text-gray-600",children:"শুরু করতে ক্লিক করুন"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["রাউন্ড ",i]})]}),e==="ready"&&l.jsxs("div",{children:[l.jsx("div",{className:"text-4xl mb-4",children:"🔴"}),l.jsx("p",{className:"text-lg font-bold",children:"অপেক্ষা করুন..."}),l.jsx("p",{className:"text-sm",children:"সবুজ হওয়ার জন্য অপেক্ষা করুন"})]}),e==="go"&&l.jsxs("div",{children:[l.jsx("div",{className:"text-4xl mb-4",children:"🟢"}),l.jsx("p",{className:"text-lg font-bold",children:"এখনই ক্লিক করুন!"})]}),e==="clicked"&&l.jsxs("div",{children:[l.jsx("div",{className:"text-4xl mb-4",children:"⚡"}),l.jsxs("p",{className:"text-lg font-bold",children:[r[r.length-1],"ms"]}),l.jsx("p",{className:"text-sm",children:"প্রতিক্রিয়ার সময়"})]})]})}),f&&l.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 bg-red-100 border border-red-200 rounded-xl p-3",children:l.jsx("p",{className:"text-red-800 text-sm text-center font-medium",children:"⚠️ খুব তাড়াতাড়ি! সবুজ হওয়ার জন্য অপেক্ষা করুন"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"অগ্রগতি"}),l.jsxs("span",{children:[r.length,"/",g," সম্পন্ন"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx(L.div,{className:"bg-gradient-to-r from-yellow-500 to-orange-600 h-2 rounded-full",initial:{width:0},animate:{width:`${r.length/g*100}%`},transition:{duration:.5}})})]}),r.length>0&&l.jsx("div",{className:"bg-yellow-50 rounded-lg p-3",children:l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[Math.min(...r),"ms"]}),l.jsx("div",{className:"text-xs text-yellow-600",children:"সবচেয়ে দ্রুত"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[b,"ms"]}),l.jsx("div",{className:"text-xs text-yellow-600",children:"গড়"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[Math.max(...r),"ms"]}),l.jsx("div",{className:"text-xs text-yellow-600",children:"সবচেয়ে ধীর"})]})]})}),e==="waiting"&&r.length>0&&l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,className:"w-full bg-gray-200 text-gray-700 py-2 rounded-xl hover:bg-gray-300 transition-colors flex items-center justify-center space-x-2",children:[l.jsx(ro,{className:"w-4 h-4"}),l.jsx("span",{children:"নতুন করে শুরু"})]}),e==="waiting"&&r.length<g&&l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 text-white py-3 rounded-xl font-medium hover:from-yellow-700 hover:to-orange-700 transition-all",children:r.length===0?"পরীক্ষা শুরু করুন":"পরবর্তী রাউন্ড"})]}),l.jsx("div",{className:"mt-4 bg-yellow-50 rounded-lg p-3",children:l.jsx("p",{className:"text-yellow-800 text-xs text-center",children:"💡 লাল দেখলে অপেক্ষা করুন, সবুজ দেখলেই যত দ্রুত সম্ভব ক্লিক করুন!"})})]})},c$=({onComplete:t})=>{const[e,n]=N.useState(0),[r,s]=N.useState(!1),[i,o]=N.useState(45),[a,c]=N.useState(!1),[u,h]=N.useState("down"),f=15;N.useEffect(()=>{if(r&&i>0&&!a){const v=setTimeout(()=>o(i-1),1e3);return()=>clearTimeout(v)}else(i===0||e>=f)&&(c(!0),s(!1),setTimeout(()=>{t()},2e3))},[i,r,a,e,f,t]),N.useEffect(()=>{if(r&&!a){const v=setInterval(()=>{h(x=>x==="up"?"down":"up")},1e3);return()=>clearInterval(v)}},[r,a]);const m=()=>{e<f&&n(v=>v+1)},g=()=>{s(!r)};return a?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"জাম্পিং জ্যাকস সম্পন্ন!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["আপনি ",e,"/",f," জাম্পিং জ্যাকস সম্পন্ন করেছেন। +4 কয়েন অর্জিত!"]}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:e>=f?"🎉 লক্ষ্য অর্জিত!":"💪 ভালো চেষ্টা!"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx(bC,{className:"w-5 h-5 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"জাম্পিং জ্যাকস"}),l.jsxs("p",{className:"text-gray-600 text-sm",children:[f,"টি জাম্পিং জ্যাকস করুন"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[i,"s"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"বাকি সময়"})]})]}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl p-8",children:[l.jsx(L.div,{className:"text-8xl mb-4",animate:{y:u==="up"?-10:0,scale:u==="up"?1.1:1},transition:{duration:.5,ease:"easeInOut"},children:"🤸‍♂️"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"জাম্পিং জ্যাকস"}),l.jsx("p",{className:"text-green-700 text-sm leading-relaxed",children:"পা একসাথে রেখে দাঁড়ান। লাফ দিয়ে পা ছড়িয়ে দিন এবং হাত মাথার উপর তুলুন। আবার লাফ দিয়ে প্রথম অবস্থানে ফিরে আসুন।"})]})]})}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-white border-2 border-green-200 rounded-xl p-6",children:[l.jsxs("div",{className:"text-4xl font-bold text-green-600 mb-2",children:[e," / ",f]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"সম্পন্ন জাম্পিং জ্যাকস"}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:m,disabled:e>=f,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"একটি সম্পন্ন (+1)"})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"অগ্রগতি"}),l.jsxs("span",{children:[Math.round(e/f*100),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx(L.div,{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full",initial:{width:0},animate:{width:`${e/f*100}%`},transition:{duration:.5}})})]}),l.jsx("div",{className:"mb-4",children:l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:`w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center space-x-2 ${r?"bg-red-500 text-white hover:bg-red-600":"bg-green-600 text-white hover:bg-green-700"}`,children:[r?l.jsx(Ux,{className:"w-4 h-4"}):l.jsx(Bf,{className:"w-4 h-4"}),l.jsx("span",{children:r?"বিরতি":"শুরু করুন"})]})}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[l.jsx("h5",{className:"font-medium text-green-800 mb-2",children:"কীভাবে করবেন:"}),l.jsxs("ol",{className:"text-green-700 text-sm space-y-1",children:[l.jsx("li",{children:"1. পা একসাথে রেখে সোজা দাঁড়ান"}),l.jsx("li",{children:"2. লাফ দিয়ে পা ছড়িয়ে দিন এবং হাত মাথার উপর তুলুন"}),l.jsx("li",{children:"3. আবার লাফ দিয়ে প্রথম অবস্থানে ফিরে আসুন"}),l.jsx("li",{children:'4. প্রতিটি সম্পূর্ণ চক্রের জন্য "+1" বাটনে ক্লিক করুন'})]})]})]})},u$=({onComplete:t})=>{const[e,n]=N.useState(0),[r,s]=N.useState(!1),[i,o]=N.useState(60),[a,c]=N.useState(!1),[u,h]=N.useState("pull"),f=10;N.useEffect(()=>{if(r&&i>0&&!a){const v=setTimeout(()=>o(i-1),1e3);return()=>clearTimeout(v)}else(i===0||e>=f)&&(c(!0),s(!1),setTimeout(()=>{t()},2e3))},[i,r,a,e,f,t]),N.useEffect(()=>{if(r&&!a){const v=setInterval(()=>{h(x=>x==="push"?"pull":"push")},1500);return()=>clearInterval(v)}},[r,a]);const m=()=>{e<f&&n(v=>v+1)},g=()=>{s(!r)};return a?l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:l.jsxs(L.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-4",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l.jsx(Vt,{className:"w-8 h-8 text-green-600"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"দেয়াল পুশআপ সম্পন্ন!"}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4",children:["আপনি ",e,"/",f," দেয়াল পুশআপ সম্পন্ন করেছেন। +5 কয়েন অর্জিত!"]}),l.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:l.jsx("p",{className:"text-green-800 text-xs",children:e>=f?"🎉 লক্ষ্য অর্জিত!":"💪 ভালো চেষ্টা!"})})]})]})}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(bC,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"দেয়াল পুশআপ"}),l.jsxs("p",{className:"text-gray-600 text-sm",children:[f,"টি দেয়াল পুশআপ করুন"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[i,"s"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"বাকি সময়"})]})]}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-8 relative",children:[l.jsx("div",{className:"absolute right-4 top-4 bottom-4 w-2 bg-gray-400 rounded"}),l.jsx(L.div,{className:"text-6xl mb-4",animate:{x:u==="push"?10:0,scale:u==="push"?.95:1},transition:{duration:.7,ease:"easeInOut"},children:"🧍‍♂️"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"দেয়াল পুশআপ"}),l.jsx("p",{className:"text-blue-700 text-sm leading-relaxed",children:"দেয়াল থেকে এক হাত দূরত্বে দাঁড়ান। হাত দেয়ালে রেখে শরীর দেয়ালের দিকে ঝুঁকান, তারপর আবার পিছনে ঠেলে দিন।"})]})]})}),l.jsx("div",{className:"mb-6 text-center",children:l.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6",children:[l.jsxs("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:[e," / ",f]}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"সম্পন্ন পুশআপ"}),l.jsx(L.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:m,disabled:e>=f,className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"একটি সম্পন্ন (+1)"})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{children:"অগ্রগতি"}),l.jsxs("span",{children:[Math.round(e/f*100),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx(L.div,{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full",initial:{width:0},animate:{width:`${e/f*100}%`},transition:{duration:.5}})})]}),l.jsx("div",{className:"mb-4",children:l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:g,className:`w-full py-3 rounded-xl font-medium transition-all flex items-center justify-center space-x-2 ${r?"bg-red-500 text-white hover:bg-red-600":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[r?l.jsx(Ux,{className:"w-4 h-4"}):l.jsx(Bf,{className:"w-4 h-4"}),l.jsx("span",{children:r?"বিরতি":"শুরু করুন"})]})}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"কীভাবে করবেন:"}),l.jsxs("ol",{className:"text-blue-700 text-sm space-y-1",children:[l.jsx("li",{children:"1. দেয়াল থেকে এক হাত দূরত্বে দাঁড়ান"}),l.jsx("li",{children:"2. হাতের তালু দেয়ালে কাঁধের সমান উচ্চতায় রাখুন"}),l.jsx("li",{children:"3. শরীর দেয়ালের দিকে ঝুঁকান"}),l.jsx("li",{children:"4. হাত দিয়ে ঠেলে আবার প্রথম অবস্থানে ফিরে আসুন"}),l.jsx("li",{children:'5. প্রতিটি সম্পূর্ণ পুশআপের জন্য "+1" বাটনে ক্লিক করুন'})]})]})]})},d$=({onComplete:t})=>{const[e,n]=N.useState(120),[r,s]=N.useState("inhale"),[i,o]=N.useState(!1);return N.useEffect(()=>{if(e>0&&!i){const a=setTimeout(()=>n(e-1),1e3);return()=>clearTimeout(a)}else e===0&&(o(!0),setTimeout(()=>t(),1e3))},[e,i,t]),i?l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Ms,{className:"w-8 h-8 text-green-600"})}),l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"শ্বাস-প্রশ্বাস সম্পন্ন!"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"+5 কয়েন অর্জিত"})]}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"শ্বাস-প্রশ্বাসের ব্যায়াম"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:"🫁"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-2",children:[e,"s"]}),l.jsx("p",{className:"text-gray-600",children:r==="inhale"?"শ্বাস নিন":r==="hold"?"ধরে রাখুন":"শ্বাস ছাড়ুন"})]})]})},h$=({onComplete:t})=>{const[e,n]=N.useState(!1),r=()=>{n(!0),setTimeout(()=>t(),1e3)};return e?l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(jr,{className:"w-8 h-8 text-green-600"})}),l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"শারীরিক কার্যকলাপ সম্পন্ন!"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"+5 কয়েন অর্জিত"})]}):l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"শারীরিক কার্যকলাপ"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🏃‍♂️"}),l.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-2",children:"১০ বার স্কোয়াট করুন"}),l.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"পা কাঁধের সমান প্রশস্ত করে দাঁড়ান। ধীরে ধীরে বসুন এবং উঠুন।"}),l.jsx("button",{onClick:r,className:"bg-green-600 text-white px-6 py-3 rounded-xl font-medium hover:bg-green-700 transition-colors",children:"সম্পন্ন করেছি"})]})]})},f$={BreathingExercise:d$,PhysicalActivity:h$,ReverseSpelling:e$,GroundingTechnique:t$,DoodlePad:n$,BubblePopGame:r$,CountingBackwards:s$,MemorySequence:i$,WordAssociation:o$,ColorMatchGame:a$,ReactionTest:l$,JumpingJacks:c$,WallPushups:u$},m$=()=>{on();const{userData:t,updateUserData:e}=vn(),n=Ki(),[r,s]=N.useState([]),[i,o]=N.useState(new Set),[a,c]=N.useState(0),[u,h]=N.useState(!1),[f,m]=N.useState(!1);N.useEffect(()=>{const b=dT(4);s(b)},[]);const g=async b=>{if(!(i.has(b.id)||f)){m(!0);try{if(o(y=>new Set([...y,b.id])),c(y=>y+b.coins),t){const y=t.coins+b.coins;await e({coins:y}),Q.success(`${b.title} সম্পন্ন! +${b.coins} কয়েন`,{duration:3e3,id:`activity-${b.id}`})}i.size+1>=r.length&&setTimeout(()=>{h(!0)},1e3)}catch(y){console.error("Error awarding coins:",y),Q.error("কয়েন যোগ করতে সমস্যা হয়েছে"),o(_=>{const I=new Set(_);return I.delete(b.id),I}),c(_=>_-b.coins)}finally{m(!1)}}},v=()=>{const b=dT(4);s(b),o(new Set),c(0),h(!1)},x=b=>{switch(b){case"mental":return"🧠";case"physical":return"💪";case"creative":return"🎨";case"game":return"🎮";default:return"⭐"}},T=b=>{switch(b){case"mental":return"from-purple-500 to-indigo-600";case"physical":return"from-green-500 to-emerald-600";case"creative":return"from-pink-500 to-rose-600";case"game":return"from-blue-500 to-cyan-600";default:return"from-gray-500 to-gray-600"}};return u?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 pb-20",children:[l.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 px-4 py-8",children:l.jsx("div",{className:"max-w-md mx-auto text-center text-white",children:l.jsxs(L.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mb-4",children:[l.jsx("div",{className:"w-20 h-20 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(jr,{className:"w-10 h-10"})}),l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"সব কার্যক্রম সম্পন্ন!"}),l.jsx("p",{className:"text-green-100 text-sm",children:"আপনি সফলভাবে সব চ্যালেঞ্জ সম্পন্ন করেছেন"})]})})}),l.jsx("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"অভিনন্দন!"}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-4",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 mb-2",children:["+",a]}),l.jsx("p",{className:"text-green-800 text-sm",children:"মোট কয়েন অর্জিত"})]}),l.jsxs("p",{className:"text-gray-600 text-sm mb-6",children:["আপনি ",r.length,"টি কার্যক্রম সম্পন্ন করে আপনার মানসিক শক্তি বৃদ্ধি করেছেন।"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 rounded-xl font-medium hover:from-blue-700 hover:to-indigo-700 transition-all flex items-center justify-center space-x-2",children:[l.jsx(oT,{className:"w-5 h-5"}),l.jsx("span",{children:"নতুন কার্যক্রম"})]}),l.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/dashboard"),className:"w-full bg-gray-200 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-300 transition-colors",children:"ড্যাশবোর্ডে ফিরে যান"})]})]})}),l.jsx(va,{})]}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 pb-20",children:[l.jsx("div",{className:"bg-gradient-to-br from-red-500 to-pink-600 px-4 py-8",children:l.jsx("div",{className:"max-w-md mx-auto",children:l.jsxs(L.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center mb-4",children:[l.jsx("button",{onClick:()=>n("/dashboard"),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-colors mr-4",children:l.jsx(TC,{className:"w-5 h-5 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"জরুরি সাহায্য"}),l.jsx("p",{className:"text-red-100 text-sm",children:"Urge Helper - Red Alert"})]}),l.jsx("button",{onClick:v,className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-colors",title:"নতুন কার্যক্রম",children:l.jsx(oT,{className:"w-5 h-5 text-white"})})]})})}),l.jsxs("div",{className:"max-w-md mx-auto px-4 py-6 space-y-6",children:[l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl p-6 text-center text-white shadow-xl",children:[l.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,delay:.2},className:"mb-4",children:l.jsx(Ms,{className:"w-12 h-12 mx-auto text-white"})}),l.jsx("h2",{className:"text-lg font-bold mb-2",children:"প্রতিটি 'না' বলা আপনাকে আরও শক্তিশালী করে!"}),l.jsx("p",{className:"text-blue-100 text-sm mb-3",children:'Every "No" makes you stronger!'}),l.jsx("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:l.jsxs("p",{className:"text-sm",children:["আজকের কার্যক্রম: ",i.size,"/",r.length," সম্পন্ন"]})})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"font-bold text-gray-800",children:"আজকের অগ্রগতি"}),l.jsxs("div",{className:"flex items-center space-x-1 text-yellow-600",children:[l.jsx(jr,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-bold",children:["+",a]})]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:l.jsx(L.div,{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full",initial:{width:0},animate:{width:`${i.size/r.length*100}%`},transition:{duration:.5}})}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"শুরু"}),l.jsxs("span",{children:[Math.round(i.size/r.length*100),"%"]}),l.jsx("span",{children:"সম্পন্ন"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"আজকের কার্যক্রম"}),l.jsxs("div",{className:"flex items-center space-x-1 text-gray-500 text-sm",children:[l.jsx(NC,{className:"w-4 h-4"}),l.jsx("span",{children:"প্রতিদিন নতুন"})]})]}),r.map((b,y)=>{const _=i.has(b.id),I=f$[b.componentName];return I?l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+y*.1},className:`relative ${_?"opacity-75":""}`,children:[l.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:l.jsxs("div",{className:`bg-gradient-to-r ${T(b.type)} text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1`,children:[l.jsx("span",{children:x(b.type)}),l.jsx("span",{className:"capitalize",children:b.type})]})}),_&&l.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:l.jsxs("div",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full flex items-center space-x-1",children:[l.jsx(jr,{className:"w-3 h-3"}),l.jsxs("span",{children:["+",b.coins]})]})}),l.jsx("div",{className:`border-2 rounded-2xl overflow-hidden transition-all ${_?"border-green-300 bg-green-50":"border-transparent"}`,children:l.jsx(I,{onComplete:()=>g(b)})})]},b.id):(console.warn(`Component ${b.componentName} not found`),null)})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[l.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("/community"),className:"w-full bg-gradient-to-r from-orange-500 to-red-600 text-white py-6 rounded-2xl font-bold text-lg hover:from-orange-600 hover:to-red-700 transition-all flex items-center justify-center space-x-3 shadow-lg",children:[l.jsx(Xo,{className:"w-6 h-6"}),l.jsx("span",{children:"সাপোর্ট প্রয়োজন? সম্প্রদায়ে সাহায্য চান"})]}),l.jsx("p",{className:"text-center text-gray-600 text-sm mt-2",children:"Need Support? Seek Help in the Community"})]}),l.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-lg p-4",children:[l.jsx("h4",{className:"font-bold text-gray-800 mb-3 text-center",children:"কার্যক্রমের ধরন"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{type:"mental",label:"মানসিক",description:"মনোযোগ ও চিন্তা"},{type:"physical",label:"শারীরিক",description:"ব্যায়াম ও নড়াচড়া"},{type:"creative",label:"সৃজনশীল",description:"আঁকা ও লেখা"},{type:"game",label:"গেম",description:"মজার খেলা"}].map(b=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`w-8 h-8 bg-gradient-to-r ${T(b.type)} rounded-full flex items-center justify-center mx-auto mb-2`,children:l.jsx("span",{className:"text-white text-sm",children:x(b.type)})}),l.jsx("div",{className:"text-xs font-medium text-gray-800",children:b.label}),l.jsx("div",{className:"text-xs text-gray-500",children:b.description})]},b.type))})]})]}),l.jsx(va,{})]})},ce=t=>typeof t=="string",pl=()=>{let t,e;const n=new Promise((r,s)=>{t=r,e=s});return n.resolve=t,n.reject=e,n},fT=t=>t==null?"":""+t,p$=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},g$=/###/g,mT=t=>t&&t.indexOf("###")>-1?t.replace(g$,"."):t,pT=t=>!t||ce(t),Yl=(t,e,n)=>{const r=ce(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(pT(t))return{};const i=mT(r[s]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++s}return pT(t)?{}:{obj:t,k:mT(r[s])}},gT=(t,e,n)=>{const{obj:r,k:s}=Yl(t,e,Object);if(r!==void 0||e.length===1){r[s]=n;return}let i=e[e.length-1],o=e.slice(0,e.length-1),a=Yl(t,o,Object);for(;a.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),a=Yl(t,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},y$=(t,e,n,r)=>{const{obj:s,k:i}=Yl(t,e,Object);s[i]=s[i]||[],s[i].push(n)},Fh=(t,e)=>{const{obj:n,k:r}=Yl(t,e);if(n)return n[r]},x$=(t,e,n)=>{const r=Fh(t,n);return r!==void 0?r:Fh(e,n)},CC=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ce(t[r])||t[r]instanceof String||ce(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):CC(t[r],e[r],n):t[r]=e[r]);return t},xo=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var v$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const w$=t=>ce(t)?t.replace(/[&<>"'\/]/g,e=>v$[e]):t;class _${constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const b$=[" ",",","?","!",";"],T$=new _$(20),E$=(t,e,n)=>{e=e||"",n=n||"";const r=b$.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=T$.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(t);if(!i){const o=t.indexOf(n);o>0&&!s.test(t.substring(0,o))&&(i=!0)}return i},s0=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let s=t;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,a="";for(let c=i;c<r.length;++c)if(c!==i&&(a+=n),a+=r[c],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}s=o}return s},Uh=t=>t&&t.replace("_","-"),N$={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class Bh{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||N$,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,s){return s&&!this.debug?null:(ce(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Bh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Bh(this.logger,e)}}var Zn=new Bh;class $f{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,c]=o;for(let u=0;u<c;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,c]=o;for(let u=0;u<c;u++)a.apply(a,[e,...r])})}}class yT extends $f{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ce(r)&&i?a.push(...r.split(i)):a.push(r)));const c=Fh(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!o||!ce(r)?c:s0(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),s=n,n=a[1]),this.addNamespaces(n),gT(this.data,a,s),i.silent||this.emit("added",e,n,r,s)}addResources(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ce(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});s.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),s=r,r=n,n=a[1]),this.addNamespaces(n);let c=Fh(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?CC(c,r,i):c={...c,...r},gT(this.data,a,c),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var jC={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,s){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,s))}),e}};const xT={};class $h extends $f{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),p$(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!E$(e,r,s);if(o&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:ce(i)?[i]:i};const u=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(s)}return{key:e,namespaces:ce(i)?[i]:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],n),c=a[a.length-1],u=n.lng||this.language,h=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(h){const I=n.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${I}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${I}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:o}const f=this.resolve(e,n);let m=f&&f.res;const g=f&&f.usedKey||o,v=f&&f.exactUsedKey||o,x=Object.prototype.toString.apply(m),T=["[object Number]","[object Function]","[object RegExp]"],b=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,_=!ce(m)&&typeof m!="boolean"&&typeof m!="number";if(y&&m&&_&&T.indexOf(x)<0&&!(ce(b)&&Array.isArray(m))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const I=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,m,{...n,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=I,f.usedParams=this.getUsedParamsDetails(n),f):I}if(i){const I=Array.isArray(m),A=I?[]:{},R=I?v:g;for(const S in m)if(Object.prototype.hasOwnProperty.call(m,S)){const E=`${R}${i}${S}`;A[S]=this.translate(E,{...n,joinArrays:!1,ns:a}),A[S]===E&&(A[S]=m[S])}m=A}}else if(y&&ce(b)&&Array.isArray(m))m=m.join(b),m&&(m=this.extendTranslation(m,e,n,r));else{let I=!1,A=!1;const R=n.count!==void 0&&!ce(n.count),S=$h.hasDefaultValue(n),E=R?this.pluralResolver.getSuffix(u,n.count,n):"",k=n.ordinal&&R?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",j=R&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),D=j&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${E}`]||n[`defaultValue${k}`]||n.defaultValue;!this.isValidLookup(m)&&S&&(I=!0,m=D),this.isValidLookup(m)||(A=!0,m=o);const P=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:m,X=S&&D!==m&&this.options.updateMissing;if(A||I||X){if(this.logger.log(X?"updateKey":"missingKey",u,c,o,X?D:m),i){const $=this.resolve(o,{...n,keySeparator:!1});$&&$.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let de=[];const he=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&he&&he[0])for(let $=0;$<he.length;$++)de.push(he[$]);else this.options.saveMissingTo==="all"?de=this.languageUtils.toResolveHierarchy(n.lng||this.language):de.push(n.lng||this.language);const ke=($,z,G)=>{const te=S&&G!==m?G:P;this.options.missingKeyHandler?this.options.missingKeyHandler($,c,z,te,X,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing($,c,z,te,X,n),this.emit("missingKey",$,c,z,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?de.forEach($=>{const z=this.pluralResolver.getSuffixes($,n);j&&n[`defaultValue${this.options.pluralSeparator}zero`]&&z.indexOf(`${this.options.pluralSeparator}zero`)<0&&z.push(`${this.options.pluralSeparator}zero`),z.forEach(G=>{ke([$],o+G,n[`defaultValue${G}`]||D)})}):ke(de,o,D))}m=this.extendTranslation(m,e,n,f,r),A&&m===o&&this.options.appendNamespaceToMissingKey&&(m=`${c}:${o}`),(A||I)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${o}`:o,I?m:void 0):m=this.options.parseMissingKeyHandler(m))}return s?(f.res=m,f.usedParams=this.getUsedParamsDetails(n),f):m}extendTranslation(e,n,r,s,i){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=ce(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(u){const m=e.match(this.interpolator.nestingRegexp);h=m&&m.length}let f=r.replace&&!ce(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||s.usedLng,r),u){const m=e.match(this.interpolator.nestingRegexp),g=m&&m.length;h<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];return i&&i[0]===g[0]&&!r.context?(o.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):o.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,c=ce(a)?[a]:a;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=jC.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,o,a;return ce(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,n),h=u.key;s=h;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const m=n.count!==void 0&&!ce(n.count),g=m&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(ce(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(T=>{this.isValidLookup(r)||(a=T,!xT[`${x[0]}-${T}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(xT[`${x[0]}-${T}`]=!0,this.logger.warn(`key "${s}" for languages "${x.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(b=>{if(this.isValidLookup(r))return;o=b;const y=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(y,h,b,T,n);else{let I;m&&(I=this.pluralResolver.getSuffix(b,n.count,n));const A=`${this.options.pluralSeparator}zero`,R=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(y.push(h+I),n.ordinal&&I.indexOf(R)===0&&y.push(h+I.replace(R,this.options.pluralSeparator)),g&&y.push(h+A)),v){const S=`${h}${this.options.contextSeparator}${n.context}`;y.push(S),m&&(y.push(S+I),n.ordinal&&I.indexOf(R)===0&&y.push(S+I.replace(R,this.options.pluralSeparator)),g&&y.push(S+A))}}let _;for(;_=y.pop();)this.isValidLookup(r)||(i=_,r=this.getResource(b,T,_,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,s):this.resourceStore.getResource(e,n,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ce(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const op=t=>t.charAt(0).toUpperCase()+t.slice(1);class vT{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zn.create("languageUtils")}getScriptPartFromCode(e){if(e=Uh(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Uh(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ce(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=op(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=op(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=op(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return n=s;n=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ce(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ce(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ce(e)&&i(this.formatLanguageCode(e)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}let I$=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],S$={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const k$=["v1","v2","v3"],C$=["v4"],wT={zero:0,one:1,two:2,few:3,many:4,other:5},j$=()=>{const t={};return I$.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:S$[e.fc]}})}),t};class P${constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Zn.create("pluralResolver"),(!this.options.compatibilityJSON||C$.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=j$(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Uh(e==="dev"?"en":e),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(c,n)}return this.pluralRulesCache[i]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${n}${s}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>wT[s]-wT[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:this.getSuffixRetroCompatible(s,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!k$.includes(this.options.compatibilityJSON)}}const _T=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=x$(t,e,n);return!i&&s&&ce(n)&&(i=s0(t,n,r),i===void 0&&(i=s0(e,n,r))),i},ap=t=>t.replace(/\$/g,"$$$$");class A${constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zn.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:a,suffixEscaped:c,formatSeparator:u,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:m,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:x,nestingOptionsSeparator:T,maxReplaces:b,alwaysFormat:y}=e.interpolation;this.escape=n!==void 0?n:w$,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?xo(i):o||"{{",this.suffix=a?xo(a):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=m?xo(m):g||xo("$t("),this.nestingSuffix=v?xo(v):x||xo(")"),this.nestingOptionsSeparator=T||",",this.maxReplaces=b||1e3,this.alwaysFormat=y!==void 0?y:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,s){let i,o,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const b=_T(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(b,void 0,r,{...s,...n,interpolationkey:g}):b}const v=g.split(this.formatSeparator),x=v.shift().trim(),T=v.join(this.formatSeparator).trim();return this.format(_T(n,c,x,this.options.keySeparator,this.options.ignoreJSONStructure),T,r,{...s,...n,interpolationkey:x})};this.resetRegExp();const h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,f=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>ap(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?ap(this.escape(g)):ap(g)}].forEach(g=>{for(a=0;i=g.regex.exec(e);){const v=i[1].trim();if(o=u(v),o===void 0)if(typeof h=="function"){const T=h(e,i,s);o=ce(T)?T:""}else if(s&&Object.prototype.hasOwnProperty.call(s,v))o="";else if(f){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),o="";else!ce(o)&&!this.useRawValueToEscape&&(o=fT(o));const x=g.safeValue(o);if(e=e.replace(i[0],x),f?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,o;const a=(c,u)=>{const h=this.nestingOptionsSeparator;if(c.indexOf(h)<0)return c;const f=c.split(new RegExp(`${h}[ ]*{`));let m=`{${f[1]}`;c=f[0],m=this.interpolate(m,o);const g=m.match(/'/g),v=m.match(/"/g);(g&&g.length%2===0&&!v||v.length%2!==0)&&(m=m.replace(/'/g,'"'));try{o=JSON.parse(m),u&&(o={...u,...o})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,x),`${c}${h}${m}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];o={...r},o=o.replace&&!ce(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const h=s[1].split(this.formatSeparator).map(f=>f.trim());s[1]=h.shift(),c=h,u=!0}if(i=n(a.call(this,s[1].trim(),o),o),i&&s[0]===e&&!ce(i))return i;ce(i)||(i=fT(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((h,f)=>this.format(h,f,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const R$=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();n[h]||(n[h]=u),u==="false"&&(n[h]=!1),u==="true"&&(n[h]=!0),isNaN(u)||(n[h]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},vo=t=>{const e={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let a=e[o];return a||(a=t(Uh(r),s),e[o]=a),a(n)}};class D${constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zn.create("formatter"),this.options=e,this.formats={number:vo((n,r)=>{const s=new Intl.NumberFormat(n,{...r});return i=>s.format(i)}),currency:vo((n,r)=>{const s=new Intl.NumberFormat(n,{...r,style:"currency"});return i=>s.format(i)}),datetime:vo((n,r)=>{const s=new Intl.DateTimeFormat(n,{...r});return i=>s.format(i)}),relativetime:vo((n,r)=>{const s=new Intl.RelativeTimeFormat(n,{...r});return i=>s.format(i,r.range||"day")}),list:vo((n,r)=>{const s=new Intl.ListFormat(n,{...r});return i=>s.format(i)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=vo(n)}format(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,c)=>{const{formatName:u,formatOptions:h}=R$(c);if(this.formats[u]){let f=a;try{const m=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},g=m.locale||m.lng||s.locale||s.lng||r;f=this.formats[u](a,g,{...h,...s,...m})}catch(m){this.logger.warn(m)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const V$=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class L$ extends $f{constructor(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Zn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,n,r,s){const i={},o={},a={},c={};return e.forEach(u=>{let h=!0;n.forEach(f=>{const m=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?o[m]===void 0&&(o[m]=!0):(this.state[m]=1,h=!1,o[m]===void 0&&(o[m]=!0),i[m]===void 0&&(i[m]=!0),c[f]===void 0&&(c[f]=!0)))}),h||(a[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const s=e.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{y$(c.loaded,[i],o),V$(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{a[u]||(a[u]={});const h=c.loaded[u];h.length&&h.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const a=(u,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&h&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,s+1,i*2,o)},i);return}o(u,h)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,n);u&&typeof u.then=="function"?u.then(h=>a(null,h)).catch(a):a(null,u)}catch(u){a(u)}return}return c(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ce(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ce(n)&&(n=[n]);const i=this.queueLoad(e,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,n,r,s,i){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let h;u.length===5?h=u(e,n,r,s,c):h=u(e,n,r,s),h&&typeof h.then=="function"?h.then(f=>a(null,f)).catch(a):a(null,h)}catch(h){a(h)}else u(e,n,r,s,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,s)}}}const bT=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ce(t[1])&&(e.defaultValue=t[1]),ce(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),TT=t=>(ce(t.ns)&&(t.ns=[t.ns]),ce(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ce(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),nd=()=>{},M$=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Dc extends $f{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=TT(e),this.services={},this.logger=Zn,this.modules={external:[]},M$(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ce(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const s=bT();this.options={...s,...this.options,...TT(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Zn.init(i(this.modules.logger),this.options):Zn.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=D$);const f=new vT(this.options);this.store=new yT(this.options.resources,this.options);const m=this.services;m.logger=Zn,m.resourceStore=this.store,m.languageUtils=f,m.pluralResolver=new P$(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(m.formatter=i(h),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new A$(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new L$(i(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(g){for(var v=arguments.length,x=new Array(v>1?v-1:0),T=1;T<v;T++)x[T-1]=arguments[T];e.emit(g,...x)}),this.modules.languageDetector&&(m.languageDetector=i(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=i(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new $h(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,x=new Array(v>1?v-1:0),T=1;T<v;T++)x[T-1]=arguments[T];e.emit(g,...x)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=nd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const c=pl(),u=()=>{const h=(f,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),r(f,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nd;const s=ce(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const s=pl();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=nd),this.services.backendConnector.reload(e,n,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&jC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const s=pl();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},a=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=ce(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,h=>{o(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,n,r){var s=this;const i=function(o,a){let c;if(typeof a!="object"){for(var u=arguments.length,h=new Array(u>2?u-2:0),f=2;f<u;f++)h[f-2]=arguments[f];c=s.options.overloadTranslationOptionHandler([o,a].concat(h))}else c={...a};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const m=s.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(o)?g=o.map(v=>`${c.keyPrefix}${m}${v}`):g=c.keyPrefix?`${c.keyPrefix}${m}${o}`:o,s.t(g,c)};return ce(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(a,c)=>{const u=this.services.backendConnector.state[`${a}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!s||o(i,e)))}loadNamespaces(e,n){const r=pl();return this.options.ns?(ce(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=pl();ce(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new vT(bT());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Dc(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nd;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new Dc(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new yT(this.store.data,s),i.services.resourceStore=i.store),i.translator=new $h(i.services,s),i.translator.on("*",function(a){for(var c=arguments.length,u=new Array(c>1?c-1:0),h=1;h<c;h++)u[h-1]=arguments[h];i.emit(a,...u)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Lt=Dc.createInstance();Lt.createInstance=Dc.createInstance;Lt.createInstance;Lt.dir;Lt.init;Lt.loadResources;Lt.reloadResources;Lt.use;Lt.changeLanguage;Lt.getFixedT;Lt.t;Lt.exists;Lt.setDefaultNamespace;Lt.hasLoadedNamespace;Lt.loadNamespaces;Lt.loadLanguages;function O$(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function F$(t,e){if(Vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function U$(t){var e=F$(t,"string");return Vc(e)=="symbol"?e:e+""}function B$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U$(r.key),r)}}function $$(t,e,n){return e&&B$(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}var PC=[],z$=PC.forEach,H$=PC.slice;function q$(t){return z$.call(H$.call(arguments,1),function(e){if(e)for(var n in e)t[n]===void 0&&(t[n]=e[n])}),t}var ET=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,K$=function(e,n,r){var s=r||{};s.path=s.path||"/";var i=encodeURIComponent(n),o="".concat(e,"=").concat(i);if(s.maxAge>0){var a=s.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");o+="; Max-Age=".concat(Math.floor(a))}if(s.domain){if(!ET.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain=".concat(s.domain)}if(s.path){if(!ET.test(s.path))throw new TypeError("option path is invalid");o+="; Path=".concat(s.path)}if(s.expires){if(typeof s.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+="; Expires=".concat(s.expires.toUTCString())}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.sameSite){var c=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(c){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o},NT={create:function(e,n,r,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),s&&(i.domain=s),document.cookie=K$(e,encodeURIComponent(n),i)},read:function(e){for(var n="".concat(e,"="),r=document.cookie.split(";"),s=0;s<r.length;s++){for(var i=r[s];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(n)===0)return i.substring(n.length,i.length)}return null},remove:function(e){this.create(e,"",-1)}},W$={name:"cookie",lookup:function(e){var n;if(e.lookupCookie&&typeof document<"u"){var r=NT.read(e.lookupCookie);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupCookie&&typeof document<"u"&&NT.create(n.lookupCookie,e,n.cookieMinutes,n.cookieDomain,n.cookieOptions)}},G$={name:"querystring",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var s=r.substring(1),i=s.split("&"),o=0;o<i.length;o++){var a=i[o].indexOf("=");if(a>0){var c=i[o].substring(0,a);c===e.lookupQuerystring&&(n=i[o].substring(a+1))}}}return n}},gl=null,IT=function(){if(gl!==null)return gl;try{gl=window!=="undefined"&&window.localStorage!==null;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{gl=!1}return gl},Q$={name:"localStorage",lookup:function(e){var n;if(e.lookupLocalStorage&&IT()){var r=window.localStorage.getItem(e.lookupLocalStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupLocalStorage&&IT()&&window.localStorage.setItem(n.lookupLocalStorage,e)}},yl=null,ST=function(){if(yl!==null)return yl;try{yl=window!=="undefined"&&window.sessionStorage!==null;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{yl=!1}return yl},Y$={name:"sessionStorage",lookup:function(e){var n;if(e.lookupSessionStorage&&ST()){var r=window.sessionStorage.getItem(e.lookupSessionStorage);r&&(n=r)}return n},cacheUserLanguage:function(e,n){n.lookupSessionStorage&&ST()&&window.sessionStorage.setItem(n.lookupSessionStorage,e)}},J$={name:"navigator",lookup:function(e){var n=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)n.push(navigator.languages[r]);navigator.userLanguage&&n.push(navigator.userLanguage),navigator.language&&n.push(navigator.language)}return n.length>0?n:void 0}},X$={name:"htmlTag",lookup:function(e){var n,r=e.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},Z$={name:"path",lookup:function(e){var n;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof e.lookupFromPathIndex=="number"){if(typeof r[e.lookupFromPathIndex]!="string")return;n=r[e.lookupFromPathIndex].replace("/","")}else n=r[0].replace("/","")}return n}},e7={name:"subdomain",lookup:function(e){var n=typeof e.lookupFromSubdomainIndex=="number"?e.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}},AC=!1;try{document.cookie,AC=!0}catch{}var RC=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];AC||RC.splice(1,1);function t7(){return{order:RC,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(e){return e}}}var DC=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};O$(this,t),this.type="languageDetector",this.detectors={},this.init(e,n)}return $$(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=n||{languageUtils:{}},this.options=q$(r,this.options||{},t7()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(W$),this.addDetector(G$),this.addDetector(Q$),this.addDetector(Y$),this.addDetector(J$),this.addDetector(X$),this.addDetector(Z$),this.addDetector(e7)}},{key:"addDetector",value:function(n){return this.detectors[n.name]=n,this}},{key:"detect",value:function(n){var r=this;n||(n=this.options.order);var s=[];return n.forEach(function(i){if(r.detectors[i]){var o=r.detectors[i].lookup(r.options);o&&typeof o=="string"&&(o=[o]),o&&(s=s.concat(o))}}),s=s.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?s:s.length>0?s[0]:null}},{key:"cacheUserLanguage",value:function(n,r){var s=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(n)>-1||r.forEach(function(i){s.detectors[i]&&s.detectors[i].cacheUserLanguage(n,s.options)}))}}])}();DC.type="languageDetector";const n7={en:{translation:{dashboard:"Dashboard",community:"Community",rewards:"Rewards",profile:"Profile",login:"Login",signup:"Sign Up",email:"Email",password:"Password",confirmPassword:"Confirm Password",loginWithGoogle:"Login with Google",createAccount:"Create Account",alreadyHaveAccount:"Already have an account?",dontHaveAccount:"Don't have an account?",welcomeBack:"Welcome back",currentStreak:"Current Streak",days:"days",hours:"hours",minutes:"minutes",level:"Level",xp:"XP",coins:"Coins",checkIn:"Daily Check-in",urgeHelper:"Urge Helper",gratitudeDiary:"Gratitude Diary",successVault:"Success Vault",selectLanguage:"Select Your Language",continue:"Continue",levelUp:"Level Up!",xpEarned:"XP Earned",coinsEarned:"Coins Earned",mentalWorkout:"Mental Workout",solveThePuzzle:"Solve this puzzle to strengthen your mind",createPost:"Create Post",upvote:"Upvote",close:"Close",save:"Save",cancel:"Cancel",submit:"Submit",loading:"Loading...",error:"Error",success:"Success"}},bn:{translation:{dashboard:"ড্যাশবোর্ড",community:"কমিউনিটি",rewards:"পুরস্কার",profile:"প্রোফাইল",login:"লগইন",signup:"সাইন আপ",email:"ইমেইল",password:"পাসওয়ার্ড",confirmPassword:"পাসওয়ার্ড নিশ্চিত করুন",loginWithGoogle:"গুগলে লগইন করুন",createAccount:"অ্যাকাউন্ট তৈরি করুন",alreadyHaveAccount:"ইতিমধ্যে অ্যাকাউন্ট আছে?",dontHaveAccount:"অ্যাকাউন্ট নেই?",welcomeBack:"স্বাগতম",currentStreak:"বর্তমান ধারা",days:"দিন",hours:"ঘন্টা",minutes:"মিনিট",level:"লেভেল",xp:"এক্সপি",coins:"কয়েন",checkIn:"দৈনিক চেক-ইন",urgeHelper:"তাড়না সহায়ক",gratitudeDiary:"কৃতজ্ঞতার ডায়েরি",successVault:"সাফল্যের ভান্ডার",selectLanguage:"আপনার ভাষা নির্বাচন করুন",continue:"চালিয়ে যান",levelUp:"লেভেল আপ!",xpEarned:"এক্সপি অর্জিত",coinsEarned:"কয়েন অর্জিত",mentalWorkout:"মানসিক ব্যায়াম",solveThePuzzle:"আপনার মন শক্তিশালী করতে এই ধাঁধা সমাধান করুন",createPost:"পোস্ট তৈরি করুন",upvote:"আপভোট",close:"বন্ধ",save:"সংরক্ষণ",cancel:"বাতিল",submit:"জমা দিন",loading:"লোডিং...",error:"ত্রুটি",success:"সফল"}},hi:{translation:{dashboard:"डैशबोर्ड",community:"समुदाय",rewards:"पुरस्कार",profile:"प्रोफ़ाइल",login:"लॉगिन",signup:"साइन अप",email:"ईमेल",password:"पासवर्ड",confirmPassword:"पासवर्ड की पुष्टि करें",loginWithGoogle:"Google से लॉगिन करें",createAccount:"खाता बनाएं",alreadyHaveAccount:"पहले से खाता है?",dontHaveAccount:"खाता नहीं है?",welcomeBack:"वापसी पर स्वागत",currentStreak:"वर्तमान स्ट्रीक",days:"दिन",hours:"घंटे",minutes:"मिनट",level:"स्तर",xp:"एक्सपी",coins:"सिक्के",checkIn:"दैनिक चेक-इन",urgeHelper:"इच्छा सहायक",gratitudeDiary:"कृतज्ञता डायरी",successVault:"सफलता का खजाना",selectLanguage:"अपनी भाषा चुनें",continue:"जारी रखें",levelUp:"लेवल अप!",xpEarned:"एक्सपी अर्जित",coinsEarned:"सिक्के अर्जित",mentalWorkout:"मानसिक व्यायाम",solveThePuzzle:"अपने मन को मजबूत बनाने के लिए इस पहेली को हल करें",createPost:"पोस्ट बनाएं",upvote:"अपवोट",close:"बंद करें",save:"सेव करें",cancel:"रद्द करें",submit:"जमा करें",loading:"लोड हो रहा है...",error:"त्रुटि",success:"सफलता"}},ur:{translation:{dashboard:"ڈیش بورڈ",community:"کمیونٹی",rewards:"انعامات",profile:"پروفائل",login:"لاگ ان",signup:"سائن اپ",email:"ای میل",password:"پاس ورڈ",confirmPassword:"پاس ورڈ کی تصدیق کریں",loginWithGoogle:"گوگل سے لاگ ان کریں",createAccount:"اکاؤنٹ بنائیں",alreadyHaveAccount:"پہلے سے اکاؤنٹ ہے؟",dontHaveAccount:"اکاؤنٹ نہیں ہے؟",welcomeBack:"واپسی پر خوش آمدید",currentStreak:"موجودہ سلسلہ",days:"دن",hours:"گھنٹے",minutes:"منٹ",level:"سطح",xp:"ایکس پی",coins:"سکے",checkIn:"روزانہ چیک ان",urgeHelper:"خواہش کا مددگار",gratitudeDiary:"شکر گزاری کی ڈائری",successVault:"کامیابی کا خزانہ",selectLanguage:"اپنی زبان منتخب کریں",continue:"جاری رکھیں",levelUp:"لیول اپ!",xpEarned:"ایکس پی حاصل",coinsEarned:"سکے حاصل",mentalWorkout:"ذہنی ورزش",solveThePuzzle:"اپنے دماغ کو مضبوط بنانے کے لیے یہ پہیلی حل کریں",createPost:"پوسٹ بنائیں",upvote:"اپ ووٹ",close:"بند کریں",save:"محفوظ کریں",cancel:"منسوخ کریں",submit:"جمع کریں",loading:"لوڈ ہو رہا ہے...",error:"خرابی",success:"کامیابی"}}};Lt.use(DC).use(LD).init({resources:n7,fallbackLng:"en",lng:"bn",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});const r7=()=>{const{currentUser:t,loading:e,userData:n}=vn(),{i18n:r}=on(),[s,i]=N.useState(!1),[o,a]=N.useState(!1);N.useEffect(()=>{const u=localStorage.getItem("selectedLanguage");u?r.changeLanguage(u):i(!0)},[r]);const c=u=>{localStorage.setItem("selectedLanguage",u),r.changeLanguage(u),i(!1)};return e?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):s?l.jsx(PB,{onLanguageSelect:c}):l.jsx(R3,{children:l.jsx(s7,{currentUser:t,userData:n,showMotivationalPopup:o,setShowMotivationalPopup:a})})},s7=({currentUser:t,userData:e,showMotivationalPopup:n,setShowMotivationalPopup:r})=>{const{lastDailyPopup:s,loading:i}=eo();return N.useEffect(()=>{if(t&&e&&!i){const o=new Date().toDateString();if(s!==o){const c=setTimeout(()=>{r(!0)},1e3);return()=>clearTimeout(c)}}},[t,e,s,i,r]),l.jsxs(PR,{children:[l.jsxs(ER,{children:[l.jsx(fr,{path:"/",element:t?l.jsx(dr,{to:"/dashboard"}):l.jsx(dr,{to:"/login"})}),l.jsx(fr,{path:"/login",element:t?l.jsx(dr,{to:"/dashboard"}):l.jsx(RB,{})}),l.jsx(fr,{path:"/signup",element:t?l.jsx(dr,{to:"/dashboard"}):l.jsx(DB,{})}),l.jsx(fr,{path:"/dashboard",element:t?l.jsx(qB,{}):l.jsx(dr,{to:"/login"})}),l.jsx(fr,{path:"/community",element:t?l.jsx(QB,{}):l.jsx(dr,{to:"/login"})}),l.jsx(fr,{path:"/rewards",element:t?l.jsx(XB,{}):l.jsx(dr,{to:"/login"})}),l.jsx(fr,{path:"/profile",element:t?l.jsx(YB,{}):l.jsx(dr,{to:"/login"})}),l.jsx(fr,{path:"/urge-helper",element:t?l.jsx(m$,{}):l.jsx(dr,{to:"/login"})})]}),n&&l.jsx(AB,{onClose:()=>r(!1)}),l.jsx(ED,{position:"top-center"})]})};function i7(){return l.jsx(A3,{children:l.jsx(r7,{})})}UN(document.getElementById("root")).render(l.jsx(N.StrictMode,{children:l.jsx(i7,{})}));
